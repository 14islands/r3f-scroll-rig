import*as e from"react";import t,{useLayoutEffect as r,useEffect as n,useReducer as i,useRef as o,useDebugValue as s,forwardRef as l,useImperativeHandle as a,useMemo as c,useState as u,useCallback as h,memo as d}from"react";import{Vector2 as f,Color as p,Scene as v,MathUtils as m,TextureLoader as g,ImageBitmapLoader as w,Texture as y,CanvasTexture as b,DefaultLoadingManager as S}from"three";import{useThree as E,invalidate as T,useFrame as x,createPortal as O,useLoader as R,addEffect as z}from"@react-three/fiber";import{Text as A}from"@react-three/drei";function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},M.apply(this,arguments)}function k(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)t.indexOf(r=o[n])>=0||(i[r]=e[r]);return i}function C(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}var L,I=[],_="ResizeObserver loop completed with undelivered notifications.";!function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(L||(L={}));var V,j=function(e){return Object.freeze(e)},B=function(e,t){this.inlineSize=e,this.blockSize=t,j(this)},F=function(){function e(e,t,r,n){return this.x=e,this.y=t,this.width=r,this.height=n,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,j(this)}return e.prototype.toJSON=function(){var e=this;return{x:e.x,y:e.y,top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),P=function(e){return e instanceof SVGElement&&"getBBox"in e},N=function(e){if(P(e)){var t=e.getBBox();return!t.width&&!t.height}return!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},D=function(e){var t;if(e instanceof Element)return!0;var r=null===(t=null==e?void 0:e.ownerDocument)||void 0===t?void 0:t.defaultView;return!!(r&&e instanceof r.Element)},W="undefined"!=typeof window?window:{},U=new WeakMap,Y=/auto|scroll/,q=/^tb|vertical/,X=/msie|trident/i.test(W.navigator&&W.navigator.userAgent),H=function(e){return parseFloat(e||"0")},Q=function(e,t,r){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=!1),new B((r?t:e)||0,(r?e:t)||0)},$=j({devicePixelContentBoxSize:Q(),borderBoxSize:Q(),contentBoxSize:Q(),contentRect:new F(0,0,0,0)}),G=function(e,t){if(void 0===t&&(t=!1),U.has(e)&&!t)return U.get(e);if(N(e))return U.set(e,$),$;var r=getComputedStyle(e),n=P(e)&&e.ownerSVGElement&&e.getBBox(),i=!X&&"border-box"===r.boxSizing,o=q.test(r.writingMode||""),s=!n&&Y.test(r.overflowY||""),l=!n&&Y.test(r.overflowX||""),a=n?0:H(r.paddingTop),c=n?0:H(r.paddingRight),u=n?0:H(r.paddingBottom),h=n?0:H(r.paddingLeft),d=n?0:H(r.borderTopWidth),f=n?0:H(r.borderRightWidth),p=n?0:H(r.borderBottomWidth),v=h+c,m=a+u,g=(n?0:H(r.borderLeftWidth))+f,w=d+p,y=l?e.offsetHeight-w-e.clientHeight:0,b=s?e.offsetWidth-g-e.clientWidth:0,S=i?v+g:0,E=i?m+w:0,T=n?n.width:H(r.width)-S-b,x=n?n.height:H(r.height)-E-y,O=T+v+b+g,R=x+m+y+w,z=j({devicePixelContentBoxSize:Q(Math.round(T*devicePixelRatio),Math.round(x*devicePixelRatio),o),borderBoxSize:Q(O,R,o),contentBoxSize:Q(T,x,o),contentRect:new F(h,a,T,x)});return U.set(e,z),z},J=function(e,t,r){var n=G(e,r),i=n.borderBoxSize,o=n.contentBoxSize,s=n.devicePixelContentBoxSize;switch(t){case L.DEVICE_PIXEL_CONTENT_BOX:return s;case L.BORDER_BOX:return i;default:return o}},K=function(e){var t=G(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=j([t.borderBoxSize]),this.contentBoxSize=j([t.contentBoxSize]),this.devicePixelContentBoxSize=j([t.devicePixelContentBoxSize])},Z=function(e){if(N(e))return Infinity;for(var t=0,r=e.parentNode;r;)t+=1,r=r.parentNode;return t},ee=function(){var e=Infinity,t=[];I.forEach(function(r){if(0!==r.activeTargets.length){var n=[];r.activeTargets.forEach(function(t){var r=new K(t.target),i=Z(t.target);n.push(r),t.lastReportedSize=J(t.target,t.observedBox),i<e&&(e=i)}),t.push(function(){r.callback.call(r.observer,n,r.observer)}),r.activeTargets.splice(0,r.activeTargets.length)}});for(var r=0,n=t;r<n.length;r++)(0,n[r])();return e},te=function(e){I.forEach(function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach(function(r){r.isActive()&&(Z(r.target)>e?t.activeTargets.push(r):t.skippedTargets.push(r))})})},re=[],ne=0,ie={attributes:!0,characterData:!0,childList:!0,subtree:!0},oe=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],se=function(e){return void 0===e&&(e=0),Date.now()+e},le=!1,ae=new(function(){function e(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return e.prototype.run=function(e){var t=this;if(void 0===e&&(e=250),!le){le=!0;var r,n=se(e);r=function(){var r=!1;try{r=function(){var e,t=0;for(te(t);I.some(function(e){return e.activeTargets.length>0});)t=ee(),te(t);return I.some(function(e){return e.skippedTargets.length>0})&&("function"==typeof ErrorEvent?e=new ErrorEvent("error",{message:_}):((e=document.createEvent("Event")).initEvent("error",!1,!1),e.message=_),window.dispatchEvent(e)),t>0}()}finally{if(le=!1,e=n-se(),!ne)return;r?t.run(1e3):e>0?t.run(e):t.start()}},function(e){if(!V){var t=0,n=document.createTextNode("");new MutationObserver(function(){return re.splice(0).forEach(function(e){return e()})}).observe(n,{characterData:!0}),V=function(){n.textContent="".concat(t?t--:t++)}}re.push(function(){requestAnimationFrame(r)}),V()}()}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,ie)};document.body?t():W.addEventListener("DOMContentLoaded",t)},e.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),oe.forEach(function(t){return W.addEventListener(t,e.listener,!0)}))},e.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),oe.forEach(function(t){return W.removeEventListener(t,e.listener,!0)}),this.stopped=!0)},e}()),ce=function(e){!ne&&e>0&&ae.start(),!(ne+=e)&&ae.stop()},ue=function(){function e(e,t){this.target=e,this.observedBox=t||L.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var e,t=J(this.target,this.observedBox,!0);return P(e=this.target)||function(e){switch(e.tagName){case"INPUT":if("image"!==e.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(e)||"inline"!==getComputedStyle(e).display||(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),he=function(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t},de=new WeakMap,fe=function(e,t){for(var r=0;r<e.length;r+=1)if(e[r].target===t)return r;return-1},pe=function(){function e(){}return e.connect=function(e,t){var r=new he(e,t);de.set(e,r)},e.observe=function(e,t,r){var n=de.get(e),i=0===n.observationTargets.length;fe(n.observationTargets,t)<0&&(i&&I.push(n),n.observationTargets.push(new ue(t,r&&r.box)),ce(1),ae.schedule())},e.unobserve=function(e,t){var r=de.get(e),n=fe(r.observationTargets,t);n>=0&&(1===r.observationTargets.length&&I.splice(I.indexOf(r),1),r.observationTargets.splice(n,1),ce(-1))},e.disconnect=function(e){var t=this,r=de.get(e);r.observationTargets.slice().forEach(function(r){return t.unobserve(e,r.target)}),r.activeTargets.splice(0,r.activeTargets.length)},e}(),ve=function(){function e(e){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof e)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");pe.connect(this,e)}return e.prototype.observe=function(e,t){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!D(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");pe.observe(this,e,t)},e.prototype.unobserve=function(e){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!D(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");pe.unobserve(this,e)},e.prototype.disconnect=function(){pe.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}(),me="%[a-f0-9]{2}",ge=new RegExp(me,"gi"),we=new RegExp("("+me+")+","gi");function ye(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;var r=e.slice(0,t=t||1),n=e.slice(t);return Array.prototype.concat.call([],ye(r),ye(n))}function be(e){try{return decodeURIComponent(e)}catch(n){for(var t=e.match(ge),r=1;r<t.length;r++)t=(e=ye(t,r).join("")).match(ge);return e}}var Se,Ee,Te=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},r=we.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(e){var n=be(r[0]);n!==r[0]&&(t[r[0]]=n)}r=we.exec(e)}t["%C2"]="�";for(var i=Object.keys(t),o=0;o<i.length;o++){var s=i[o];e=e.replace(new RegExp(s,"g"),t[s])}return e}(e)}},xe=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const r=e.indexOf(t);return-1===r?[e]:[e.slice(0,r),e.slice(r+t.length)]},Oe=function(e,t){for(var r={},n=Object.keys(e),i=Array.isArray(t),o=0;o<n.length;o++){var s=n[o],l=e[s];(i?-1!==t.indexOf(s):t(s,l,e))&&(r[s]=l)}return r};Se=function(e,t){function r(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function n(e,t){return t.encode?t.strict?encodeURIComponent(e).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`):encodeURIComponent(e):e}function i(e,t){return t.decode?Te(e):e}function o(e){return Array.isArray(e)?e.sort():"object"==typeof e?o(Object.keys(e)).sort((e,t)=>Number(e)-Number(t)).map(t=>e[t]):e}function s(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function l(e){const t=(e=s(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function a(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function c(e,t){r((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,r,n)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=r):n[e]=r};case"bracket":return(e,r,n)=>{t=/(\[\])$/.exec(e),n[e=e.replace(/\[\]$/,"")]=t?void 0!==n[e]?[].concat(n[e],r):[r]:r};case"comma":case"separator":return(t,r,n)=>{const o="string"==typeof r&&r.includes(e.arrayFormatSeparator),s="string"==typeof r&&!o&&i(r,e).includes(e.arrayFormatSeparator);r=s?i(r,e):r;const l=o||s?r.split(e.arrayFormatSeparator).map(t=>i(t,e)):null===r?r:i(r,e);n[t]=l};default:return(e,t,r)=>{r[e]=void 0!==r[e]?[].concat(r[e],t):t}}}(t),s=Object.create(null);if("string"!=typeof e)return s;if(!(e=e.trim().replace(/^[?#&]/,"")))return s;for(const r of e.split("&")){if(""===r)continue;let[e,o]=xe(t.decode?r.replace(/\+/g," "):r,"=");o=void 0===o?null:["comma","separator"].includes(t.arrayFormat)?o:i(o,t),n(i(e,t),o,s)}for(const e of Object.keys(s)){const r=s[e];if("object"==typeof r&&null!==r)for(const e of Object.keys(r))r[e]=a(r[e],t);else s[e]=a(r,t)}return!1===t.sort?s:(!0===t.sort?Object.keys(s).sort():Object.keys(s).sort(t.sort)).reduce((e,t)=>{const r=s[t];return e[t]=Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?o(r):r,e},Object.create(null))}t.extract=l,t.parse=c,t.stringify=(e,t)=>{if(!e)return"";r((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const i=r=>t.skipNull&&null==e[r]||t.skipEmptyString&&""===e[r],o=function(e){switch(e.arrayFormat){case"index":return t=>(r,i)=>{const o=r.length;return void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?r:null===i?[...r,[n(t,e),"[",o,"]"].join("")]:[...r,[n(t,e),"[",n(o,e),"]=",n(i,e)].join("")]};case"bracket":return t=>(r,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?r:null===i?[...r,[n(t,e),"[]"].join("")]:[...r,[n(t,e),"[]=",n(i,e)].join("")];case"comma":case"separator":return t=>(r,i)=>null==i||0===i.length?r:0===r.length?[[n(t,e),"=",n(i,e)].join("")]:[[r,n(i,e)].join(e.arrayFormatSeparator)];default:return t=>(r,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?r:null===i?[...r,n(t,e)]:[...r,[n(t,e),"=",n(i,e)].join("")]}}(t),s={};for(const t of Object.keys(e))i(t)||(s[t]=e[t]);const l=Object.keys(s);return!1!==t.sort&&l.sort(t.sort),l.map(r=>{const i=e[r];return void 0===i?"":null===i?n(r,t):Array.isArray(i)?i.reduce(o(r),[]).join("&"):n(r,t)+"="+n(i,t)}).filter(e=>e.length>0).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[r,n]=xe(e,"#");return Object.assign({url:r.split("?")[0]||"",query:c(l(e),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:i(n,t)}:{})},t.stringifyUrl=(e,r)=>{r=Object.assign({encode:!0,strict:!0},r);const i=s(e.url).split("?")[0]||"",o=t.extract(e.url),l=t.parse(o,{sort:!1}),a=Object.assign(l,e.query);let c=t.stringify(a,r);c&&(c=`?${c}`);let u=function(e){let t="";const r=e.indexOf("#");return-1!==r&&(t=e.slice(r)),t}(e.url);return e.fragmentIdentifier&&(u=`#${n(e.fragmentIdentifier,r)}`),`${i}${c}${u}`},t.pick=(e,r,n)=>{n=Object.assign({parseFragmentIdentifier:!0},n);const{url:i,query:o,fragmentIdentifier:s}=t.parseUrl(e,n);return t.stringifyUrl({url:i,query:Oe(o,r),fragmentIdentifier:s},n)},t.exclude=(e,r,n)=>{const i=Array.isArray(r)?e=>!r.includes(e):(e,t)=>!r(e,t);return t.pick(e,i,n)}},Se(Ee={exports:{}},Ee.exports);var Re="undefined"!=typeof window?r:n;const ze="undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?n:r;var Ae={PRIORITY_PRELOAD:0,PRIORITY_SCISSORS:1,PRIORITY_VIEWPORTS:1,PRIORITY_GLOBAL:1e3,DEFAULT_SCALE_MULTIPLIER:1,preloadQueue:[]},Me=function(e){const t=function(e){let t;const r=/* @__PURE__ */new Set,n=(e,n)=>{const i="function"==typeof e?e(t):e;if(i!==t){const e=t;t=n?i:Object.assign({},t,i),r.forEach(r=>r(t,e))}},i=()=>t,o={setState:n,getState:i,subscribe:(e,n,o)=>n||o?((e,n=i,o=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let s=n(t);function l(){const r=n(t);if(!o(s,r)){const t=s;e(s=r,t)}}return r.add(l),()=>r.delete(l)})(e,n,o):(r.add(e),()=>r.delete(e)),destroy:()=>r.clear()};return s=n,t={debug:!1,scaleMultiplier:Ae.DEFAULT_SCALE_MULTIPLIER,globalRender:!0,globalPriority:Ae.PRIORITY_GLOBAL,globalClearDepth:!1,globalRenderQueue:!1,clearGlobalRenderQueue:function(){return s(function(){return{globalRenderQueue:!1}})},isCanvasAvailable:!0,hasSmoothScrollbar:!1,canvasChildren:{},renderToCanvas:function(e,t,r){return void 0===r&&(r={}),s(function(n){var i,o=n.canvasChildren;return Object.getOwnPropertyDescriptor(o,e)?(o[e].instances+=1,o[e].props.inactive=!1,{canvasChildren:o}):{canvasChildren:M({},o,((i={})[e]={mesh:t,props:r,instances:1},i))}})},updateCanvas:function(e,t){return s(function(r){var n,i=r.canvasChildren;if(i[e]){var o=i[e],s=o.instances;return{canvasChildren:M({},i,((n={})[e]={mesh:o.mesh,props:M({},o.props,t),instances:s},n))}}})},removeFromCanvas:function(e,t){return void 0===t&&(t=!0),s(function(r){var n,i=r.canvasChildren;return(null==(n=i[e])?void 0:n.instances)>1?(i[e].instances-=1,{canvasChildren:i}):t?{canvasChildren:k(i,[e].map(C))}:(i[e].instances=0,i[e].props.inactive=!0,{canvasChildren:M({},i)})})},pageReflow:0,requestReflow:function(){s(function(e){return{pageReflow:e.pageReflow+1}})},scroll:{y:0,x:0,limit:0,velocity:0,progress:0,direction:0,scrollDirection:void 0},scrollTo:function(){},onScroll:function(){return function(){}}},o;var s}(),r=(e=t.getState,r=Object.is)=>{const[,n]=i(e=>e+1,0),l=t.getState(),a=o(l),c=o(e),u=o(r),h=o(!1),d=o();let f;void 0===d.current&&(d.current=e(l));let p=!1;(a.current!==l||c.current!==e||u.current!==r||h.current)&&(f=e(l),p=!r(d.current,f)),ze(()=>{p&&(d.current=f),a.current=l,c.current=e,u.current=r,h.current=!1});const v=o(l);ze(()=>{const e=()=>{try{const e=t.getState(),r=c.current(e);u.current(d.current,r)||(a.current=e,d.current=r,n())}catch(e){h.current=!0,n()}},r=t.subscribe(e);return t.getState()!==v.current&&e(),r},[]);const m=p?f:d.current;return s(m),m};return Object.assign(r,t),r[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const e=[r,t];return{next(){const t=e.length<=0;return{value:e.shift(),done:t}}}},r}(),ke=["makeDefault","margin"],Ce=l(function(e,r){var n=e.makeDefault,i=void 0!==n&&n,s=e.margin,l=void 0===s?0:s,u=k(e,ke),h=E(function(e){return e.set}),d=E(function(e){return e.camera}),f=E(function(e){return e.size}),p=E(function(e){return e.viewport}),v=o(null);a(r,function(){return v.current});var m=Me(function(e){return e.pageReflow}),g=Me(function(e){return e.scaleMultiplier}),w=c(function(){var e,t=(f.height+2*l)*g,r=(f.width+2*l)*g/t,n=u.fov||50,i=null==u||null==(e=u.position)?void 0:e[2];return i?n=180/Math.PI*2*Math.atan(t/(2*i)):i=t/(2*Math.tan(n/2*Math.PI/180)),{fov:n,distance:i,aspect:r}},[f,g,m]),y=w.fov,b=w.distance,S=w.aspect;return Re(function(){v.current.lookAt(0,0,0),v.current.updateProjectionMatrix(),v.current.updateMatrixWorld(),h(function(e){return{viewport:M({},e.viewport,p.getCurrentViewport(d))}})},[f,g,m]),Re(function(){if(i){var e=d;return h(function(){return{camera:v.current}}),function(){return h(function(){return{camera:e}})}}},[v,i,h]),t.createElement("perspectiveCamera",M({ref:v,position:[0,0,b],onUpdate:function(e){return e.updateProjectionMatrix()},near:.1,aspect:S,fov:y,far:2*b},u))}),Le=["makeDefault","margin"],Ie=l(function(e,r){var n=e.makeDefault,i=void 0!==n&&n,s=e.margin,l=void 0===s?0:s,u=k(e,Le),h=E(function(e){return e.set}),d=E(function(e){return e.camera}),f=E(function(e){return e.size}),p=Me(function(e){return e.pageReflow}),v=Me(function(e){return e.scaleMultiplier}),m=c(function(){return Math.max(f.width*v,f.height*v)},[f,p,v]),g=o(null);return a(r,function(){return g.current}),Re(function(){g.current.lookAt(0,0,0),g.current.updateProjectionMatrix(),g.current.updateMatrixWorld()},[m,f]),Re(function(){if(i){var e=d;return h(function(){return{camera:g.current}}),function(){return h(function(){return{camera:e}})}}},[g,i,h]),t.createElement("orthographicCamera",M({left:f.width*v/-2-l*v,right:f.width*v/2+l*v,top:f.height*v/2+l*v,bottom:f.height*v/-2-l*v,far:2*m,position:[0,0,m],near:.001,ref:g,onUpdate:function(e){return e.updateProjectionMatrix()}},u))});function _e(e,t){e&&(!1===t?(e.wasFrustumCulled=e.frustumCulled,e.wasVisible=e.visible,e.visible=!0,e.frustumCulled=!1):(e.visible=!!e.wasVisible,e.frustumCulled=!!e.wasFrustumCulled),e.children.forEach(function(e){return _e(e,t)}))}var Ve=new f,je=function(e){void 0===e&&(e=[0]),Me.getState().globalRenderQueue=Me.getState().globalRenderQueue||[0],Me.getState().globalRenderQueue=[].concat(Me.getState().globalRenderQueue||[],e)},Be=function(e){var t=e.gl,r=e.scene,n=e.camera,i=e.left,o=e.top,s=e.width,l=e.height,a=e.layer,c=void 0===a?0:a,u=e.autoClear,h=e.clearDepth,d=void 0!==h&&h;r&&n&&(t.autoClear=void 0!==u&&u,t.setScissor(i,o,s,l),t.setScissorTest(!0),n.layers.set(c),d&&t.clearDepth(),t.render(r,n),t.setScissorTest(!1))},Fe=function(e){var t=e.gl,r=e.scene,n=e.camera,i=e.left,o=e.top,s=e.width,l=e.height,a=e.layer,c=void 0===a?0:a,u=e.scissor,h=void 0===u||u,d=e.autoClear,f=void 0!==d&&d,p=e.clearDepth,v=void 0!==p&&p;r&&n&&(t.getSize(Ve),t.autoClear=f,t.setViewport(i,o,s,l),t.setScissor(i,o,s,l),t.setScissorTest(h),n.layers.set(c),v&&t.clearDepth(),t.render(r,n),t.setScissorTest(!1),t.setViewport(0,0,Ve.x,Ve.y))},Pe=function(e,t,r,n){void 0===r&&(r=0),Ae.preloadQueue.push(function(i,o,s){i.setScissorTest(!1),_e(e||o,!1),t.layers.set(r),i.render(e||o,t||s),_e(e||o,!0),n&&n()}),T()},Ne=function(){var e=Me(function(e){return e.isCanvasAvailable}),t=Me(function(e){return e.hasSmoothScrollbar}),r=Me(function(e){return e.requestReflow}),i=Me(function(e){return e.pageReflow}),o=Me(function(e){return e.debug}),s=Me(function(e){return e.scaleMultiplier});return n(function(){o&&(window._scrollRig=window._scrollRig||{},window._scrollRig.reflow=r)},[]),{debug:o,isCanvasAvailable:e,hasSmoothScrollbar:t,scaleMultiplier:s,preloadScene:Pe,requestRender:je,renderScissor:Be,renderViewport:Fe,reflow:r,reflowCompleted:i}},De=function(e){return t.createElement("mesh",{scale:e.scale},t.createElement("planeGeometry",null),t.createElement("shaderMaterial",{args:[{uniforms:{color:{value:new p("hotpink")}},vertexShader:"\n            void main() {\n              gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n            }\n          ",fragmentShader:"\n            uniform vec3 color;\n            uniform float opacity;\n            void main() {\n              gl_FragColor.rgba = vec4(color, .5);\n            }\n          "}],transparent:!0}))};const We=new Map,Ue=new WeakMap;let Ye=0;function qe(e,t,r){var n,i,o,s,l;function a(){var c=Date.now()-s;c<t&&c>=0?n=setTimeout(a,t-c):(n=null,r||(l=e.apply(o,i),o=i=null))}null==t&&(t=100);var c=function(){o=this,i=arguments,s=Date.now();var c=r&&!n;return n||(n=setTimeout(a,t)),c&&(l=e.apply(o,i),o=i=null),l};return c.clear=function(){n&&(clearTimeout(n),n=null)},c.flush=function(){n&&(l=e.apply(o,i),o=i=null,clearTimeout(n),n=null)},c}qe.debounce=qe;var Xe=qe,He="undefined"!=typeof window;function Qe(e){var t=(void 0===e?{}:e).debounce,r=void 0===t?0:t,i=u({width:He?window.innerWidth:Infinity,height:He?window.innerHeight:Infinity}),o=i[0],s=i[1];return n(function(){var e=document.getElementById("ScrollRig-canvas");function t(){var t=e?e.clientWidth:window.innerWidth,r=e?e.clientHeight:window.innerHeight;t===o.width&&r===o.height||s({width:t,height:r})}var n,i=Xe.debounce(t,r),l=window.ResizeObserver||ve;return e?(n=new l(i)).observe(e):window.addEventListener("resize",i),t(),function(){var e;window.removeEventListener("resize",i),null==(e=n)||e.disconnect()}},[o,s]),o}let $e=new Proxy({},{get:function(e,t){return e.hasOwnProperty(t)||(e[t]=Ke(t)),e[t]}});class Ge extends Array{constructor(e,t){if(!(t=rt(t)).every(e=>"Number"===it(e)))throw new TypeError("All arguments must be numbers.");if(t.length>1&&t.length!==e)throw new Error("Argument list must be empty, have a single number, or have a length equal to the dimension.");0===t.length&&(t=[0]),1===t.length&&"Number"===it(t[0])&&(t=Array(e).fill(t[0])),e>1?super(...t):(super(1),this[0]=t[0]),Reflect.defineProperty(this,"pop",{value:void 0,enumerable:!1}),Reflect.defineProperty(this,"push",{value:void 0,enumerable:!1}),Reflect.defineProperty(this,"shift",{value:void 0,enumerable:!1}),Reflect.defineProperty(this,"unshift",{value:void 0,enumerable:!1})}get magnitude(){return this.pnorm(2)}div(e){tt(e,this.dim,!0),"Number"===it(e)&&(e=new Array(this.dim).fill(e));let t=[];for(let r=0;r<this.length;++r)t[r]=this[r]/e[r];return $e[this.dim](t)}minus(e){tt(e,this.dim,!0),"Number"===it(e)&&(e=new Array(this.dim).fill(e));let t=[];for(let r=0;r<this.dim;++r)t[r]=this[r]-e[r];return $e[this.dim](t)}neg(){return $e[this.dim](this.times(-1))}plus(e){tt(e,this.dim,!0),"Number"===it(e)&&(e=new Array(this.dim).fill(e));let t=[];for(let r=0;r<this.dim;++r)t[r]=this[r]+e[r];return $e[this.dim](t)}pow(e){let t=[];for(let r=0;r<this.dim;++r)t[r]=Math.pow(this[r],e);return $e[this.dim](t)}times(e){tt(e,this.dim,!0),"Number"===it(e)&&(e=new Array(this.dim).fill(e));let t=[];for(let r=0;r<this.dim;++r)t[r]=this[r]*e[r];return $e[this.dim](t)}dot(e){tt(e,this.dim);let t=0;for(let r=0;r<this.dim;++r)t+=this[r]*e[r];return t}normalize(){return this.div(this.magnitude)}pnorm(e){let t=0;for(let r=0;r<this.dim;++r)t+=Math.pow(Math.abs(this[r]),e);return Math.pow(t,1/e)}reflect(e){const t=e.normalize();return this.minus(t.times(2*this.dot(t)))}argmax(){const e=this.max();return this.reduce((t,r,n)=>r===e?t.concat([n]):t,[])}argmin(){const e=this.min();return this.reduce((t,r,n)=>r===e?t.concat([n]):t,[])}choose(e){if(!Array.isArray(e))throw new TypeError("Argument must be a list of indices.");if(!e.every(e=>e<this.dim&&nt(e.toString())))throw new RangeError("All elements of argument must be valid indices.");let t=[];return e.forEach(e=>t.push(this[e])),$e[t.length](t)}copy(){return $e[this.dim](this)}equals(e){return e.length===this.dim&&e.every((e,t)=>this[t]===e)}approximatelyEquals(e,t=1e-8){return e.length===this.dim&&e.every((e,r)=>Math.abs(this[r]-e)<t)}max(){return Math.max(...this)}min(){return Math.min(...this)}sum(){return this.reduce((e,t)=>e+t,0)}toArray(){return Array.from(this)}concat(...e){const t=super.concat.apply(this.toArray(),e);return $e[t.length](t)}filter(...e){const t=super.filter.apply(this.toArray(),e);return t.length>0?$e[t.length](t):t}map(...e){const t=super.map(...e);return t.every(e=>"Number"===it(e))?t:t.toArray()}slice(...e){const t=super.slice.apply(this.toArray(),e);return t.length>0?$e[t.length](t):t}splice(...e){let t=this.toArray();if(t.splice(...e),t.length!==this.dim)throw new Error("All removed elements must be replaced.");if(!t.every(e=>"Number"===it(e)))throw new TypeError("All elements must be numbers.");t.forEach((e,t)=>{this[t]=e})}toString(){return this.reduce((e,t,r)=>e+t+(r===this.dim-1?" ":", "),"[ ")+"]"}}const Je={set:function(e,t,r){if("length"===t)return!1;if(nt(t)){if(Number(t)>=e.dim)throw new RangeError("Vector may not have more elements than dimension.");if("Number"!==it(r))throw new TypeError("Vectors may only contain numbers.");return e[t]=r,!0}const n=et(t.toString());return!!(e.dim<=4&&n)&&(function(e,t,r,n){if(1===t.length){if("Number"!==it(n))throw new TypeError("Must set to a number");return void(e[r[t]]=n)}if(!Array.isArray(n))throw new TypeError("Right-hand side must be an array.");if(t.length!==n.length)throw new TypeError("Right-hand side must have matching length.");if(!n.every(e=>"Number"===it(e)))throw new TypeError("All new values must be numbers.");if(t.split("").some(t=>r[t]>=e.dim))return;let i=!0;for(let e=0,r={};e<t.length;++e){if(r.hasOwnProperty(t[e])){i=!1;break}r[t[e]]=!0}if(!i)throw new SyntaxError("Swizzle assignment does not allow symbols to be repeated.");t.split("").map(e=>r[e]).forEach((t,r)=>{e[t]=n[r]})}(e,t.toString(),n,r),!0)},get:function(e,t){const r=et(t.toString());return e.dim<=4&&r?function(e,t,r){const n=t.length;if(1===n)return e[r[t]];let i=t.split("").reduce((t,n)=>{let i=r[n];return t&&i<e.dim?t.concat([e[i]]):void 0},[]);return i?new $e[n](...i):void 0}(e,t,r):e[t]}};function Ke(e){if(!((e=Number(e))in $e)){if(isNaN(e))throw new TypeError("Dimension must be coercible to a number.");if(e<=0)throw new RangeError("Dimension must be positive.");if(!Number.isInteger(e))throw new RangeError("Dimension must be positive.");let t="vec"+e,r={[t]:class extends Ge{constructor(...t){if(1===t.length&&t[0]instanceof Ge){if(t[0].dim>e)throw new TypeError("Cannot demote vectors.");t=function(e,t){return[...Array(t)].map((t,r)=>r<e.length?e[r]:0)}(t[0].toArray(),e)}super(e,t),Reflect.defineProperty(this,"dim",{value:e,writable:!1,enumerable:!1})}}}[t];$e[e]=function(...e){let t=new r(...e);return Object.preventExtensions(t),new Proxy(t,Je)}}return $e[e]}const Ze=[{x:0,y:1,z:2,w:3},{r:0,g:1,b:2,a:3},{s:0,t:1,p:2,q:3}];function et(e){return Ze.find(t=>e.split("").every(e=>e in t))}function tt(e,t,r=!1){if(!(r&&"Number"===it(e)||e.length&&e.length===t))throw new TypeError(`Invalid argument. Input must have matching dimension${r?"or be a scalar":""}.`)}function rt(e){return e instanceof Array&&1===e.length&&e[0]instanceof Array?rt(e[0]):e}function nt(e){return!isNaN(e)&&Number(e).toString()===e&&Number.isInteger(Number(e))&&Number(e)>=0}function it(e){return Object.prototype.toString.call(e).slice(8,-1)}var ot={getVecType:Ke,isVec:function(e){return e instanceof Ge},vec2:$e[2],vec3:$e[3],vec4:$e[4],add:function(...e){const t=e[0].dim;if(!e.every(e=>e.dim===t))throw new TypeError("All vectors must have the same dimension.");return e.reduce((e,t)=>e.plus(t),$e[t]())},multiply:function(...e){const t=e[0].dim;if(!e.every(e=>e.dim===t))throw new TypeError("All vectors must have the same dimension.");return e.reduce((e,t)=>e.times(t),$e[t](1))},lerp:function(e,t,r){if(e.dim!==t.dim)throw new TypeError("Vectors must have the same dimension.");return r=r<0?0:r>1?1:r,e.plus(t.minus(e).times(r))},slerp:function(e,t,r){if(e.dim!==t.dim)throw new TypeError("Vectors must have the same dimension.");r=r<0?0:r>1?1:r;let n=e.normalize().dot(t.normalize());n=n<-1?-1:n>1?1:n;const i=Math.acos(n)*r,o=t.minus(e.times(n)).normalize(),s=e.magnitude+(t.magnitude-e.magnitude)*r;return e.times(Math.cos(i)).plus(o.times(Math.sin(i))).normalize().times(s)}};function st(e,t,r,n,i){return n+(e-t)*(i-n)/(r-t)}var lt=function(){return{enabled:Me(function(e){return e.hasSmoothScrollbar}),scroll:Me(function(e){return e.scroll}),scrollTo:Me(function(e){return e.scrollTo}),onScroll:Me(function(e){return e.onScroll})}};function at(t,r){var i=Qe(),s=lt(),l=s.scroll,a=s.onScroll,d=Me(function(e){return e.scaleMultiplier}),f=Me(function(e){return e.pageReflow}),p=Me(function(e){return e.debug}),v=c(function(){var e={rootMargin:"0%",threshold:0,autoUpdate:!0},t=r||{};return Object.keys(t).map(function(r,n){void 0!==t[r]&&(e[r]=t[r])}),e},[r]),m=v.autoUpdate,g=v.wrapper,w=function({threshold:t,delay:r,trackVisibility:n,rootMargin:i,root:o,triggerOnce:s,skip:l,initialInView:a,fallbackInView:c,onChange:u}={}){var h;const[d,f]=e.useState(null),p=e.useRef(),[v,m]=e.useState({inView:!!a,entry:void 0});p.current=u,e.useEffect(()=>{if(l||!d)return;let e=function(e,t,r={},n=undefined){if(void 0===window.IntersectionObserver&&void 0!==n){const i=e.getBoundingClientRect();return t(n,{isIntersecting:n,target:e,intersectionRatio:"number"==typeof r.threshold?r.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),()=>{}}const{id:i,observer:o,elements:s}=function(e){let t=function(e){return Object.keys(e).sort().filter(t=>void 0!==e[t]).map(t=>{return`${t}_${"root"===t?(r=e.root,r?(Ue.has(r)||(Ye+=1,Ue.set(r,Ye.toString())),Ue.get(r)):"0"):e[t]}`;var r}).toString()}(e),r=We.get(t);if(!r){const n=new Map;let i;const o=new IntersectionObserver(t=>{t.forEach(t=>{var r;const o=t.isIntersecting&&i.some(e=>t.intersectionRatio>=e);e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=o),null==(r=n.get(t.target))||r.forEach(e=>{e(o,t)})})},e);i=o.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:o,elements:n},We.set(t,r)}return r}(r);let l=s.get(e)||[];return s.has(e)||s.set(e,l),l.push(t),o.observe(e),function(){l.splice(l.indexOf(t),1),0===l.length&&(s.delete(e),o.unobserve(e)),0===s.size&&(o.disconnect(),We.delete(i))}}(d,(t,r)=>{m({inView:t,entry:r}),p.current&&p.current(t,r),r.isIntersecting&&s&&e&&(e(),e=void 0)},{root:o,rootMargin:i,threshold:t,trackVisibility:n,delay:r},c);return()=>{e&&e()}},[Array.isArray(t)?t.toString():t,d,o,i,s,l,n,c,r]);const g=null==(h=v.entry)?void 0:h.target;e.useEffect(()=>{d||!g||s||l||m({inView:!!a,entry:void 0})},[d,g,s,l,a]);const w=[f,v.inView,v.entry];return w.ref=w[0],w.inView=w[1],w.entry=w[2],w}({rootMargin:v.rootMargin,threshold:v.threshold}),y=w.ref,b=w.inView;Re(function(){y(t.current)},[t,t.current]);var S=u(ot.vec3(0,0,0)),E=S[0],T=S[1],x=o({inViewport:!1,progress:-1,visibility:-1,viewport:-1}).current,O=o({top:0,bottom:0,left:0,right:0,width:0,height:0}).current,R=u(O),z=R[0],A=R[1],k=o({top:0,bottom:0,left:0,right:0,width:0,height:0,x:0,y:0,positiveYUpBottom:0}).current,C=o(ot.vec3(0,0,0)).current;Re(function(){var e,r=null==(e=t.current)?void 0:e.getBoundingClientRect();if(r){var n=g?g.scrollTop:window.scrollY,o=g?g.scrollLeft:window.scrollX;O.top=r.top+n,O.bottom=r.bottom+n,O.left=r.left+o,O.right=r.right+o,O.width=r.width,O.height=r.height,A(M({},O)),T(ot.vec3((null==O?void 0:O.width)*d,(null==O?void 0:O.height)*d,1)),p&&console.log("useTracker.getBoundingClientRect:",O,"intialScroll:",{initialY:n,initialX:o},"size:",i,"pageReflow:",f)}},[t,i,f,d,p]);var L=h(function(e){var r=void 0===e?{}:e,n=r.onlyUpdateInViewport;if(t.current&&(void 0===n||!n||x.inViewport)){var o=r.scroll||l;!function(e,t,r,n){e.top=t.top-(r.y||0),e.bottom=t.bottom-(r.y||0),e.left=t.left-(r.x||0),e.right=t.right-(r.x||0),e.width=t.width,e.height=t.height,e.x=e.left+.5*t.width-.5*n.width,e.y=e.top+.5*t.height-.5*n.height,e.positiveYUpBottom=n.height-e.bottom}(k,O,o,i),function(e,t,r){e.x=t.x*r,e.y=-1*t.y*r}(C,k,d);var s="horizontal"===o.scrollDirection,a=s?"width":"height",c=i[a]-k[s?"left":"top"];x.progress=st(c,0,i[a]+k[a],0,1),x.visibility=st(c,0,k[a],0,1),x.viewport=st(c,0,i[a],0,1)}},[t,i,d,l]);return Re(function(){x.inViewport=b,L({onlyUpdateInViewport:!1}),p&&console.log("useTracker.inViewport:",b,"update()")},[b]),Re(function(){L({onlyUpdateInViewport:!1}),p&&console.log("useTracker.update on resize/reflow")},[L,f]),n(function(){if(m)return a(function(e){return L({onlyUpdateInViewport:!0})})},[m,L,a]),{rect:z,bounds:k,scale:E,position:C,scrollState:x,inViewport:b,update:L}}var ct=["track","children","margin","inViewportMargin","inViewportThreshold","visible","hideOffscreen","scissor","debug","as","priority"],ut=d(function(e){var r=e.track,n=e.children,i=e.margin,o=void 0===i?0:i,s=e.inViewportMargin,l=e.inViewportThreshold,a=e.visible,c=void 0===a||a,d=e.hideOffscreen,f=void 0===d||d,p=e.scissor,m=void 0!==p&&p,g=e.debug,w=void 0!==g&&g,y=e.as,b=void 0===y?"scene":y,S=e.priority,E=void 0===S?Ae.PRIORITY_SCISSORS:S,T=k(e,ct),R=h(function(e){null!==e&&C(e)},[]),z=u(m?new v:null),A=z[0],C=z[1],L=Ne(),I=L.requestRender,_=L.renderScissor,V=Me(function(e){return e.globalRender}),j=at(r,{rootMargin:s,threshold:l}),B=j.bounds,F=j.scale,P=j.position,N=j.scrollState,D=j.inViewport;Re(function(){A&&(A.visible=f?D&&c:c)},[A,D,f,c]),x(function(e){var t=e.gl,r=e.camera;A&&A.visible&&(A.position.y=P.y,A.position.x=P.x,m?_({gl:t,scene:A,camera:r,left:B.left-o,top:B.positiveYUpBottom-o,width:B.width+2*o,height:B.height+2*o}):I())},V?E:void 0);var W=t.createElement(t.Fragment,null,(!n||w)&&F&&t.createElement(De,{scale:F}),n&&A&&F&&n(M({track:r,margin:o,scale:F,scrollState:N,inViewport:D,priority:E},T))),U=b;return m&&A?O(W,A):t.createElement(U,{ref:R},W)}),ht=["track","children","margin","visible","hideOffscreen","debug","orthographic","priority","inViewport","bounds","scale","scrollState","camera","hud"],dt=["track","margin","inViewportMargin","inViewportThreshold","priority"],ft=["bounds"],pt=function(e){var r=e.track,i=e.children,o=e.margin,s=void 0===o?0:o,l=e.visible,a=void 0===l||l,c=e.hideOffscreen,u=void 0===c||c,h=e.debug,d=void 0!==h&&h,f=e.orthographic,p=void 0!==f&&f,v=e.priority,m=void 0===v?Ae.PRIORITY_VIEWPORTS:v,g=e.inViewport,w=e.bounds,y=e.scale,b=e.scrollState,S=e.camera,T=e.hud,O=k(e,ht),R=E(function(e){return e.scene}),z=E(function(e){return e.get}),A=E(function(e){return e.setEvents}),C=Ne().renderViewport;return Re(function(){R.visible=u?g&&a:a},[g,u,a]),n(function(){var e=z().events.connected;return A({connected:r.current}),function(){return A({connected:e})}},[]),x(function(e){var t=e.scene;t.visible&&C({gl:e.gl,scene:t,camera:e.camera,left:w.left-s,top:w.positiveYUpBottom-s,width:w.width+2*s,height:w.height+2*s,clearDepth:!!T})},m),t.createElement(t.Fragment,null,!p&&t.createElement(Ce,M({manual:!0,margin:s,makeDefault:!0},S)),p&&t.createElement(Ie,M({manual:!0,margin:s,makeDefault:!0},S)),(!i||d)&&y&&t.createElement(De,{scale:y}),i&&y&&i(M({track:r,margin:s,scale:y,scrollState:b,inViewport:g,priority:m},O)))};d(function(e){var r=e.track,n=e.margin,i=void 0===n?0:n,o=e.inViewportMargin,s=e.inViewportThreshold,l=e.priority,a=k(e,dt),c=u(function(){return new v})[0],d=at(r,{rootMargin:o,threshold:s}),f=d.bounds,p=k(d,ft),m=h(function(e,t){r.current&&e.target===r.current&&(t.pointer.set((e.clientX-f.left+i)/(f.width+2*i)*2-1,-(e.clientY-f.top+i)/(f.height+2*i)*2+1),t.raycaster.setFromCamera(t.pointer,t.camera))},[f]);return f&&O(t.createElement(pt,M({track:r,bounds:f,priority:l,margin:i},a,p)),c,{events:{compute:m,priority:l},size:{width:f.width,height:f.height}})});var vt=["children","id","dispose"];function mt(e,t,r=((e,t)=>e===t)){if(e===t)return!0;if(!e||!t)return!1;const n=e.length;if(t.length!==n)return!1;for(let i=0;i<n;i++)if(!r(e[i],t[i]))return!1;return!0}l(function(e,t){var r=e.children,i=e.id,o=e.dispose,s=void 0===o||o,l=k(e,vt);return r?(function(e,t,r){void 0===t&&(t={});var i=void 0===r?{}:r,o=i.key,s=i.dispose,l=void 0===s||s,a=Me(function(e){return e.updateCanvas}),u=Me(function(e){return e.renderToCanvas}),d=Me(function(e){return e.removeFromCanvas}),f=c(function(){return o||m.generateUUID()},[]);Re(function(){u(f,e,{inactive:!1})},[f]),n(function(){return function(){d(f,l)}},[f]);var p=h(function(e){a(f,e)},[a,f]);n(function(){p(t)},[].concat(Object.values(t)))}(r,M({},l,{ref:t}),{key:i,dispose:s}),null):null});const gt=[];var wt=new Promise(e=>{const t=new Image;t.addEventListener("error",()=>e(!1)),t.addEventListener("load",()=>e(1===t.width)),t.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA="}).catch(()=>!1),yt=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(i=n;0!=i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(i=n;0!=i--;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;0!=i--;){var s=o[i];if(!e(t[s],r[s]))return!1}return!0}return t!=t&&r!=r},bt=!1;function St(){return St=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},St.apply(this,arguments)}function Et(e,t,r){return Math.max(e,Math.min(t,r))}wt.then(function(e){bt=e});class Tt{advance(e){var t;if(!this.isRunning)return;let r=!1;if(this.lerp)this.value=(1-(n=this.lerp))*this.value+n*this.to,Math.round(this.value)===this.to&&(this.value=this.to,r=!0);else{this.currentTime+=e;const t=Et(0,this.currentTime/this.duration,1);r=t>=1;const n=r?1:this.easing(t);this.value=this.from+(this.to-this.from)*n}var n;null==(t=this.onUpdate)||t.call(this,this.value,{completed:r}),r&&this.stop()}stop(){this.isRunning=!1}fromTo(e,t,{lerp:r=.1,duration:n=1,easing:i=(e=>e),onUpdate:o}){this.from=this.value=e,this.to=t,this.lerp=r,this.duration=n,this.easing=i,this.currentTime=0,this.isRunning=!0,this.onUpdate=o}}function xt(e,t){let r;return function(){let n=arguments,i=this;clearTimeout(r),r=setTimeout(function(){e.apply(i,n)},t)}}class Ot{constructor(e,t){this.onWindowResize=()=>{this.width=window.innerWidth,this.height=window.innerHeight},this.onWrapperResize=()=>{this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight},this.onContentResize=()=>{const e=this.wrapper===window?document.documentElement:this.wrapper;this.scrollHeight=e.scrollHeight,this.scrollWidth=e.scrollWidth},this.wrapper=e,this.content=t,this.wrapper===window?(window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize()):(this.wrapperResizeObserver=new ResizeObserver(xt(this.onWrapperResize,100)),this.wrapperResizeObserver.observe(this.wrapper),this.onWrapperResize()),this.contentResizeObserver=new ResizeObserver(xt(this.onContentResize,100)),this.contentResizeObserver.observe(this.content),this.onContentResize()}destroy(){var e,t;window.removeEventListener("resize",this.onWindowResize,!1),null==(e=this.wrapperResizeObserver)||e.disconnect(),null==(t=this.contentResizeObserver)||t.disconnect()}get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}}let Rt=()=>({events:{},emit(e,...t){let r=this.events[e]||[];for(let e=0,n=r.length;e<n;e++)r[e](...t)},on(e,t){var r;return(null==(r=this.events[e])?void 0:r.push(t))||(this.events[e]=[t]),()=>{var r;this.events[e]=null==(r=this.events[e])?void 0:r.filter(e=>t!==e)}}});class zt{constructor(e,{wheelMultiplier:t=1,touchMultiplier:r=2,normalizeWheel:n=!1}){this.onTouchStart=e=>{const{clientX:t,clientY:r}=e.targetTouches?e.targetTouches[0]:e;this.touchStart.x=t,this.touchStart.y=r,this.lastDelta={x:0,y:0}},this.onTouchMove=e=>{const{clientX:t,clientY:r}=e.targetTouches?e.targetTouches[0]:e,n=-(t-this.touchStart.x)*this.touchMultiplier,i=-(r-this.touchStart.y)*this.touchMultiplier;this.touchStart.x=t,this.touchStart.y=r,this.lastDelta={x:n,y:i},this.emitter.emit("scroll",{type:"touch",deltaX:n,deltaY:i,event:e})},this.onTouchEnd=e=>{this.emitter.emit("scroll",{type:"touch",inertia:!0,deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:e})},this.onWheel=e=>{let{deltaX:t,deltaY:r}=e;this.normalizeWheel&&(t=Et(-100,t,100),r=Et(-100,r,100)),t*=this.wheelMultiplier,r*=this.wheelMultiplier,this.emitter.emit("scroll",{type:"wheel",deltaX:t,deltaY:r,event:e})},this.element=e,this.wheelMultiplier=t,this.touchMultiplier=r,this.normalizeWheel=n,this.touchStart={x:null,y:null},this.emitter=Rt(),this.element.addEventListener("wheel",this.onWheel,{passive:!1}),this.element.addEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.addEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.addEventListener("touchend",this.onTouchEnd,{passive:!1})}on(e,t){return this.emitter.on(e,t)}destroy(){this.emitter.events={},this.element.removeEventListener("wheel",this.onWheel,{passive:!1}),this.element.removeEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.removeEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.removeEventListener("touchend",this.onTouchEnd,{passive:!1})}}class At{constructor({direction:e,gestureDirection:t,mouseMultiplier:r,smooth:n,wrapper:i=window,content:o=document.documentElement,wheelEventsTarget:s=i,smoothWheel:l=null==n||n,smoothTouch:a=!1,syncTouch:c=!1,syncTouchLerp:u=.1,touchInertiaMultiplier:h=35,duration:d,easing:f=(e=>Math.min(1,1.001-Math.pow(2,-10*e))),lerp:p=(d?null:.1),infinite:v=!1,orientation:m=(null!=e?e:"vertical"),gestureOrientation:g=(null!=t?t:"vertical"),touchMultiplier:w=1,wheelMultiplier:y=(null!=r?r:1),normalizeWheel:b=!1}={}){this.onVirtualScroll=({type:e,inertia:t,deltaX:r,deltaY:n,event:i})=>{if(i.ctrlKey)return;const o="touch"===e,s="wheel"===e;if("vertical"===this.options.gestureOrientation&&0===n||"horizontal"===this.options.gestureOrientation&&0===r||o&&"vertical"===this.options.gestureOrientation&&0===this.scroll&&!this.options.infinite&&n<=0)return;if(i.composedPath().find(e=>null==e||null==e.hasAttribute?void 0:e.hasAttribute("data-lenis-prevent")))return;if(this.isStopped||this.isLocked)return void i.preventDefault();if(this.isSmooth=(this.options.smoothTouch||this.options.syncTouch)&&o||this.options.smoothWheel&&s,!this.isSmooth)return this.isScrolling=!1,void this.animate.stop();i.preventDefault();let l=n;"both"===this.options.gestureOrientation?l=Math.abs(n)>Math.abs(r)?n:r:"horizontal"===this.options.gestureOrientation&&(l=r);const a=o&&this.options.syncTouch,c=o&&t&&Math.abs(l)>1;c&&(l=this.velocity*this.options.touchInertiaMultiplier),this.scrollTo(this.targetScroll+l,St({programmatic:!1},a&&{lerp:c?this.syncTouchLerp:.4}))},this.onScroll=()=>{if(!this.isScrolling){const e=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.direction=Math.sign(this.animatedScroll-e),this.emit()}},e&&console.warn("Lenis: `direction` option is deprecated, use `orientation` instead"),t&&console.warn("Lenis: `gestureDirection` option is deprecated, use `gestureOrientation` instead"),r&&console.warn("Lenis: `mouseMultiplier` option is deprecated, use `wheelMultiplier` instead"),n&&console.warn("Lenis: `smooth` option is deprecated, use `smoothWheel` instead"),window.lenisVersion="1.0.10",i!==document.documentElement&&i!==document.body||(i=window),this.options={wrapper:i,content:o,wheelEventsTarget:s,smoothWheel:l,smoothTouch:a,syncTouch:c,syncTouchLerp:u,touchInertiaMultiplier:h,duration:d,easing:f,lerp:p,infinite:v,gestureOrientation:g,orientation:m,touchMultiplier:w,wheelMultiplier:y,normalizeWheel:b},this.dimensions=new Ot(i,o),this.rootElement.classList.add("lenis"),this.velocity=0,this.isStopped=!1,this.isSmooth=l||a,this.isScrolling=!1,this.targetScroll=this.animatedScroll=this.actualScroll,this.animate=new Tt,this.emitter=Rt(),this.options.wrapper.addEventListener("scroll",this.onScroll,{passive:!1}),this.virtualScroll=new zt(s,{touchMultiplier:w,wheelMultiplier:y,normalizeWheel:b}),this.virtualScroll.on("scroll",this.onVirtualScroll)}destroy(){this.emitter.events={},this.options.wrapper.removeEventListener("scroll",this.onScroll,{passive:!1}),this.virtualScroll.destroy()}on(e,t){return this.emitter.on(e,t)}off(e,t){var r;this.emitter.events[e]=null==(r=this.emitter.events[e])?void 0:r.filter(e=>t!==e)}setScroll(e){this.isHorizontal?this.rootElement.scrollLeft=e:this.rootElement.scrollTop=e}emit(){this.emitter.emit("scroll",this)}reset(){this.isLocked=!1,this.isScrolling=!1,this.velocity=0,this.animate.stop()}start(){this.isStopped=!1,this.reset()}stop(){this.isStopped=!0,this.animate.stop(),this.reset()}raf(e){const t=e-(this.time||e);this.time=e,this.animate.advance(.001*t)}scrollTo(e,{offset:t=0,immediate:r=!1,lock:n=!1,duration:i=this.options.duration,easing:o=this.options.easing,lerp:s=!i&&this.options.lerp,onComplete:l=null,force:a=!1,programmatic:c=!0}={}){if(!this.isStopped||a){if(["top","left","start"].includes(e))e=0;else if(["bottom","right","end"].includes(e))e=this.limit;else{var u;let r;if("string"==typeof e?r=document.querySelector(e):null!=(u=e)&&u.nodeType&&(r=e),r){if(this.options.wrapper!==window){const e=this.options.wrapper.getBoundingClientRect();t-=this.isHorizontal?e.left:e.top}const n=r.getBoundingClientRect();e=(this.isHorizontal?n.left:n.top)+this.animatedScroll}}if("number"==typeof e){if(e+=t,this.options.infinite?c&&(this.targetScroll=this.animatedScroll=this.scroll):e=Et(0,e,this.limit),r)return this.animatedScroll=this.targetScroll=e,this.setScroll(this.scroll),this.reset(),this.emit(),void(null==l||l());if(!c){if(e===this.targetScroll)return;this.targetScroll=e}this.animate.fromTo(this.animatedScroll,e,{duration:i,easing:o,lerp:s,onUpdate:(e,{completed:t})=>{n&&(this.isLocked=!0),this.isScrolling=!0,this.velocity=e-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=e,this.setScroll(this.scroll),c&&(this.targetScroll=e),t&&(n&&(this.isLocked=!1),requestAnimationFrame(()=>{this.isScrolling=!1}),this.velocity=0,null==l||l()),this.emit()}})}}}get rootElement(){return this.options.wrapper===window?this.options.content:this.options.wrapper}get limit(){return this.isHorizontal?this.dimensions.limit.x:this.dimensions.limit.y}get isHorizontal(){return"horizontal"===this.options.orientation}get actualScroll(){return this.isHorizontal?this.rootElement.scrollLeft:this.rootElement.scrollTop}get scroll(){return this.options.infinite?function(e,t){let r=e%t;return(t>0&&r<0||t<0&&r>0)&&(r+=t),r}(this.animatedScroll,this.limit):this.animatedScroll}get progress(){return 0===this.limit?1:this.scroll/this.limit}get isSmooth(){return this.__isSmooth}set isSmooth(e){this.__isSmooth!==e&&(this.rootElement.classList.toggle("lenis-smooth",e),this.__isSmooth=e)}get isScrolling(){return this.__isScrolling}set isScrolling(e){this.__isScrolling!==e&&(this.rootElement.classList.toggle("lenis-scrolling",e),this.__isScrolling=e)}get isStopped(){return this.__isStopped}set isStopped(e){this.__isStopped!==e&&(this.rootElement.classList.toggle("lenis-stopped",e),this.__isStopped=e)}}var Mt=l(function(e,t){var r=e.children,i=e.enabled,s=void 0===i||i,l=e.locked,c=void 0!==l&&l,u=e.scrollRestoration,d=void 0===u?"auto":u,f=e.disablePointerOnScroll,p=void 0===f||f,v=e.horizontal,m=void 0!==v&&v,g=e.scrollInContainer,w=void 0!==g&&g,y=e.updateGlobalState,b=void 0===y||y,S=e.onScroll,E=e.config,T=void 0===E?{}:E,x=e.invalidate,O=void 0===x?function(){}:x,R=e.addEffect,z=o(),A=o(),k=o(!1),C=Me(function(e){return e.scroll});a(t,function(){return{start:function(){var e;return null==(e=A.current)?void 0:e.start()},stop:function(){var e;return null==(e=A.current)?void 0:e.stop()},on:function(e,t){var r;return null==(r=A.current)?void 0:r.on(e,t)},notify:function(){var e;return null==(e=A.current)?void 0:e.emit()},emit:function(){var e;return null==(e=A.current)?void 0:e.emit()},scrollTo:function(e,t){var r;return null==(r=A.current)?void 0:r.scrollTo(e,t)},raf:function(e){var t;return null==(t=A.current)?void 0:t.raf(e)},__lenis:A.current}});var L=h(function(e){p&&z.current&&k.current!==e&&(k.current=e,z.current.style.pointerEvents=e?"none":"auto")},[p,z,k]);return Re(function(){"scrollRestoration"in window.history&&(window.history.scrollRestoration=d)},[]),Re(function(){var e,t,r=document.documentElement,n=document.body,i=document.body.firstElementChild;return r.classList.toggle("ScrollRig-scrollHtml",w),n.classList.toggle("ScrollRig-scrollWrapper",w),w&&Object.assign(T,{smoothTouch:!0,wrapper:n,content:i}),A.current=new At(M({orientation:m?"horizontal":"vertical"},T)),R?e=R(function(e){var t;return null==(t=A.current)?void 0:t.raf(e)}):(t=requestAnimationFrame(function e(r){var n;null==(n=A.current)||n.raf(r),t=requestAnimationFrame(e)}),e=function(){return cancelAnimationFrame(t)}),function(){var t;e(),null==(t=A.current)||t.destroy()}},[]),Re(function(){var e,t,r=function(e){var t=e.scroll,r=e.limit,n=e.velocity,i=e.direction,o=e.progress,s=m?t:0;b&&(C.y=m?0:t,C.x=s,C.limit=r,C.velocity=n,C.direction=i,C.progress=o||0),Math.abs(n)>1.5&&L(!0),Math.abs(n)<1&&L(!1),S&&S({scroll:t,limit:r,velocity:n,direction:i,progress:o}),O()};return null==(e=A.current)||e.on("scroll",r),b&&(C.scrollDirection=m?"horizontal":"vertical",Me.setState({scrollTo:function(){var e;null==(e=A.current)||e.scrollTo.apply(e,[].slice.call(arguments))},onScroll:function(e){var t,r;return null==(t=A.current)||t.on("scroll",e),null==(r=A.current)||r.emit(),function(){var t;return null==(t=A.current)?void 0:t.off("scroll",e)}}}),Me.getState().scroll.y=window.scrollY,Me.getState().scroll.x=window.scrollX),null==(t=A.current)||t.emit(),function(){var e;null==(e=A.current)||e.off("scroll",r),Me.setState({onScroll:function(){return function(){}},scrollTo:function(){}})}},[]),Re(function(){var e=function(){return O()},t=function(){return L(!1)};return window.addEventListener("pointermove",t),window.addEventListener("pointerdown",t),window.addEventListener("wheel",e),function(){window.removeEventListener("pointermove",t),window.removeEventListener("pointerdown",t),window.removeEventListener("wheel",e)}},[]),n(function(){b&&(document.documentElement.classList.toggle("js-smooth-scrollbar-enabled",s),document.documentElement.classList.toggle("js-smooth-scrollbar-disabled",!s),Me.setState({hasSmoothScrollbar:s}))},[s]),n(function(){var e,t;c?null==(e=A.current)||e.stop():null==(t=A.current)||t.start()},[c]),r({ref:z})});l(function(e,r){return t.createElement(Mt,M({ref:r,invalidate:T,addEffect:z},e))});var kt=["el","children","material","scale","font","fontOffsetY","fontOffsetX","overrideEmissive","color"],Ct=function(e){var r=e.el,i=e.children,o=e.material,s=e.scale,l=e.font,a=e.fontOffsetY,u=void 0===a?0:a,h=e.fontOffsetX,d=void 0===h?0:h,f=e.overrideEmissive,v=void 0!==f&&f,m=e.color,g=k(e,kt),w=E().size,y=Ne().scaleMultiplier,b=c(function(){if(!r.current)return{};var e=window.getComputedStyle(r.current);return{letterSpacing:(parseFloat(e.letterSpacing)||0)/parseFloat(e.fontSize),lineHeight:(parseFloat(e.lineHeight)||0)/parseFloat(e.fontSize),textColor:new p(m||e.color).convertSRGBToLinear(),fontSize:parseFloat(e.fontSize)*y,textAlign:e.textAlign}},[r,w,s,m,y]),S=b.textColor,T=b.fontSize,x=b.textAlign,O=b.lineHeight,R=b.letterSpacing;n(function(){o&&v&&(o.emissive=m)},[o,m,v]);var z=0;return"left"===x||"start"===x?z=-.5*s[0]:"right"!==x&&"end"!==x||(z=.5*s[0]),t.createElement(A,M({fontSize:T,maxWidth:s?s[0]:w.width,lineHeight:O,textAlign:x,letterSpacing:R,overflowWrap:"break-word",font:l,color:S,anchorX:x,anchorY:"top",position:[z+T*d,(s?.5*s[1]:.5*w.height)+T*u,0],material:o},g),i)},Lt=["el","scale","scrollState","vertexShader","fragmentShader","invalidateFrameLoop","widthSegments","heightSegments"],It=l(function(e,r){var i=e.el,s=e.scale,l=e.scrollState,h=e.vertexShader,d=e.fragmentShader,v=e.invalidateFrameLoop,m=void 0!==v&&v,T=e.widthSegments,O=void 0===T?128:T,z=e.heightSegments,A=void 0===z?128:z,C=k(e,Lt),L=o(null),I=o(null);a(r,function(){return I.current});var _=E(),V=_.invalidate,j=_.gl,B=_.size,F=E(function(e){return e.viewport.dpr}),P=lt().scroll,N=Ne().scaleMultiplier,D=function(e,t){var r,i,o={},s=o.initTexture,l=void 0===s||s,a=o.premultiplyAlpha,h=void 0===a?"default":a,d=E(function(e){return e.gl}),f=Qe(),p=Me(function(e){return e.debug}),v=u(null==(r=e.current)?void 0:r.currentSrc),m=v[0],T=v[1];n(function(){var t=e.current,r=function(){var t;T(null==(t=e.current)?void 0:t.currentSrc)};return null==t||t.addEventListener("load",r),function(){return null==t?void 0:t.removeEventListener("load",r)}},[e,m,T]);var x,O,z,A=function(e,t,r=!1,n={}){for(const e of gt)if(mt(t,e.keys,e.equal)){if(r)return;if(Object.prototype.hasOwnProperty.call(e,"error"))throw e.error;if(Object.prototype.hasOwnProperty.call(e,"response"))return e.response;if(!r)throw e.promise}const i={keys:t,equal:n.equal,promise:e(...t).then(e=>i.response=e).then(()=>{n.lifespan&&n.lifespan>0&&setTimeout(()=>{const e=gt.indexOf(i);-1!==e&&gt.splice(e,1)},n.lifespan)}).catch(e=>i.error=e)};if(gt.push(i),!r)throw i.promise}(function(){return S.itemStart("waiting for DOM image"),new Promise(function(t){var r=e.current;function n(){t(null==r?void 0:r.currentSrc),S.itemEnd("waiting for DOM image")}null==r||r.addEventListener("load",n,{once:!0}),null!=r&&r.complete&&(null==r||r.removeEventListener("load",n),n())})},[e,f,null==(i=e.current)?void 0:i.currentSrc,m],!1,{equal:yt}),M=(x=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),z=(O=navigator.userAgent.indexOf("Firefox")>-1)?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1,"undefined"==typeof createImageBitmap||x||O&&z<98?g:w),k=R(M,A,function(e){e instanceof w&&(e.setOptions({colorSpaceConversion:"none",premultiplyAlpha:h,imageOrientation:"flipY"}),e.setRequestHeader({Accept:(bt?"image/webp,":"")+"*/*"}))}),C=c(function(){return k instanceof y?k:k instanceof ImageBitmap?new b(k):void 0},[k]);return n(function(){l&&d.initTexture(C),p&&console.log("useImageAsTexture","initTexture()")},[d,C,l]),C}(i),W=c(function(){return{u_color:{value:new p("black")},u_time:{value:0},u_pixelRatio:{value:F},u_progress:{value:0},u_visibility:{value:0},u_viewport:{value:0},u_velocity:{value:0},u_res:{value:new f},u_rect:{value:new f},u_size:{value:new f},u_texture:{value:null},u_loaded:{value:!1},u_scaleMultiplier:{value:N}}},[F]);n(function(){D&&L.current&&(L.current.uniforms.u_texture.value=D,L.current.uniforms.u_size.value.set(D.image.width,D.image.height),L.current.uniforms.u_loaded.value=!0)},[D,j]),n(function(){L.current&&(L.current.uniforms.u_res.value.set(B.width,B.height),L.current.uniforms.u_rect.value.set(null==s?void 0:s[0],null==s?void 0:s[1]))},[B,s]),x(function(e,t){l.inViewport&&I.current&&L.current&&L.current.uniforms.u_loaded.value&&(L.current.uniforms.u_time.value+=t,L.current.uniforms.u_rect.value.set(I.current.scale.x,I.current.scale.y),L.current.uniforms.u_velocity.value=P.velocity,L.current.uniforms.u_progress.value=l.progress,L.current.uniforms.u_visibility.value=l.visibility,L.current.uniforms.u_viewport.value=l.viewport,m&&V())});var U=c(function(){return[{vertexShader:h,fragmentShader:d}]},[h,d]);return t.createElement(t.Fragment,null,t.createElement("mesh",M({ref:I},C),t.createElement("planeGeometry",{attach:"geometry",args:[1,1,O,A]}),t.createElement("shaderMaterial",{ref:L,args:U,transparent:!0,uniforms:W})))}),_t=["children","speed"],Vt=function(e){var r=e.children,n=e.scrollState,i=e.parallax,s=o(null),l=E(function(e){return e.size}),a=Ne().scaleMultiplier;return x(function(){n.inViewport&&(s.current.position.y=i*(2*n.progress-1)*a*l.height)}),t.createElement("mesh",{ref:s},r)},jt=function(e){var r=e.children,n=e.speed,i=void 0===n?1:n,o=k(e,_t),s=i-1;return t.createElement(ut,M({scissor:!1,inViewportMargin:200*Math.max(0,.5)+50+"%"},o),function(e){return t.createElement(Vt,M({parallax:s},e),r(e))})},Bt=["scale"],Ft=["children","track","stickyLerp","fillViewport"],Pt=function(e){var r=e.children,n=e.childTop,i=e.childBottom,s=e.scrollState,l=e.parentScale,a=e.childScale,c=e.scaleMultiplier,u=e.priority,h=e.stickyLerp,d=void 0===h?1:h,f=o(null),p=E(function(e){return e.size});return x(function(e,t){if(s.inViewport){var r=.5*l[1]-.5*a[1];f.current.position.y=function(e,t,r,n,i=60){return function(e,t,r){return e*(1-r)+t*r}(e,t,void 0===n?r:1-Math.pow(1-r,n/(1/i)))}(f.current.position.y,s.viewport+n/p.height*c<1?r:s.visibility-i/l[1]*c<1?-n+r-(s.viewport-1)*p.height*c:.5*-l[1]+.5*a[1],d,t)}},u),t.createElement("group",{ref:f},r)},Nt=function(e){var r=e.children,n=e.track,i=e.stickyLerp,s=e.fillViewport,l=k(e,Ft),a=E(function(e){return e.size}),u=Ne().scaleMultiplier,h=o(n.current),d=c(function(){var e=getComputedStyle(n.current);return"sticky"===e.position?h.current=n.current.parentElement:console.error("StickyScrollScene: tracked element is not position:sticky"),e},[n]);return t.createElement(ut,M({track:h},l),function(e,r,n,i,o){var s=o.stickyLerp,l=o.fillViewport;return function(o){var a=o.scale,c=k(o,Bt),u=ot.vec3(parseFloat(n.width),parseFloat(n.height),1),h=parseFloat(n.top),d=r.height-h-u[1];return l&&(u=ot.vec3(r.width,r.height,1),h=0,d=0),t.createElement(Pt,M({parentScale:a,childScale:u.times(i),stickyLerp:s,childTop:h,childBottom:d,scaleMultiplier:i},c),e(M({scale:u.times(i)},c)))}}(r,a,d,u,{stickyLerp:i,fillViewport:s}))};export{jt as ParallaxScrollScene,Nt as StickyScrollScene,It as WebGLImage,Ct as WebGLText};
//# sourceMappingURL=powerups.module.js.map
