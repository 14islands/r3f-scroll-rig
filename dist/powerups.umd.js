!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("three"),require("@react-three/fiber"),require("@react-three/drei")):"function"==typeof define&&define.amd?define(["exports","react","three","@react-three/fiber","@react-three/drei"],t):t((e||self).r3FScrollRig={},e.React,e.three,e["@react-three/fiber"],e["@react-three/drei"])}(this,function(e,t,r,n,i){function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function s(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,t}var a=/*#__PURE__*/o(t),l=/*#__PURE__*/s(t);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(this,arguments)}function c(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)t.indexOf(r=o[n])>=0||(i[r]=e[r]);return i}function h(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}var d,f=[],p="ResizeObserver loop completed with undelivered notifications.";!function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(d||(d={}));var m,v=function(e){return Object.freeze(e)},g=function(e,t){this.inlineSize=e,this.blockSize=t,v(this)},w=function(){function e(e,t,r,n){return this.x=e,this.y=t,this.width=r,this.height=n,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,v(this)}return e.prototype.toJSON=function(){var e=this;return{x:e.x,y:e.y,top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),y=function(e){return e instanceof SVGElement&&"getBBox"in e},b=function(e){if(y(e)){var t=e.getBBox();return!t.width&&!t.height}return!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S=function(e){var t;if(e instanceof Element)return!0;var r=null===(t=null==e?void 0:e.ownerDocument)||void 0===t?void 0:t.defaultView;return!!(r&&e instanceof r.Element)},E="undefined"!=typeof window?window:{},T=new WeakMap,R=/auto|scroll/,x=/^tb|vertical/,O=/msie|trident/i.test(E.navigator&&E.navigator.userAgent),M=function(e){return parseFloat(e||"0")},z=function(e,t,r){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=!1),new g((r?t:e)||0,(r?e:t)||0)},A=v({devicePixelContentBoxSize:z(),borderBoxSize:z(),contentBoxSize:z(),contentRect:new w(0,0,0,0)}),k=function(e,t){if(void 0===t&&(t=!1),T.has(e)&&!t)return T.get(e);if(b(e))return T.set(e,A),A;var r=getComputedStyle(e),n=y(e)&&e.ownerSVGElement&&e.getBBox(),i=!O&&"border-box"===r.boxSizing,o=x.test(r.writingMode||""),s=!n&&R.test(r.overflowY||""),a=!n&&R.test(r.overflowX||""),l=n?0:M(r.paddingTop),u=n?0:M(r.paddingRight),c=n?0:M(r.paddingBottom),h=n?0:M(r.paddingLeft),d=n?0:M(r.borderTopWidth),f=n?0:M(r.borderRightWidth),p=n?0:M(r.borderBottomWidth),m=h+u,g=l+c,S=(n?0:M(r.borderLeftWidth))+f,E=d+p,k=a?e.offsetHeight-E-e.clientHeight:0,C=s?e.offsetWidth-S-e.clientWidth:0,L=i?m+S:0,I=i?g+E:0,j=n?n.width:M(r.width)-L-C,V=n?n.height:M(r.height)-I-k,_=j+m+C+S,F=V+g+k+E,B=v({devicePixelContentBoxSize:z(Math.round(j*devicePixelRatio),Math.round(V*devicePixelRatio),o),borderBoxSize:z(_,F,o),contentBoxSize:z(j,V,o),contentRect:new w(h,l,j,V)});return T.set(e,B),B},C=function(e,t,r){var n=k(e,r),i=n.borderBoxSize,o=n.contentBoxSize,s=n.devicePixelContentBoxSize;switch(t){case d.DEVICE_PIXEL_CONTENT_BOX:return s;case d.BORDER_BOX:return i;default:return o}},L=function(e){var t=k(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=v([t.borderBoxSize]),this.contentBoxSize=v([t.contentBoxSize]),this.devicePixelContentBoxSize=v([t.devicePixelContentBoxSize])},I=function(e){if(b(e))return Infinity;for(var t=0,r=e.parentNode;r;)t+=1,r=r.parentNode;return t},j=function(){var e=Infinity,t=[];f.forEach(function(r){if(0!==r.activeTargets.length){var n=[];r.activeTargets.forEach(function(t){var r=new L(t.target),i=I(t.target);n.push(r),t.lastReportedSize=C(t.target,t.observedBox),i<e&&(e=i)}),t.push(function(){r.callback.call(r.observer,n,r.observer)}),r.activeTargets.splice(0,r.activeTargets.length)}});for(var r=0,n=t;r<n.length;r++)(0,n[r])();return e},V=function(e){f.forEach(function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach(function(r){r.isActive()&&(I(r.target)>e?t.activeTargets.push(r):t.skippedTargets.push(r))})})},_=[],F=0,B={attributes:!0,characterData:!0,childList:!0,subtree:!0},P=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],D=function(e){return void 0===e&&(e=0),Date.now()+e},N=!1,W=new(function(){function e(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return e.prototype.run=function(e){var t=this;if(void 0===e&&(e=250),!N){N=!0;var r,n=D(e);r=function(){var r=!1;try{r=function(){var e,t=0;for(V(t);f.some(function(e){return e.activeTargets.length>0});)t=j(),V(t);return f.some(function(e){return e.skippedTargets.length>0})&&("function"==typeof ErrorEvent?e=new ErrorEvent("error",{message:p}):((e=document.createEvent("Event")).initEvent("error",!1,!1),e.message=p),window.dispatchEvent(e)),t>0}()}finally{if(N=!1,e=n-D(),!F)return;r?t.run(1e3):e>0?t.run(e):t.start()}},function(e){if(!m){var t=0,n=document.createTextNode("");new MutationObserver(function(){return _.splice(0).forEach(function(e){return e()})}).observe(n,{characterData:!0}),m=function(){n.textContent="".concat(t?t--:t++)}}_.push(function(){requestAnimationFrame(r)}),m()}()}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,B)};document.body?t():E.addEventListener("DOMContentLoaded",t)},e.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),P.forEach(function(t){return E.addEventListener(t,e.listener,!0)}))},e.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),P.forEach(function(t){return E.removeEventListener(t,e.listener,!0)}),this.stopped=!0)},e}()),U=function(e){!F&&e>0&&W.start(),!(F+=e)&&W.stop()},q=function(){function e(e,t){this.target=e,this.observedBox=t||d.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var e,t=C(this.target,this.observedBox,!0);return y(e=this.target)||function(e){switch(e.tagName){case"INPUT":if("image"!==e.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(e)||"inline"!==getComputedStyle(e).display||(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),H=function(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t},Y=new WeakMap,X=function(e,t){for(var r=0;r<e.length;r+=1)if(e[r].target===t)return r;return-1},G=function(){function e(){}return e.connect=function(e,t){var r=new H(e,t);Y.set(e,r)},e.observe=function(e,t,r){var n=Y.get(e),i=0===n.observationTargets.length;X(n.observationTargets,t)<0&&(i&&f.push(n),n.observationTargets.push(new q(t,r&&r.box)),U(1),W.schedule())},e.unobserve=function(e,t){var r=Y.get(e),n=X(r.observationTargets,t);n>=0&&(1===r.observationTargets.length&&f.splice(f.indexOf(r),1),r.observationTargets.splice(n,1),U(-1))},e.disconnect=function(e){var t=this,r=Y.get(e);r.observationTargets.slice().forEach(function(r){return t.unobserve(e,r.target)}),r.activeTargets.splice(0,r.activeTargets.length)},e}(),Q=function(){function e(e){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof e)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");G.connect(this,e)}return e.prototype.observe=function(e,t){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!S(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");G.observe(this,e,t)},e.prototype.unobserve=function(e){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!S(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");G.unobserve(this,e)},e.prototype.disconnect=function(){G.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}(),$="%[a-f0-9]{2}",J=new RegExp($,"gi"),K=new RegExp("("+$+")+","gi");function Z(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;var r=e.slice(0,t=t||1),n=e.slice(t);return Array.prototype.concat.call([],Z(r),Z(n))}function ee(e){try{return decodeURIComponent(e)}catch(n){for(var t=e.match(J),r=1;r<t.length;r++)t=(e=Z(t,r).join("")).match(J);return e}}var te=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},r=K.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(e){var n=ee(r[0]);n!==r[0]&&(t[r[0]]=n)}r=K.exec(e)}t["%C2"]="�";for(var i=Object.keys(t),o=0;o<i.length;o++){var s=i[o];e=e.replace(new RegExp(s,"g"),t[s])}return e}(e)}},re=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const r=e.indexOf(t);return-1===r?[e]:[e.slice(0,r),e.slice(r+t.length)]},ne=function(e,t){for(var r={},n=Object.keys(e),i=Array.isArray(t),o=0;o<n.length;o++){var s=n[o],a=e[s];(i?-1!==t.indexOf(s):t(s,a,e))&&(r[s]=a)}return r};!function(e,t){function r(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function n(e,t){return t.encode?t.strict?encodeURIComponent(e).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`):encodeURIComponent(e):e}function i(e,t){return t.decode?te(e):e}function o(e){return Array.isArray(e)?e.sort():"object"==typeof e?o(Object.keys(e)).sort((e,t)=>Number(e)-Number(t)).map(t=>e[t]):e}function s(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function a(e){const t=(e=s(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function l(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function u(e,t){r((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,r,n)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=r):n[e]=r};case"bracket":return(e,r,n)=>{t=/(\[\])$/.exec(e),n[e=e.replace(/\[\]$/,"")]=t?void 0!==n[e]?[].concat(n[e],r):[r]:r};case"comma":case"separator":return(t,r,n)=>{const o="string"==typeof r&&r.includes(e.arrayFormatSeparator),s="string"==typeof r&&!o&&i(r,e).includes(e.arrayFormatSeparator);r=s?i(r,e):r;const a=o||s?r.split(e.arrayFormatSeparator).map(t=>i(t,e)):null===r?r:i(r,e);n[t]=a};default:return(e,t,r)=>{r[e]=void 0!==r[e]?[].concat(r[e],t):t}}}(t),s=Object.create(null);if("string"!=typeof e)return s;if(!(e=e.trim().replace(/^[?#&]/,"")))return s;for(const r of e.split("&")){if(""===r)continue;let[e,o]=re(t.decode?r.replace(/\+/g," "):r,"=");o=void 0===o?null:["comma","separator"].includes(t.arrayFormat)?o:i(o,t),n(i(e,t),o,s)}for(const e of Object.keys(s)){const r=s[e];if("object"==typeof r&&null!==r)for(const e of Object.keys(r))r[e]=l(r[e],t);else s[e]=l(r,t)}return!1===t.sort?s:(!0===t.sort?Object.keys(s).sort():Object.keys(s).sort(t.sort)).reduce((e,t)=>{const r=s[t];return e[t]=Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?o(r):r,e},Object.create(null))}t.extract=a,t.parse=u,t.stringify=(e,t)=>{if(!e)return"";r((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const i=r=>t.skipNull&&null==e[r]||t.skipEmptyString&&""===e[r],o=function(e){switch(e.arrayFormat){case"index":return t=>(r,i)=>{const o=r.length;return void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?r:null===i?[...r,[n(t,e),"[",o,"]"].join("")]:[...r,[n(t,e),"[",n(o,e),"]=",n(i,e)].join("")]};case"bracket":return t=>(r,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?r:null===i?[...r,[n(t,e),"[]"].join("")]:[...r,[n(t,e),"[]=",n(i,e)].join("")];case"comma":case"separator":return t=>(r,i)=>null==i||0===i.length?r:0===r.length?[[n(t,e),"=",n(i,e)].join("")]:[[r,n(i,e)].join(e.arrayFormatSeparator)];default:return t=>(r,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?r:null===i?[...r,n(t,e)]:[...r,[n(t,e),"=",n(i,e)].join("")]}}(t),s={};for(const t of Object.keys(e))i(t)||(s[t]=e[t]);const a=Object.keys(s);return!1!==t.sort&&a.sort(t.sort),a.map(r=>{const i=e[r];return void 0===i?"":null===i?n(r,t):Array.isArray(i)?i.reduce(o(r),[]).join("&"):n(r,t)+"="+n(i,t)}).filter(e=>e.length>0).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[r,n]=re(e,"#");return Object.assign({url:r.split("?")[0]||"",query:u(a(e),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:i(n,t)}:{})},t.stringifyUrl=(e,r)=>{r=Object.assign({encode:!0,strict:!0},r);const i=s(e.url).split("?")[0]||"",o=t.extract(e.url),a=t.parse(o,{sort:!1}),l=Object.assign(a,e.query);let u=t.stringify(l,r);u&&(u=`?${u}`);let c=function(e){let t="";const r=e.indexOf("#");return-1!==r&&(t=e.slice(r)),t}(e.url);return e.fragmentIdentifier&&(c=`#${n(e.fragmentIdentifier,r)}`),`${i}${u}${c}`},t.pick=(e,r,n)=>{n=Object.assign({parseFragmentIdentifier:!0},n);const{url:i,query:o,fragmentIdentifier:s}=t.parseUrl(e,n);return t.stringifyUrl({url:i,query:ne(o,r),fragmentIdentifier:s},n)},t.exclude=(e,r,n)=>{const i=Array.isArray(r)?e=>!r.includes(e):(e,t)=>!r(e,t);return t.pick(e,i,n)}}(0,{});var ie="undefined"!=typeof window?t.useLayoutEffect:t.useEffect;const oe="undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?t.useEffect:t.useLayoutEffect;var se={PRIORITY_PRELOAD:0,PRIORITY_SCISSORS:1,PRIORITY_VIEWPORTS:1,PRIORITY_GLOBAL:1e3,DEFAULT_SCALE_MULTIPLIER:1,preloadQueue:[]},ae=function(e){const r=function(e){let t;const r=/* @__PURE__ */new Set,n=(e,n)=>{const i="function"==typeof e?e(t):e;if(i!==t){const e=t;t=n?i:Object.assign({},t,i),r.forEach(r=>r(t,e))}},i=()=>t,o={setState:n,getState:i,subscribe:(e,n,o)=>n||o?((e,n=i,o=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let s=n(t);function a(){const r=n(t);if(!o(s,r)){const t=s;e(s=r,t)}}return r.add(a),()=>r.delete(a)})(e,n,o):(r.add(e),()=>r.delete(e)),destroy:()=>r.clear()};return s=n,t={debug:!1,scaleMultiplier:se.DEFAULT_SCALE_MULTIPLIER,globalRender:!0,globalPriority:se.PRIORITY_GLOBAL,globalClearDepth:!1,globalRenderQueue:!1,clearGlobalRenderQueue:function(){return s(function(){return{globalRenderQueue:!1}})},isCanvasAvailable:!0,hasSmoothScrollbar:!1,canvasChildren:{},renderToCanvas:function(e,t,r){return void 0===r&&(r={}),s(function(n){var i,o=n.canvasChildren;return Object.getOwnPropertyDescriptor(o,e)?(o[e].instances+=1,o[e].props.inactive=!1,{canvasChildren:o}):{canvasChildren:u({},o,((i={})[e]={mesh:t,props:r,instances:1},i))}})},updateCanvas:function(e,t){return s(function(r){var n,i=r.canvasChildren;if(i[e]){var o=i[e],s=o.instances;return{canvasChildren:u({},i,((n={})[e]={mesh:o.mesh,props:u({},o.props,t),instances:s},n))}}})},removeFromCanvas:function(e,t){return void 0===t&&(t=!0),s(function(r){var n,i=r.canvasChildren;return(null==(n=i[e])?void 0:n.instances)>1?(i[e].instances-=1,{canvasChildren:i}):t?{canvasChildren:c(i,[e].map(h))}:(i[e].instances=0,i[e].props.inactive=!0,{canvasChildren:u({},i)})})},pageReflow:0,requestReflow:function(){s(function(e){return{pageReflow:e.pageReflow+1}})},scroll:{y:0,x:0,limit:0,velocity:0,progress:0,direction:0,scrollDirection:void 0},scrollTo:function(){},onScroll:function(){return function(){}}},o;var s}(),n=(e=r.getState,n=Object.is)=>{const[,i]=t.useReducer(e=>e+1,0),o=r.getState(),s=t.useRef(o),a=t.useRef(e),l=t.useRef(n),u=t.useRef(!1),c=t.useRef();let h;void 0===c.current&&(c.current=e(o));let d=!1;(s.current!==o||a.current!==e||l.current!==n||u.current)&&(h=e(o),d=!n(c.current,h)),oe(()=>{d&&(c.current=h),s.current=o,a.current=e,l.current=n,u.current=!1});const f=t.useRef(o);oe(()=>{const e=()=>{try{const e=r.getState(),t=a.current(e);l.current(c.current,t)||(s.current=e,c.current=t,i())}catch(e){u.current=!0,i()}},t=r.subscribe(e);return r.getState()!==f.current&&e(),t},[]);const p=d?h:c.current;return t.useDebugValue(p),p};return Object.assign(n,r),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const e=[n,r];return{next(){const t=e.length<=0;return{value:e.shift(),done:t}}}},n}(),le=["makeDefault","margin"],ue=t.forwardRef(function(e,r){var i=e.makeDefault,o=void 0!==i&&i,s=e.margin,l=void 0===s?0:s,h=c(e,le),d=n.useThree(function(e){return e.set}),f=n.useThree(function(e){return e.camera}),p=n.useThree(function(e){return e.size}),m=n.useThree(function(e){return e.viewport}),v=t.useRef(null);t.useImperativeHandle(r,function(){return v.current});var g=ae(function(e){return e.pageReflow}),w=ae(function(e){return e.scaleMultiplier}),y=t.useMemo(function(){var e,t=(p.height+2*l)*w,r=(p.width+2*l)*w/t,n=h.fov||50,i=null==h||null==(e=h.position)?void 0:e[2];return i?n=180/Math.PI*2*Math.atan(t/(2*i)):i=t/(2*Math.tan(n/2*Math.PI/180)),{fov:n,distance:i,aspect:r}},[p,w,g]),b=y.fov,S=y.distance,E=y.aspect;return ie(function(){v.current.lookAt(0,0,0),v.current.updateProjectionMatrix(),v.current.updateMatrixWorld(),d(function(e){return{viewport:u({},e.viewport,m.getCurrentViewport(f))}})},[p,w,g]),ie(function(){if(o){var e=f;return d(function(){return{camera:v.current}}),function(){return d(function(){return{camera:e}})}}},[v,o,d]),a.default.createElement("perspectiveCamera",u({ref:v,position:[0,0,S],onUpdate:function(e){return e.updateProjectionMatrix()},near:.1,aspect:E,fov:b,far:2*S},h))}),ce=["makeDefault","margin"],he=t.forwardRef(function(e,r){var i=e.makeDefault,o=void 0!==i&&i,s=e.margin,l=void 0===s?0:s,h=c(e,ce),d=n.useThree(function(e){return e.set}),f=n.useThree(function(e){return e.camera}),p=n.useThree(function(e){return e.size}),m=ae(function(e){return e.pageReflow}),v=ae(function(e){return e.scaleMultiplier}),g=t.useMemo(function(){return Math.max(p.width*v,p.height*v)},[p,m,v]),w=t.useRef(null);return t.useImperativeHandle(r,function(){return w.current}),ie(function(){w.current.lookAt(0,0,0),w.current.updateProjectionMatrix(),w.current.updateMatrixWorld()},[g,p]),ie(function(){if(o){var e=f;return d(function(){return{camera:w.current}}),function(){return d(function(){return{camera:e}})}}},[w,o,d]),a.default.createElement("orthographicCamera",u({left:p.width*v/-2-l*v,right:p.width*v/2+l*v,top:p.height*v/2+l*v,bottom:p.height*v/-2-l*v,far:2*g,position:[0,0,g],near:.001,ref:w,onUpdate:function(e){return e.updateProjectionMatrix()}},h))});function de(e,t){e&&(!1===t?(e.wasFrustumCulled=e.frustumCulled,e.wasVisible=e.visible,e.visible=!0,e.frustumCulled=!1):(e.visible=!!e.wasVisible,e.frustumCulled=!!e.wasFrustumCulled),e.children.forEach(function(e){return de(e,t)}))}var fe=new r.Vector2,pe=function(e){void 0===e&&(e=[0]),ae.getState().globalRenderQueue=ae.getState().globalRenderQueue||[0],ae.getState().globalRenderQueue=[].concat(ae.getState().globalRenderQueue||[],e)},me=function(e){var t=e.gl,r=e.scene,n=e.camera,i=e.left,o=e.top,s=e.width,a=e.height,l=e.layer,u=void 0===l?0:l,c=e.autoClear,h=e.clearDepth,d=void 0!==h&&h;r&&n&&(t.autoClear=void 0!==c&&c,t.setScissor(i,o,s,a),t.setScissorTest(!0),n.layers.set(u),d&&t.clearDepth(),t.render(r,n),t.setScissorTest(!1))},ve=function(e){var t=e.gl,r=e.scene,n=e.camera,i=e.left,o=e.top,s=e.width,a=e.height,l=e.layer,u=void 0===l?0:l,c=e.scissor,h=void 0===c||c,d=e.autoClear,f=void 0!==d&&d,p=e.clearDepth,m=void 0!==p&&p;r&&n&&(t.getSize(fe),t.autoClear=f,t.setViewport(i,o,s,a),t.setScissor(i,o,s,a),t.setScissorTest(h),n.layers.set(u),m&&t.clearDepth(),t.render(r,n),t.setScissorTest(!1),t.setViewport(0,0,fe.x,fe.y))},ge=function(e,t,r,i){void 0===r&&(r=0),se.preloadQueue.push(function(n,o,s){n.setScissorTest(!1),de(e||o,!1),t.layers.set(r),n.render(e||o,t||s),de(e||o,!0),i&&i()}),n.invalidate()},we=function(){var e=ae(function(e){return e.isCanvasAvailable}),r=ae(function(e){return e.hasSmoothScrollbar}),n=ae(function(e){return e.requestReflow}),i=ae(function(e){return e.pageReflow}),o=ae(function(e){return e.debug}),s=ae(function(e){return e.scaleMultiplier});return t.useEffect(function(){o&&(window._scrollRig=window._scrollRig||{},window._scrollRig.reflow=n)},[]),{debug:o,isCanvasAvailable:e,hasSmoothScrollbar:r,scaleMultiplier:s,preloadScene:ge,requestRender:pe,renderScissor:me,renderViewport:ve,reflow:n,reflowCompleted:i}},ye=function(e){return a.default.createElement("mesh",{scale:e.scale},a.default.createElement("planeGeometry",null),a.default.createElement("shaderMaterial",{args:[{uniforms:{color:{value:new r.Color("hotpink")}},vertexShader:"\n            void main() {\n              gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n            }\n          ",fragmentShader:"\n            uniform vec3 color;\n            uniform float opacity;\n            void main() {\n              gl_FragColor.rgba = vec4(color, .5);\n            }\n          "}],transparent:!0}))};const be=new Map,Se=new WeakMap;let Ee=0;function Te(e,t,r){var n,i,o,s,a;function l(){var u=Date.now()-s;u<t&&u>=0?n=setTimeout(l,t-u):(n=null,r||(a=e.apply(o,i),o=i=null))}null==t&&(t=100);var u=function(){o=this,i=arguments,s=Date.now();var u=r&&!n;return n||(n=setTimeout(l,t)),u&&(a=e.apply(o,i),o=i=null),a};return u.clear=function(){n&&(clearTimeout(n),n=null)},u.flush=function(){n&&(a=e.apply(o,i),o=i=null,clearTimeout(n),n=null)},u}Te.debounce=Te;var Re=Te,xe="undefined"!=typeof window;function Oe(e){var r=(void 0===e?{}:e).debounce,n=void 0===r?0:r,i=t.useState({width:xe?window.innerWidth:Infinity,height:xe?window.innerHeight:Infinity}),o=i[0],s=i[1];return t.useEffect(function(){var e=document.getElementById("ScrollRig-canvas");function t(){var t=e?e.clientWidth:window.innerWidth,r=e?e.clientHeight:window.innerHeight;t===o.width&&r===o.height||s({width:t,height:r})}var r,i=Re.debounce(t,n),a=window.ResizeObserver||Q;return e?(r=new a(i)).observe(e):window.addEventListener("resize",i),t(),function(){var e;window.removeEventListener("resize",i),null==(e=r)||e.disconnect()}},[o,s]),o}let Me=new Proxy({},{get:function(e,t){return e.hasOwnProperty(t)||(e[t]=ke(t)),e[t]}});class ze extends Array{constructor(e,t){if(!(t=je(t)).every(e=>"Number"===_e(e)))throw new TypeError("All arguments must be numbers.");if(t.length>1&&t.length!==e)throw new Error("Argument list must be empty, have a single number, or have a length equal to the dimension.");0===t.length&&(t=[0]),1===t.length&&"Number"===_e(t[0])&&(t=Array(e).fill(t[0])),e>1?super(...t):(super(1),this[0]=t[0]),Reflect.defineProperty(this,"pop",{value:void 0,enumerable:!1}),Reflect.defineProperty(this,"push",{value:void 0,enumerable:!1}),Reflect.defineProperty(this,"shift",{value:void 0,enumerable:!1}),Reflect.defineProperty(this,"unshift",{value:void 0,enumerable:!1})}get magnitude(){return this.pnorm(2)}div(e){Ie(e,this.dim,!0),"Number"===_e(e)&&(e=new Array(this.dim).fill(e));let t=[];for(let r=0;r<this.length;++r)t[r]=this[r]/e[r];return Me[this.dim](t)}minus(e){Ie(e,this.dim,!0),"Number"===_e(e)&&(e=new Array(this.dim).fill(e));let t=[];for(let r=0;r<this.dim;++r)t[r]=this[r]-e[r];return Me[this.dim](t)}neg(){return Me[this.dim](this.times(-1))}plus(e){Ie(e,this.dim,!0),"Number"===_e(e)&&(e=new Array(this.dim).fill(e));let t=[];for(let r=0;r<this.dim;++r)t[r]=this[r]+e[r];return Me[this.dim](t)}pow(e){let t=[];for(let r=0;r<this.dim;++r)t[r]=Math.pow(this[r],e);return Me[this.dim](t)}times(e){Ie(e,this.dim,!0),"Number"===_e(e)&&(e=new Array(this.dim).fill(e));let t=[];for(let r=0;r<this.dim;++r)t[r]=this[r]*e[r];return Me[this.dim](t)}dot(e){Ie(e,this.dim);let t=0;for(let r=0;r<this.dim;++r)t+=this[r]*e[r];return t}normalize(){return this.div(this.magnitude)}pnorm(e){let t=0;for(let r=0;r<this.dim;++r)t+=Math.pow(Math.abs(this[r]),e);return Math.pow(t,1/e)}reflect(e){const t=e.normalize();return this.minus(t.times(2*this.dot(t)))}argmax(){const e=this.max();return this.reduce((t,r,n)=>r===e?t.concat([n]):t,[])}argmin(){const e=this.min();return this.reduce((t,r,n)=>r===e?t.concat([n]):t,[])}choose(e){if(!Array.isArray(e))throw new TypeError("Argument must be a list of indices.");if(!e.every(e=>e<this.dim&&Ve(e.toString())))throw new RangeError("All elements of argument must be valid indices.");let t=[];return e.forEach(e=>t.push(this[e])),Me[t.length](t)}copy(){return Me[this.dim](this)}equals(e){return e.length===this.dim&&e.every((e,t)=>this[t]===e)}approximatelyEquals(e,t=1e-8){return e.length===this.dim&&e.every((e,r)=>Math.abs(this[r]-e)<t)}max(){return Math.max(...this)}min(){return Math.min(...this)}sum(){return this.reduce((e,t)=>e+t,0)}toArray(){return Array.from(this)}concat(...e){const t=super.concat.apply(this.toArray(),e);return Me[t.length](t)}filter(...e){const t=super.filter.apply(this.toArray(),e);return t.length>0?Me[t.length](t):t}map(...e){const t=super.map(...e);return t.every(e=>"Number"===_e(e))?t:t.toArray()}slice(...e){const t=super.slice.apply(this.toArray(),e);return t.length>0?Me[t.length](t):t}splice(...e){let t=this.toArray();if(t.splice(...e),t.length!==this.dim)throw new Error("All removed elements must be replaced.");if(!t.every(e=>"Number"===_e(e)))throw new TypeError("All elements must be numbers.");t.forEach((e,t)=>{this[t]=e})}toString(){return this.reduce((e,t,r)=>e+t+(r===this.dim-1?" ":", "),"[ ")+"]"}}const Ae={set:function(e,t,r){if("length"===t)return!1;if(Ve(t)){if(Number(t)>=e.dim)throw new RangeError("Vector may not have more elements than dimension.");if("Number"!==_e(r))throw new TypeError("Vectors may only contain numbers.");return e[t]=r,!0}const n=Le(t.toString());return!!(e.dim<=4&&n)&&(function(e,t,r,n){if(1===t.length){if("Number"!==_e(n))throw new TypeError("Must set to a number");return void(e[r[t]]=n)}if(!Array.isArray(n))throw new TypeError("Right-hand side must be an array.");if(t.length!==n.length)throw new TypeError("Right-hand side must have matching length.");if(!n.every(e=>"Number"===_e(e)))throw new TypeError("All new values must be numbers.");if(t.split("").some(t=>r[t]>=e.dim))return;let i=!0;for(let e=0,r={};e<t.length;++e){if(r.hasOwnProperty(t[e])){i=!1;break}r[t[e]]=!0}if(!i)throw new SyntaxError("Swizzle assignment does not allow symbols to be repeated.");t.split("").map(e=>r[e]).forEach((t,r)=>{e[t]=n[r]})}(e,t.toString(),n,r),!0)},get:function(e,t){const r=Le(t.toString());return e.dim<=4&&r?function(e,t,r){const n=t.length;if(1===n)return e[r[t]];let i=t.split("").reduce((t,n)=>{let i=r[n];return t&&i<e.dim?t.concat([e[i]]):void 0},[]);return i?new Me[n](...i):void 0}(e,t,r):e[t]}};function ke(e){if(!((e=Number(e))in Me)){if(isNaN(e))throw new TypeError("Dimension must be coercible to a number.");if(e<=0)throw new RangeError("Dimension must be positive.");if(!Number.isInteger(e))throw new RangeError("Dimension must be positive.");let t="vec"+e,r={[t]:class extends ze{constructor(...t){if(1===t.length&&t[0]instanceof ze){if(t[0].dim>e)throw new TypeError("Cannot demote vectors.");t=function(e,t){return[...Array(t)].map((t,r)=>r<e.length?e[r]:0)}(t[0].toArray(),e)}super(e,t),Reflect.defineProperty(this,"dim",{value:e,writable:!1,enumerable:!1})}}}[t];Me[e]=function(...e){let t=new r(...e);return Object.preventExtensions(t),new Proxy(t,Ae)}}return Me[e]}const Ce=[{x:0,y:1,z:2,w:3},{r:0,g:1,b:2,a:3},{s:0,t:1,p:2,q:3}];function Le(e){return Ce.find(t=>e.split("").every(e=>e in t))}function Ie(e,t,r=!1){if(!(r&&"Number"===_e(e)||e.length&&e.length===t))throw new TypeError(`Invalid argument. Input must have matching dimension${r?"or be a scalar":""}.`)}function je(e){return e instanceof Array&&1===e.length&&e[0]instanceof Array?je(e[0]):e}function Ve(e){return!isNaN(e)&&Number(e).toString()===e&&Number.isInteger(Number(e))&&Number(e)>=0}function _e(e){return Object.prototype.toString.call(e).slice(8,-1)}var Fe={getVecType:ke,isVec:function(e){return e instanceof ze},vec2:Me[2],vec3:Me[3],vec4:Me[4],add:function(...e){const t=e[0].dim;if(!e.every(e=>e.dim===t))throw new TypeError("All vectors must have the same dimension.");return e.reduce((e,t)=>e.plus(t),Me[t]())},multiply:function(...e){const t=e[0].dim;if(!e.every(e=>e.dim===t))throw new TypeError("All vectors must have the same dimension.");return e.reduce((e,t)=>e.times(t),Me[t](1))},lerp:function(e,t,r){if(e.dim!==t.dim)throw new TypeError("Vectors must have the same dimension.");return r=r<0?0:r>1?1:r,e.plus(t.minus(e).times(r))},slerp:function(e,t,r){if(e.dim!==t.dim)throw new TypeError("Vectors must have the same dimension.");r=r<0?0:r>1?1:r;let n=e.normalize().dot(t.normalize());n=n<-1?-1:n>1?1:n;const i=Math.acos(n)*r,o=t.minus(e.times(n)).normalize(),s=e.magnitude+(t.magnitude-e.magnitude)*r;return e.times(Math.cos(i)).plus(o.times(Math.sin(i))).normalize().times(s)}};function Be(e,t,r,n,i){return n+(e-t)*(i-n)/(r-t)}var Pe=function(){return{enabled:ae(function(e){return e.hasSmoothScrollbar}),scroll:ae(function(e){return e.scroll}),scrollTo:ae(function(e){return e.scrollTo}),onScroll:ae(function(e){return e.onScroll})}};function De(e,r){var n=Oe(),i=Pe(),o=i.scroll,s=i.onScroll,a=ae(function(e){return e.scaleMultiplier}),c=ae(function(e){return e.pageReflow}),h=ae(function(e){return e.debug}),d=t.useMemo(function(){var e={rootMargin:"0%",threshold:0,autoUpdate:!0},t=r||{};return Object.keys(t).map(function(r,n){void 0!==t[r]&&(e[r]=t[r])}),e},[r]),f=d.autoUpdate,p=d.wrapper,m=function({threshold:e,delay:t,trackVisibility:r,rootMargin:n,root:i,triggerOnce:o,skip:s,initialInView:a,fallbackInView:u,onChange:c}={}){var h;const[d,f]=l.useState(null),p=l.useRef(),[m,v]=l.useState({inView:!!a,entry:void 0});p.current=c,l.useEffect(()=>{if(s||!d)return;let a=function(e,t,r={},n=undefined){if(void 0===window.IntersectionObserver&&void 0!==n){const i=e.getBoundingClientRect();return t(n,{isIntersecting:n,target:e,intersectionRatio:"number"==typeof r.threshold?r.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),()=>{}}const{id:i,observer:o,elements:s}=function(e){let t=function(e){return Object.keys(e).sort().filter(t=>void 0!==e[t]).map(t=>{return`${t}_${"root"===t?(r=e.root,r?(Se.has(r)||(Ee+=1,Se.set(r,Ee.toString())),Se.get(r)):"0"):e[t]}`;var r}).toString()}(e),r=be.get(t);if(!r){const n=new Map;let i;const o=new IntersectionObserver(t=>{t.forEach(t=>{var r;const o=t.isIntersecting&&i.some(e=>t.intersectionRatio>=e);e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=o),null==(r=n.get(t.target))||r.forEach(e=>{e(o,t)})})},e);i=o.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:o,elements:n},be.set(t,r)}return r}(r);let a=s.get(e)||[];return s.has(e)||s.set(e,a),a.push(t),o.observe(e),function(){a.splice(a.indexOf(t),1),0===a.length&&(s.delete(e),o.unobserve(e)),0===s.size&&(o.disconnect(),be.delete(i))}}(d,(e,t)=>{v({inView:e,entry:t}),p.current&&p.current(e,t),t.isIntersecting&&o&&a&&(a(),a=void 0)},{root:i,rootMargin:n,threshold:e,trackVisibility:r,delay:t},u);return()=>{a&&a()}},[Array.isArray(e)?e.toString():e,d,i,n,o,s,r,u,t]);const g=null==(h=m.entry)?void 0:h.target;l.useEffect(()=>{d||!g||o||s||v({inView:!!a,entry:void 0})},[d,g,o,s,a]);const w=[f,m.inView,m.entry];return w.ref=w[0],w.inView=w[1],w.entry=w[2],w}({rootMargin:d.rootMargin,threshold:d.threshold}),v=m.ref,g=m.inView;ie(function(){v(e.current)},[e,e.current]);var w=t.useState(Fe.vec3(0,0,0)),y=w[0],b=w[1],S=t.useRef({inViewport:!1,progress:-1,visibility:-1,viewport:-1}).current,E=t.useRef({top:0,bottom:0,left:0,right:0,width:0,height:0}).current,T=t.useState(E),R=T[0],x=T[1],O=t.useRef({top:0,bottom:0,left:0,right:0,width:0,height:0,x:0,y:0,positiveYUpBottom:0}).current,M=t.useRef(Fe.vec3(0,0,0)).current;ie(function(){var t,r=null==(t=e.current)?void 0:t.getBoundingClientRect();if(r){var i=p?p.scrollTop:window.scrollY,o=p?p.scrollLeft:window.scrollX;E.top=r.top+i,E.bottom=r.bottom+i,E.left=r.left+o,E.right=r.right+o,E.width=r.width,E.height=r.height,x(u({},E)),b(Fe.vec3((null==E?void 0:E.width)*a,(null==E?void 0:E.height)*a,1)),h&&console.log("useTracker.getBoundingClientRect:",E,"intialScroll:",{initialY:i,initialX:o},"size:",n,"pageReflow:",c)}},[e,n,c,a,h]);var z=t.useCallback(function(t){var r=void 0===t?{}:t,i=r.onlyUpdateInViewport;if(e.current&&(void 0===i||!i||S.inViewport)){var s=r.scroll||o;!function(e,t,r,n){e.top=t.top-(r.y||0),e.bottom=t.bottom-(r.y||0),e.left=t.left-(r.x||0),e.right=t.right-(r.x||0),e.width=t.width,e.height=t.height,e.x=e.left+.5*t.width-.5*n.width,e.y=e.top+.5*t.height-.5*n.height,e.positiveYUpBottom=n.height-e.bottom}(O,E,s,n),function(e,t,r){e.x=t.x*r,e.y=-1*t.y*r}(M,O,a);var l="horizontal"===s.scrollDirection,u=l?"width":"height",c=n[u]-O[l?"left":"top"];S.progress=Be(c,0,n[u]+O[u],0,1),S.visibility=Be(c,0,O[u],0,1),S.viewport=Be(c,0,n[u],0,1)}},[e,n,a,o]);return ie(function(){S.inViewport=g,z({onlyUpdateInViewport:!1}),h&&console.log("useTracker.inViewport:",g,"update()")},[g]),ie(function(){z({onlyUpdateInViewport:!1}),h&&console.log("useTracker.update on resize/reflow")},[z,c]),t.useEffect(function(){if(f)return s(function(e){return z({onlyUpdateInViewport:!0})})},[f,z,s]),{rect:R,bounds:O,scale:y,position:M,scrollState:S,inViewport:g,update:z}}var Ne=["track","children","margin","inViewportMargin","inViewportThreshold","visible","hideOffscreen","scissor","debug","as","priority"],We=t.memo(function(e){var i=e.track,o=e.children,s=e.margin,l=void 0===s?0:s,h=e.inViewportMargin,d=e.inViewportThreshold,f=e.visible,p=void 0===f||f,m=e.hideOffscreen,v=void 0===m||m,g=e.scissor,w=void 0!==g&&g,y=e.debug,b=void 0!==y&&y,S=e.as,E=void 0===S?"scene":S,T=e.priority,R=void 0===T?se.PRIORITY_SCISSORS:T,x=c(e,Ne),O=t.useCallback(function(e){null!==e&&A(e)},[]),M=t.useState(w?new r.Scene:null),z=M[0],A=M[1],k=we(),C=k.requestRender,L=k.renderScissor,I=ae(function(e){return e.globalRender}),j=De(i,{rootMargin:h,threshold:d}),V=j.bounds,_=j.scale,F=j.position,B=j.scrollState,P=j.inViewport;ie(function(){z&&(z.visible=v?P&&p:p)},[z,P,v,p]),n.useFrame(function(e){var t=e.gl,r=e.camera;z&&z.visible&&(z.position.y=F.y,z.position.x=F.x,w?L({gl:t,scene:z,camera:r,left:V.left-l,top:V.positiveYUpBottom-l,width:V.width+2*l,height:V.height+2*l}):C())},I?R:void 0);var D=a.default.createElement(a.default.Fragment,null,(!o||b)&&_&&a.default.createElement(ye,{scale:_}),o&&z&&_&&o(u({track:i,margin:l,scale:_,scrollState:B,inViewport:P,priority:R},x))),N=E;return w&&z?n.createPortal(D,z):a.default.createElement(N,{ref:O},D)}),Ue=["track","children","margin","visible","hideOffscreen","debug","orthographic","priority","inViewport","bounds","scale","scrollState","camera","hud"],qe=["track","margin","inViewportMargin","inViewportThreshold","priority"],He=["bounds"],Ye=function(e){var r=e.track,i=e.children,o=e.margin,s=void 0===o?0:o,l=e.visible,h=void 0===l||l,d=e.hideOffscreen,f=void 0===d||d,p=e.debug,m=void 0!==p&&p,v=e.orthographic,g=void 0!==v&&v,w=e.priority,y=void 0===w?se.PRIORITY_VIEWPORTS:w,b=e.inViewport,S=e.bounds,E=e.scale,T=e.scrollState,R=e.camera,x=e.hud,O=c(e,Ue),M=n.useThree(function(e){return e.scene}),z=n.useThree(function(e){return e.get}),A=n.useThree(function(e){return e.setEvents}),k=we().renderViewport;return ie(function(){M.visible=f?b&&h:h},[b,f,h]),t.useEffect(function(){var e=z().events.connected;return A({connected:r.current}),function(){return A({connected:e})}},[]),n.useFrame(function(e){var t=e.scene;t.visible&&k({gl:e.gl,scene:t,camera:e.camera,left:S.left-s,top:S.positiveYUpBottom-s,width:S.width+2*s,height:S.height+2*s,clearDepth:!!x})},y),a.default.createElement(a.default.Fragment,null,!g&&a.default.createElement(ue,u({manual:!0,margin:s,makeDefault:!0},R)),g&&a.default.createElement(he,u({manual:!0,margin:s,makeDefault:!0},R)),(!i||m)&&E&&a.default.createElement(ye,{scale:E}),i&&E&&i(u({track:r,margin:s,scale:E,scrollState:T,inViewport:b,priority:y},O)))};t.memo(function(e){var i=e.track,o=e.margin,s=void 0===o?0:o,l=e.inViewportMargin,h=e.inViewportThreshold,d=e.priority,f=c(e,qe),p=t.useState(function(){return new r.Scene})[0],m=De(i,{rootMargin:l,threshold:h}),v=m.bounds,g=c(m,He),w=t.useCallback(function(e,t){i.current&&e.target===i.current&&(t.pointer.set((e.clientX-v.left+s)/(v.width+2*s)*2-1,-(e.clientY-v.top+s)/(v.height+2*s)*2+1),t.raycaster.setFromCamera(t.pointer,t.camera))},[v]);return v&&n.createPortal(a.default.createElement(Ye,u({track:i,bounds:v,priority:d,margin:s},f,g)),p,{events:{compute:w,priority:d},size:{width:v.width,height:v.height}})});var Xe=["children","id","dispose"];function Ge(e,t,r=((e,t)=>e===t)){if(e===t)return!0;if(!e||!t)return!1;const n=e.length;if(t.length!==n)return!1;for(let i=0;i<n;i++)if(!r(e[i],t[i]))return!1;return!0}t.forwardRef(function(e,n){var i=e.children,o=e.id,s=e.dispose,a=void 0===s||s,l=c(e,Xe);return i?(function(e,n,i){void 0===n&&(n={});var o=void 0===i?{}:i,s=o.key,a=o.dispose,l=void 0===a||a,u=ae(function(e){return e.updateCanvas}),c=ae(function(e){return e.renderToCanvas}),h=ae(function(e){return e.removeFromCanvas}),d=t.useMemo(function(){return s||r.MathUtils.generateUUID()},[]);ie(function(){c(d,e,{inactive:!1})},[d]),t.useEffect(function(){return function(){h(d,l)}},[d]);var f=t.useCallback(function(e){u(d,e)},[u,d]);t.useEffect(function(){f(n)},[].concat(Object.values(n)))}(i,u({},l,{ref:n}),{key:o,dispose:a}),null):null});const Qe=[];var $e=new Promise(e=>{const t=new Image;t.addEventListener("error",()=>e(!1)),t.addEventListener("load",()=>e(1===t.width)),t.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA="}).catch(()=>!1),Je=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(i=n;0!=i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(i=n;0!=i--;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;0!=i--;){var s=o[i];if(!e(t[s],r[s]))return!1}return!0}return t!=t&&r!=r},Ke=!1;function Ze(){return Ze=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ze.apply(this,arguments)}function et(e,t,r){return Math.max(e,Math.min(t,r))}$e.then(function(e){Ke=e});class tt{advance(e){var t;if(!this.isRunning)return;let r=!1;if(this.lerp)this.value=(1-(n=this.lerp))*this.value+n*this.to,Math.round(this.value)===this.to&&(this.value=this.to,r=!0);else{this.currentTime+=e;const t=et(0,this.currentTime/this.duration,1);r=t>=1;const n=r?1:this.easing(t);this.value=this.from+(this.to-this.from)*n}var n;null==(t=this.onUpdate)||t.call(this,this.value,{completed:r}),r&&this.stop()}stop(){this.isRunning=!1}fromTo(e,t,{lerp:r=.1,duration:n=1,easing:i=(e=>e),onUpdate:o}){this.from=this.value=e,this.to=t,this.lerp=r,this.duration=n,this.easing=i,this.currentTime=0,this.isRunning=!0,this.onUpdate=o}}function rt(e,t){let r;return function(){let n=arguments,i=this;clearTimeout(r),r=setTimeout(function(){e.apply(i,n)},t)}}class nt{constructor(e,t){this.onWindowResize=()=>{this.width=window.innerWidth,this.height=window.innerHeight},this.onWrapperResize=()=>{this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight},this.onContentResize=()=>{const e=this.wrapper===window?document.documentElement:this.wrapper;this.scrollHeight=e.scrollHeight,this.scrollWidth=e.scrollWidth},this.wrapper=e,this.content=t,this.wrapper===window?(window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize()):(this.wrapperResizeObserver=new ResizeObserver(rt(this.onWrapperResize,100)),this.wrapperResizeObserver.observe(this.wrapper),this.onWrapperResize()),this.contentResizeObserver=new ResizeObserver(rt(this.onContentResize,100)),this.contentResizeObserver.observe(this.content),this.onContentResize()}destroy(){var e,t;window.removeEventListener("resize",this.onWindowResize,!1),null==(e=this.wrapperResizeObserver)||e.disconnect(),null==(t=this.contentResizeObserver)||t.disconnect()}get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}}let it=()=>({events:{},emit(e,...t){let r=this.events[e]||[];for(let e=0,n=r.length;e<n;e++)r[e](...t)},on(e,t){var r;return(null==(r=this.events[e])?void 0:r.push(t))||(this.events[e]=[t]),()=>{var r;this.events[e]=null==(r=this.events[e])?void 0:r.filter(e=>t!==e)}}});class ot{constructor(e,{wheelMultiplier:t=1,touchMultiplier:r=2,normalizeWheel:n=!1}){this.onTouchStart=e=>{const{clientX:t,clientY:r}=e.targetTouches?e.targetTouches[0]:e;this.touchStart.x=t,this.touchStart.y=r,this.lastDelta={x:0,y:0}},this.onTouchMove=e=>{const{clientX:t,clientY:r}=e.targetTouches?e.targetTouches[0]:e,n=-(t-this.touchStart.x)*this.touchMultiplier,i=-(r-this.touchStart.y)*this.touchMultiplier;this.touchStart.x=t,this.touchStart.y=r,this.lastDelta={x:n,y:i},this.emitter.emit("scroll",{type:"touch",deltaX:n,deltaY:i,event:e})},this.onTouchEnd=e=>{this.emitter.emit("scroll",{type:"touch",inertia:!0,deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:e})},this.onWheel=e=>{let{deltaX:t,deltaY:r}=e;this.normalizeWheel&&(t=et(-100,t,100),r=et(-100,r,100)),t*=this.wheelMultiplier,r*=this.wheelMultiplier,this.emitter.emit("scroll",{type:"wheel",deltaX:t,deltaY:r,event:e})},this.element=e,this.wheelMultiplier=t,this.touchMultiplier=r,this.normalizeWheel=n,this.touchStart={x:null,y:null},this.emitter=it(),this.element.addEventListener("wheel",this.onWheel,{passive:!1}),this.element.addEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.addEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.addEventListener("touchend",this.onTouchEnd,{passive:!1})}on(e,t){return this.emitter.on(e,t)}destroy(){this.emitter.events={},this.element.removeEventListener("wheel",this.onWheel,{passive:!1}),this.element.removeEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.removeEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.removeEventListener("touchend",this.onTouchEnd,{passive:!1})}}class st{constructor({direction:e,gestureDirection:t,mouseMultiplier:r,smooth:n,wrapper:i=window,content:o=document.documentElement,wheelEventsTarget:s=i,smoothWheel:a=null==n||n,smoothTouch:l=!1,syncTouch:u=!1,syncTouchLerp:c=.1,touchInertiaMultiplier:h=35,duration:d,easing:f=(e=>Math.min(1,1.001-Math.pow(2,-10*e))),lerp:p=(d?null:.1),infinite:m=!1,orientation:v=(null!=e?e:"vertical"),gestureOrientation:g=(null!=t?t:"vertical"),touchMultiplier:w=1,wheelMultiplier:y=(null!=r?r:1),normalizeWheel:b=!1}={}){this.onVirtualScroll=({type:e,inertia:t,deltaX:r,deltaY:n,event:i})=>{if(i.ctrlKey)return;const o="touch"===e,s="wheel"===e;if("vertical"===this.options.gestureOrientation&&0===n||"horizontal"===this.options.gestureOrientation&&0===r||o&&"vertical"===this.options.gestureOrientation&&0===this.scroll&&!this.options.infinite&&n<=0)return;if(i.composedPath().find(e=>null==e||null==e.hasAttribute?void 0:e.hasAttribute("data-lenis-prevent")))return;if(this.isStopped||this.isLocked)return void i.preventDefault();if(this.isSmooth=(this.options.smoothTouch||this.options.syncTouch)&&o||this.options.smoothWheel&&s,!this.isSmooth)return this.isScrolling=!1,void this.animate.stop();i.preventDefault();let a=n;"both"===this.options.gestureOrientation?a=Math.abs(n)>Math.abs(r)?n:r:"horizontal"===this.options.gestureOrientation&&(a=r);const l=o&&this.options.syncTouch,u=o&&t&&Math.abs(a)>1;u&&(a=this.velocity*this.options.touchInertiaMultiplier),this.scrollTo(this.targetScroll+a,Ze({programmatic:!1},l&&{lerp:u?this.syncTouchLerp:.4}))},this.onScroll=()=>{if(!this.isScrolling){const e=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.direction=Math.sign(this.animatedScroll-e),this.emit()}},e&&console.warn("Lenis: `direction` option is deprecated, use `orientation` instead"),t&&console.warn("Lenis: `gestureDirection` option is deprecated, use `gestureOrientation` instead"),r&&console.warn("Lenis: `mouseMultiplier` option is deprecated, use `wheelMultiplier` instead"),n&&console.warn("Lenis: `smooth` option is deprecated, use `smoothWheel` instead"),window.lenisVersion="1.0.10",i!==document.documentElement&&i!==document.body||(i=window),this.options={wrapper:i,content:o,wheelEventsTarget:s,smoothWheel:a,smoothTouch:l,syncTouch:u,syncTouchLerp:c,touchInertiaMultiplier:h,duration:d,easing:f,lerp:p,infinite:m,gestureOrientation:g,orientation:v,touchMultiplier:w,wheelMultiplier:y,normalizeWheel:b},this.dimensions=new nt(i,o),this.rootElement.classList.add("lenis"),this.velocity=0,this.isStopped=!1,this.isSmooth=a||l,this.isScrolling=!1,this.targetScroll=this.animatedScroll=this.actualScroll,this.animate=new tt,this.emitter=it(),this.options.wrapper.addEventListener("scroll",this.onScroll,{passive:!1}),this.virtualScroll=new ot(s,{touchMultiplier:w,wheelMultiplier:y,normalizeWheel:b}),this.virtualScroll.on("scroll",this.onVirtualScroll)}destroy(){this.emitter.events={},this.options.wrapper.removeEventListener("scroll",this.onScroll,{passive:!1}),this.virtualScroll.destroy()}on(e,t){return this.emitter.on(e,t)}off(e,t){var r;this.emitter.events[e]=null==(r=this.emitter.events[e])?void 0:r.filter(e=>t!==e)}setScroll(e){this.isHorizontal?this.rootElement.scrollLeft=e:this.rootElement.scrollTop=e}emit(){this.emitter.emit("scroll",this)}reset(){this.isLocked=!1,this.isScrolling=!1,this.velocity=0,this.animate.stop()}start(){this.isStopped=!1,this.reset()}stop(){this.isStopped=!0,this.animate.stop(),this.reset()}raf(e){const t=e-(this.time||e);this.time=e,this.animate.advance(.001*t)}scrollTo(e,{offset:t=0,immediate:r=!1,lock:n=!1,duration:i=this.options.duration,easing:o=this.options.easing,lerp:s=!i&&this.options.lerp,onComplete:a=null,force:l=!1,programmatic:u=!0}={}){if(!this.isStopped||l){if(["top","left","start"].includes(e))e=0;else if(["bottom","right","end"].includes(e))e=this.limit;else{var c;let r;if("string"==typeof e?r=document.querySelector(e):null!=(c=e)&&c.nodeType&&(r=e),r){if(this.options.wrapper!==window){const e=this.options.wrapper.getBoundingClientRect();t-=this.isHorizontal?e.left:e.top}const n=r.getBoundingClientRect();e=(this.isHorizontal?n.left:n.top)+this.animatedScroll}}if("number"==typeof e){if(e+=t,this.options.infinite?u&&(this.targetScroll=this.animatedScroll=this.scroll):e=et(0,e,this.limit),r)return this.animatedScroll=this.targetScroll=e,this.setScroll(this.scroll),this.reset(),this.emit(),void(null==a||a());if(!u){if(e===this.targetScroll)return;this.targetScroll=e}this.animate.fromTo(this.animatedScroll,e,{duration:i,easing:o,lerp:s,onUpdate:(e,{completed:t})=>{n&&(this.isLocked=!0),this.isScrolling=!0,this.velocity=e-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=e,this.setScroll(this.scroll),u&&(this.targetScroll=e),t&&(n&&(this.isLocked=!1),requestAnimationFrame(()=>{this.isScrolling=!1}),this.velocity=0,null==a||a()),this.emit()}})}}}get rootElement(){return this.options.wrapper===window?this.options.content:this.options.wrapper}get limit(){return this.isHorizontal?this.dimensions.limit.x:this.dimensions.limit.y}get isHorizontal(){return"horizontal"===this.options.orientation}get actualScroll(){return this.isHorizontal?this.rootElement.scrollLeft:this.rootElement.scrollTop}get scroll(){return this.options.infinite?function(e,t){let r=e%t;return(t>0&&r<0||t<0&&r>0)&&(r+=t),r}(this.animatedScroll,this.limit):this.animatedScroll}get progress(){return 0===this.limit?1:this.scroll/this.limit}get isSmooth(){return this.__isSmooth}set isSmooth(e){this.__isSmooth!==e&&(this.rootElement.classList.toggle("lenis-smooth",e),this.__isSmooth=e)}get isScrolling(){return this.__isScrolling}set isScrolling(e){this.__isScrolling!==e&&(this.rootElement.classList.toggle("lenis-scrolling",e),this.__isScrolling=e)}get isStopped(){return this.__isStopped}set isStopped(e){this.__isStopped!==e&&(this.rootElement.classList.toggle("lenis-stopped",e),this.__isStopped=e)}}var at=t.forwardRef(function(e,r){var n=e.children,i=e.enabled,o=void 0===i||i,s=e.locked,a=void 0!==s&&s,l=e.scrollRestoration,c=void 0===l?"auto":l,h=e.disablePointerOnScroll,d=void 0===h||h,f=e.horizontal,p=void 0!==f&&f,m=e.scrollInContainer,v=void 0!==m&&m,g=e.updateGlobalState,w=void 0===g||g,y=e.onScroll,b=e.config,S=void 0===b?{}:b,E=e.invalidate,T=void 0===E?function(){}:E,R=e.addEffect,x=t.useRef(),O=t.useRef(),M=t.useRef(!1),z=ae(function(e){return e.scroll});t.useImperativeHandle(r,function(){return{start:function(){var e;return null==(e=O.current)?void 0:e.start()},stop:function(){var e;return null==(e=O.current)?void 0:e.stop()},on:function(e,t){var r;return null==(r=O.current)?void 0:r.on(e,t)},notify:function(){var e;return null==(e=O.current)?void 0:e.emit()},emit:function(){var e;return null==(e=O.current)?void 0:e.emit()},scrollTo:function(e,t){var r;return null==(r=O.current)?void 0:r.scrollTo(e,t)},raf:function(e){var t;return null==(t=O.current)?void 0:t.raf(e)},__lenis:O.current}});var A=t.useCallback(function(e){d&&x.current&&M.current!==e&&(M.current=e,x.current.style.pointerEvents=e?"none":"auto")},[d,x,M]);return ie(function(){"scrollRestoration"in window.history&&(window.history.scrollRestoration=c)},[]),ie(function(){var e,t,r=document.documentElement,n=document.body,i=document.body.firstElementChild;return r.classList.toggle("ScrollRig-scrollHtml",v),n.classList.toggle("ScrollRig-scrollWrapper",v),v&&Object.assign(S,{smoothTouch:!0,wrapper:n,content:i}),O.current=new st(u({orientation:p?"horizontal":"vertical"},S)),R?e=R(function(e){var t;return null==(t=O.current)?void 0:t.raf(e)}):(t=requestAnimationFrame(function e(r){var n;null==(n=O.current)||n.raf(r),t=requestAnimationFrame(e)}),e=function(){return cancelAnimationFrame(t)}),function(){var t;e(),null==(t=O.current)||t.destroy()}},[]),ie(function(){var e,t,r=function(e){var t=e.scroll,r=e.limit,n=e.velocity,i=e.direction,o=e.progress,s=p?t:0;w&&(z.y=p?0:t,z.x=s,z.limit=r,z.velocity=n,z.direction=i,z.progress=o||0),Math.abs(n)>1.5&&A(!0),Math.abs(n)<1&&A(!1),y&&y({scroll:t,limit:r,velocity:n,direction:i,progress:o}),T()};return null==(e=O.current)||e.on("scroll",r),w&&(z.scrollDirection=p?"horizontal":"vertical",ae.setState({scrollTo:function(){var e;null==(e=O.current)||e.scrollTo.apply(e,[].slice.call(arguments))},onScroll:function(e){var t,r;return null==(t=O.current)||t.on("scroll",e),null==(r=O.current)||r.emit(),function(){var t;return null==(t=O.current)?void 0:t.off("scroll",e)}}}),ae.getState().scroll.y=window.scrollY,ae.getState().scroll.x=window.scrollX),null==(t=O.current)||t.emit(),function(){var e;null==(e=O.current)||e.off("scroll",r),ae.setState({onScroll:function(){return function(){}},scrollTo:function(){}})}},[]),ie(function(){var e=function(){return T()},t=function(){return A(!1)};return window.addEventListener("pointermove",t),window.addEventListener("pointerdown",t),window.addEventListener("wheel",e),function(){window.removeEventListener("pointermove",t),window.removeEventListener("pointerdown",t),window.removeEventListener("wheel",e)}},[]),t.useEffect(function(){w&&(document.documentElement.classList.toggle("js-smooth-scrollbar-enabled",o),document.documentElement.classList.toggle("js-smooth-scrollbar-disabled",!o),ae.setState({hasSmoothScrollbar:o}))},[o]),t.useEffect(function(){var e,t;a?null==(e=O.current)||e.stop():null==(t=O.current)||t.start()},[a]),n({ref:x})});t.forwardRef(function(e,t){return a.default.createElement(at,u({ref:t,invalidate:n.invalidate,addEffect:n.addEffect},e))});var lt=["el","children","material","scale","font","fontOffsetY","fontOffsetX","overrideEmissive","color"],ut=["el","scale","scrollState","vertexShader","fragmentShader","invalidateFrameLoop","widthSegments","heightSegments"],ct=t.forwardRef(function(e,i){var o=e.el,s=e.scale,l=e.scrollState,h=e.vertexShader,d=e.fragmentShader,f=e.invalidateFrameLoop,p=void 0!==f&&f,m=e.widthSegments,v=void 0===m?128:m,g=e.heightSegments,w=void 0===g?128:g,y=c(e,ut),b=t.useRef(null),S=t.useRef(null);t.useImperativeHandle(i,function(){return S.current});var E=n.useThree(),T=E.invalidate,R=E.gl,x=E.size,O=n.useThree(function(e){return e.viewport.dpr}),M=Pe().scroll,z=we().scaleMultiplier,A=function(e,i){var o,s,a={},l=a.initTexture,u=void 0===l||l,c=a.premultiplyAlpha,h=void 0===c?"default":c,d=n.useThree(function(e){return e.gl}),f=Oe(),p=ae(function(e){return e.debug}),m=t.useState(null==(o=e.current)?void 0:o.currentSrc),v=m[0],g=m[1];t.useEffect(function(){var t=e.current,r=function(){var t;g(null==(t=e.current)?void 0:t.currentSrc)};return null==t||t.addEventListener("load",r),function(){return null==t?void 0:t.removeEventListener("load",r)}},[e,v,g]);var w,y,b,S=((t,n,i)=>function(e,t,r=!1,n={}){for(const e of Qe)if(Ge(t,e.keys,e.equal)){if(r)return;if(Object.prototype.hasOwnProperty.call(e,"error"))throw e.error;if(Object.prototype.hasOwnProperty.call(e,"response"))return e.response;if(!r)throw e.promise}const i={keys:t,equal:n.equal,promise:e(...t).then(e=>i.response=e).then(()=>{n.lifespan&&n.lifespan>0&&setTimeout(()=>{const e=Qe.indexOf(i);-1!==e&&Qe.splice(e,1)},n.lifespan)}).catch(e=>i.error=e)};if(Qe.push(i),!r)throw i.promise}(function(){return r.DefaultLoadingManager.itemStart("waiting for DOM image"),new Promise(function(t){var n=e.current;function i(){t(null==n?void 0:n.currentSrc),r.DefaultLoadingManager.itemEnd("waiting for DOM image")}null==n||n.addEventListener("load",i,{once:!0}),null!=n&&n.complete&&(null==n||n.removeEventListener("load",i),i())})},n,!1,i))(0,[e,f,null==(s=e.current)?void 0:s.currentSrc,v],{equal:Je}),E=(w=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),b=(y=navigator.userAgent.indexOf("Firefox")>-1)?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1,"undefined"==typeof createImageBitmap||w||y&&b<98?r.TextureLoader:r.ImageBitmapLoader),T=n.useLoader(E,S,function(e){e instanceof r.ImageBitmapLoader&&(e.setOptions({colorSpaceConversion:"none",premultiplyAlpha:h,imageOrientation:"flipY"}),e.setRequestHeader({Accept:(Ke?"image/webp,":"")+"*/*"}))}),R=t.useMemo(function(){return T instanceof r.Texture?T:T instanceof ImageBitmap?new r.CanvasTexture(T):void 0},[T]);return t.useEffect(function(){u&&d.initTexture(R),p&&console.log("useImageAsTexture","initTexture()")},[d,R,u]),R}(o),k=t.useMemo(function(){return{u_color:{value:new r.Color("black")},u_time:{value:0},u_pixelRatio:{value:O},u_progress:{value:0},u_visibility:{value:0},u_viewport:{value:0},u_velocity:{value:0},u_res:{value:new r.Vector2},u_rect:{value:new r.Vector2},u_size:{value:new r.Vector2},u_texture:{value:null},u_loaded:{value:!1},u_scaleMultiplier:{value:z}}},[O]);t.useEffect(function(){A&&b.current&&(b.current.uniforms.u_texture.value=A,b.current.uniforms.u_size.value.set(A.image.width,A.image.height),b.current.uniforms.u_loaded.value=!0)},[A,R]),t.useEffect(function(){b.current&&(b.current.uniforms.u_res.value.set(x.width,x.height),b.current.uniforms.u_rect.value.set(null==s?void 0:s[0],null==s?void 0:s[1]))},[x,s]),n.useFrame(function(e,t){l.inViewport&&S.current&&b.current&&b.current.uniforms.u_loaded.value&&(b.current.uniforms.u_time.value+=t,b.current.uniforms.u_rect.value.set(S.current.scale.x,S.current.scale.y),b.current.uniforms.u_velocity.value=M.velocity,b.current.uniforms.u_progress.value=l.progress,b.current.uniforms.u_visibility.value=l.visibility,b.current.uniforms.u_viewport.value=l.viewport,p&&T())});var C=t.useMemo(function(){return[{vertexShader:h,fragmentShader:d}]},[h,d]);return a.default.createElement(a.default.Fragment,null,a.default.createElement("mesh",u({ref:S},y),a.default.createElement("planeGeometry",{attach:"geometry",args:[1,1,v,w]}),a.default.createElement("shaderMaterial",{ref:b,args:C,transparent:!0,uniforms:k})))}),ht=["children","speed"],dt=function(e){var r=e.children,i=e.scrollState,o=e.parallax,s=t.useRef(null),l=n.useThree(function(e){return e.size}),u=we().scaleMultiplier;return n.useFrame(function(){i.inViewport&&(s.current.position.y=o*(2*i.progress-1)*u*l.height)}),a.default.createElement("mesh",{ref:s},r)},ft=["scale"],pt=["children","track","stickyLerp","fillViewport"],mt=function(e){var r=e.children,i=e.childTop,o=e.childBottom,s=e.scrollState,l=e.parentScale,u=e.childScale,c=e.scaleMultiplier,h=e.priority,d=e.stickyLerp,f=void 0===d?1:d,p=t.useRef(null),m=n.useThree(function(e){return e.size});return n.useFrame(function(e,t){if(s.inViewport){var r=.5*l[1]-.5*u[1];p.current.position.y=function(e,t,r,n,i=60){return function(e,t,r){return e*(1-r)+t*r}(e,t,void 0===n?r:1-Math.pow(1-r,n/(1/i)))}(p.current.position.y,s.viewport+i/m.height*c<1?r:s.visibility-o/l[1]*c<1?-i+r-(s.viewport-1)*m.height*c:.5*-l[1]+.5*u[1],f,t)}},h),a.default.createElement("group",{ref:p},r)};e.ParallaxScrollScene=function(e){var t=e.children,r=e.speed,n=void 0===r?1:r,i=c(e,ht),o=n-1;return a.default.createElement(We,u({scissor:!1,inViewportMargin:200*Math.max(0,.5)+50+"%"},i),function(e){return a.default.createElement(dt,u({parallax:o},e),t(e))})},e.StickyScrollScene=function(e){var r=e.children,i=e.track,o=e.stickyLerp,s=e.fillViewport,l=c(e,pt),h=n.useThree(function(e){return e.size}),d=we().scaleMultiplier,f=t.useRef(i.current),p=t.useMemo(function(){var e=getComputedStyle(i.current);return"sticky"===e.position?f.current=i.current.parentElement:console.error("StickyScrollScene: tracked element is not position:sticky"),e},[i]);return a.default.createElement(We,u({track:f},l),function(e,t,r,n,i){var o=i.stickyLerp,s=i.fillViewport;return function(i){var l=i.scale,h=c(i,ft),d=Fe.vec3(parseFloat(r.width),parseFloat(r.height),1),f=parseFloat(r.top),p=t.height-f-d[1];return s&&(d=Fe.vec3(t.width,t.height,1),f=0,p=0),a.default.createElement(mt,u({parentScale:l,childScale:d.times(n),stickyLerp:o,childTop:f,childBottom:p,scaleMultiplier:n},h),e(u({scale:d.times(n)},h)))}}(r,h,p,d,{stickyLerp:o,fillViewport:s}))},e.WebGLImage=ct,e.WebGLText=function(e){var o=e.el,s=e.children,l=e.material,h=e.scale,d=e.font,f=e.fontOffsetY,p=void 0===f?0:f,m=e.fontOffsetX,v=void 0===m?0:m,g=e.overrideEmissive,w=void 0!==g&&g,y=e.color,b=c(e,lt),S=n.useThree().size,E=we().scaleMultiplier,T=t.useMemo(function(){if(!o.current)return{};var e=window.getComputedStyle(o.current);return{letterSpacing:(parseFloat(e.letterSpacing)||0)/parseFloat(e.fontSize),lineHeight:(parseFloat(e.lineHeight)||0)/parseFloat(e.fontSize),textColor:new r.Color(y||e.color).convertSRGBToLinear(),fontSize:parseFloat(e.fontSize)*E,textAlign:e.textAlign}},[o,S,h,y,E]),R=T.textColor,x=T.fontSize,O=T.textAlign,M=T.lineHeight,z=T.letterSpacing;t.useEffect(function(){l&&w&&(l.emissive=y)},[l,y,w]);var A=0;return"left"===O||"start"===O?A=-.5*h[0]:"right"!==O&&"end"!==O||(A=.5*h[0]),a.default.createElement(i.Text,u({fontSize:x,maxWidth:h?h[0]:S.width,lineHeight:M,textAlign:O,letterSpacing:z,overflowWrap:"break-word",font:d,color:R,anchorX:O,anchorY:"top",position:[A+x*v,(h?.5*h[1]:.5*S.height)+x*p,0],material:l},b),s)}});
//# sourceMappingURL=powerups.umd.js.map
