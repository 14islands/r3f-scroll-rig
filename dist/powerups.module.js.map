{"version":3,"file":"powerups.module.js","sources":["../../node_modules/@juggle/resize-observer/lib/utils/resizeObservers.js","../../node_modules/@juggle/resize-observer/lib/ResizeObserverBoxOptions.js","../../node_modules/@juggle/resize-observer/lib/algorithms/deliverResizeLoopError.js","../../node_modules/@juggle/resize-observer/lib/utils/freeze.js","../../node_modules/@juggle/resize-observer/lib/utils/queueMicroTask.js","../../node_modules/@juggle/resize-observer/lib/ResizeObserverSize.js","../../node_modules/@juggle/resize-observer/lib/DOMRectReadOnly.js","../../node_modules/@juggle/resize-observer/lib/utils/element.js","../../node_modules/@juggle/resize-observer/lib/utils/global.js","../../node_modules/@juggle/resize-observer/lib/algorithms/calculateBoxSize.js","../../node_modules/@juggle/resize-observer/lib/ResizeObserverEntry.js","../../node_modules/@juggle/resize-observer/lib/algorithms/calculateDepthForNode.js","../../node_modules/@juggle/resize-observer/lib/algorithms/broadcastActiveObservations.js","../../node_modules/@juggle/resize-observer/lib/algorithms/gatherActiveObservationsAtDepth.js","../../node_modules/@juggle/resize-observer/lib/utils/scheduler.js","../../node_modules/@juggle/resize-observer/lib/utils/queueResizeObserver.js","../../node_modules/@juggle/resize-observer/lib/utils/process.js","../../node_modules/@juggle/resize-observer/lib/algorithms/hasActiveObservations.js","../../node_modules/@juggle/resize-observer/lib/algorithms/hasSkippedObservations.js","../../node_modules/@juggle/resize-observer/lib/ResizeObservation.js","../../node_modules/@juggle/resize-observer/lib/ResizeObserverDetail.js","../../node_modules/@juggle/resize-observer/lib/ResizeObserverController.js","../../node_modules/@juggle/resize-observer/lib/ResizeObserver.js","../../node_modules/decode-uri-component/index.js","../../node_modules/split-on-first/index.js","../../node_modules/filter-obj/index.js","../../node_modules/query-string/index.js","../../node_modules/strict-uri-encode/index.js","../src/hooks/useIsomorphicLayoutEffect.ts","../../node_modules/zustand/esm/index.js","../src/config.ts","../src/store.ts","../src/components/PerspectiveCamera.tsx","../src/components/OrthographicCamera.tsx","../src/utils/helpers.ts","../src/renderer-api.ts","../src/hooks/useScrollRig.ts","../src/components/DebugMesh.tsx","../../node_modules/react-intersection-observer/react-intersection-observer.modern.mjs","../../node_modules/debounce/index.js","../src/hooks/useWindowSize.ts","../../node_modules/vecn/src/index.js","../src/utils/math.ts","../src/scrollbar/useScrollbar.ts","../src/hooks/useTracker.ts","../src/components/ScrollScene.tsx","../src/components/ViewportScrollScene.tsx","../../node_modules/suspend-react/dist/index.js","../src/components/UseCanvas.tsx","../src/hooks/useCanvas.ts","../../node_modules/supports-webp/index.js","../../node_modules/fast-deep-equal/index.js","../src/hooks/useImageAsTexture.ts","../../node_modules/@studio-freight/lenis/dist/lenis.modern.mjs","../src/scrollbar/SmoothScrollbar.tsx","../src/components/R3FSmoothScrollbar.tsx","../powerups/WebGLText.tsx","../powerups/WebGLImage.tsx","../powerups/ParallaxScrollScene.tsx","../powerups/StickyScrollScene.tsx","../../node_modules/@14islands/lerp/index.js","../../node_modules/lerp/index.js"],"sourcesContent":["var resizeObservers = [];\nexport { resizeObservers };\n","var ResizeObserverBoxOptions;\n(function (ResizeObserverBoxOptions) {\n    ResizeObserverBoxOptions[\"BORDER_BOX\"] = \"border-box\";\n    ResizeObserverBoxOptions[\"CONTENT_BOX\"] = \"content-box\";\n    ResizeObserverBoxOptions[\"DEVICE_PIXEL_CONTENT_BOX\"] = \"device-pixel-content-box\";\n})(ResizeObserverBoxOptions || (ResizeObserverBoxOptions = {}));\nexport { ResizeObserverBoxOptions };\n","var msg = 'ResizeObserver loop completed with undelivered notifications.';\nvar deliverResizeLoopError = function () {\n    var event;\n    if (typeof ErrorEvent === 'function') {\n        event = new ErrorEvent('error', {\n            message: msg\n        });\n    }\n    else {\n        event = document.createEvent('Event');\n        event.initEvent('error', false, false);\n        event.message = msg;\n    }\n    window.dispatchEvent(event);\n};\nexport { deliverResizeLoopError };\n","export var freeze = function (obj) { return Object.freeze(obj); };\n","var trigger;\nvar callbacks = [];\nvar notify = function () { return callbacks.splice(0).forEach(function (cb) { return cb(); }); };\nvar queueMicroTask = function (callback) {\n    if (!trigger) {\n        var toggle_1 = 0;\n        var el_1 = document.createTextNode('');\n        var config = { characterData: true };\n        new MutationObserver(function () { return notify(); }).observe(el_1, config);\n        trigger = function () { el_1.textContent = \"\".concat(toggle_1 ? toggle_1-- : toggle_1++); };\n    }\n    callbacks.push(callback);\n    trigger();\n};\nexport { queueMicroTask };\n","import { freeze } from './utils/freeze';\nvar ResizeObserverSize = (function () {\n    function ResizeObserverSize(inlineSize, blockSize) {\n        this.inlineSize = inlineSize;\n        this.blockSize = blockSize;\n        freeze(this);\n    }\n    return ResizeObserverSize;\n}());\nexport { ResizeObserverSize };\n","import { freeze } from './utils/freeze';\nvar DOMRectReadOnly = (function () {\n    function DOMRectReadOnly(x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this.top = this.y;\n        this.left = this.x;\n        this.bottom = this.top + this.height;\n        this.right = this.left + this.width;\n        return freeze(this);\n    }\n    DOMRectReadOnly.prototype.toJSON = function () {\n        var _a = this, x = _a.x, y = _a.y, top = _a.top, right = _a.right, bottom = _a.bottom, left = _a.left, width = _a.width, height = _a.height;\n        return { x: x, y: y, top: top, right: right, bottom: bottom, left: left, width: width, height: height };\n    };\n    DOMRectReadOnly.fromRect = function (rectangle) {\n        return new DOMRectReadOnly(rectangle.x, rectangle.y, rectangle.width, rectangle.height);\n    };\n    return DOMRectReadOnly;\n}());\nexport { DOMRectReadOnly };\n","var isSVG = function (target) { return target instanceof SVGElement && 'getBBox' in target; };\nvar isHidden = function (target) {\n    if (isSVG(target)) {\n        var _a = target.getBBox(), width = _a.width, height = _a.height;\n        return !width && !height;\n    }\n    var _b = target, offsetWidth = _b.offsetWidth, offsetHeight = _b.offsetHeight;\n    return !(offsetWidth || offsetHeight || target.getClientRects().length);\n};\nvar isElement = function (obj) {\n    var _a;\n    if (obj instanceof Element) {\n        return true;\n    }\n    var scope = (_a = obj === null || obj === void 0 ? void 0 : obj.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView;\n    return !!(scope && obj instanceof scope.Element);\n};\nvar isReplacedElement = function (target) {\n    switch (target.tagName) {\n        case 'INPUT':\n            if (target.type !== 'image') {\n                break;\n            }\n        case 'VIDEO':\n        case 'AUDIO':\n        case 'EMBED':\n        case 'OBJECT':\n        case 'CANVAS':\n        case 'IFRAME':\n        case 'IMG':\n            return true;\n    }\n    return false;\n};\nexport { isSVG, isHidden, isElement, isReplacedElement };\n","export var global = typeof window !== 'undefined' ? window : {};\n","import { ResizeObserverBoxOptions } from '../ResizeObserverBoxOptions';\nimport { ResizeObserverSize } from '../ResizeObserverSize';\nimport { DOMRectReadOnly } from '../DOMRectReadOnly';\nimport { isSVG, isHidden } from '../utils/element';\nimport { freeze } from '../utils/freeze';\nimport { global } from '../utils/global';\nvar cache = new WeakMap();\nvar scrollRegexp = /auto|scroll/;\nvar verticalRegexp = /^tb|vertical/;\nvar IE = (/msie|trident/i).test(global.navigator && global.navigator.userAgent);\nvar parseDimension = function (pixel) { return parseFloat(pixel || '0'); };\nvar size = function (inlineSize, blockSize, switchSizes) {\n    if (inlineSize === void 0) { inlineSize = 0; }\n    if (blockSize === void 0) { blockSize = 0; }\n    if (switchSizes === void 0) { switchSizes = false; }\n    return new ResizeObserverSize((switchSizes ? blockSize : inlineSize) || 0, (switchSizes ? inlineSize : blockSize) || 0);\n};\nvar zeroBoxes = freeze({\n    devicePixelContentBoxSize: size(),\n    borderBoxSize: size(),\n    contentBoxSize: size(),\n    contentRect: new DOMRectReadOnly(0, 0, 0, 0)\n});\nvar calculateBoxSizes = function (target, forceRecalculation) {\n    if (forceRecalculation === void 0) { forceRecalculation = false; }\n    if (cache.has(target) && !forceRecalculation) {\n        return cache.get(target);\n    }\n    if (isHidden(target)) {\n        cache.set(target, zeroBoxes);\n        return zeroBoxes;\n    }\n    var cs = getComputedStyle(target);\n    var svg = isSVG(target) && target.ownerSVGElement && target.getBBox();\n    var removePadding = !IE && cs.boxSizing === 'border-box';\n    var switchSizes = verticalRegexp.test(cs.writingMode || '');\n    var canScrollVertically = !svg && scrollRegexp.test(cs.overflowY || '');\n    var canScrollHorizontally = !svg && scrollRegexp.test(cs.overflowX || '');\n    var paddingTop = svg ? 0 : parseDimension(cs.paddingTop);\n    var paddingRight = svg ? 0 : parseDimension(cs.paddingRight);\n    var paddingBottom = svg ? 0 : parseDimension(cs.paddingBottom);\n    var paddingLeft = svg ? 0 : parseDimension(cs.paddingLeft);\n    var borderTop = svg ? 0 : parseDimension(cs.borderTopWidth);\n    var borderRight = svg ? 0 : parseDimension(cs.borderRightWidth);\n    var borderBottom = svg ? 0 : parseDimension(cs.borderBottomWidth);\n    var borderLeft = svg ? 0 : parseDimension(cs.borderLeftWidth);\n    var horizontalPadding = paddingLeft + paddingRight;\n    var verticalPadding = paddingTop + paddingBottom;\n    var horizontalBorderArea = borderLeft + borderRight;\n    var verticalBorderArea = borderTop + borderBottom;\n    var horizontalScrollbarThickness = !canScrollHorizontally ? 0 : target.offsetHeight - verticalBorderArea - target.clientHeight;\n    var verticalScrollbarThickness = !canScrollVertically ? 0 : target.offsetWidth - horizontalBorderArea - target.clientWidth;\n    var widthReduction = removePadding ? horizontalPadding + horizontalBorderArea : 0;\n    var heightReduction = removePadding ? verticalPadding + verticalBorderArea : 0;\n    var contentWidth = svg ? svg.width : parseDimension(cs.width) - widthReduction - verticalScrollbarThickness;\n    var contentHeight = svg ? svg.height : parseDimension(cs.height) - heightReduction - horizontalScrollbarThickness;\n    var borderBoxWidth = contentWidth + horizontalPadding + verticalScrollbarThickness + horizontalBorderArea;\n    var borderBoxHeight = contentHeight + verticalPadding + horizontalScrollbarThickness + verticalBorderArea;\n    var boxes = freeze({\n        devicePixelContentBoxSize: size(Math.round(contentWidth * devicePixelRatio), Math.round(contentHeight * devicePixelRatio), switchSizes),\n        borderBoxSize: size(borderBoxWidth, borderBoxHeight, switchSizes),\n        contentBoxSize: size(contentWidth, contentHeight, switchSizes),\n        contentRect: new DOMRectReadOnly(paddingLeft, paddingTop, contentWidth, contentHeight)\n    });\n    cache.set(target, boxes);\n    return boxes;\n};\nvar calculateBoxSize = function (target, observedBox, forceRecalculation) {\n    var _a = calculateBoxSizes(target, forceRecalculation), borderBoxSize = _a.borderBoxSize, contentBoxSize = _a.contentBoxSize, devicePixelContentBoxSize = _a.devicePixelContentBoxSize;\n    switch (observedBox) {\n        case ResizeObserverBoxOptions.DEVICE_PIXEL_CONTENT_BOX:\n            return devicePixelContentBoxSize;\n        case ResizeObserverBoxOptions.BORDER_BOX:\n            return borderBoxSize;\n        default:\n            return contentBoxSize;\n    }\n};\nexport { calculateBoxSize, calculateBoxSizes };\n","import { calculateBoxSizes } from './algorithms/calculateBoxSize';\nimport { freeze } from './utils/freeze';\nvar ResizeObserverEntry = (function () {\n    function ResizeObserverEntry(target) {\n        var boxes = calculateBoxSizes(target);\n        this.target = target;\n        this.contentRect = boxes.contentRect;\n        this.borderBoxSize = freeze([boxes.borderBoxSize]);\n        this.contentBoxSize = freeze([boxes.contentBoxSize]);\n        this.devicePixelContentBoxSize = freeze([boxes.devicePixelContentBoxSize]);\n    }\n    return ResizeObserverEntry;\n}());\nexport { ResizeObserverEntry };\n","import { isHidden } from '../utils/element';\nvar calculateDepthForNode = function (node) {\n    if (isHidden(node)) {\n        return Infinity;\n    }\n    var depth = 0;\n    var parent = node.parentNode;\n    while (parent) {\n        depth += 1;\n        parent = parent.parentNode;\n    }\n    return depth;\n};\nexport { calculateDepthForNode };\n","import { resizeObservers } from '../utils/resizeObservers';\nimport { ResizeObserverEntry } from '../ResizeObserverEntry';\nimport { calculateDepthForNode } from './calculateDepthForNode';\nimport { calculateBoxSize } from './calculateBoxSize';\nvar broadcastActiveObservations = function () {\n    var shallowestDepth = Infinity;\n    var callbacks = [];\n    resizeObservers.forEach(function processObserver(ro) {\n        if (ro.activeTargets.length === 0) {\n            return;\n        }\n        var entries = [];\n        ro.activeTargets.forEach(function processTarget(ot) {\n            var entry = new ResizeObserverEntry(ot.target);\n            var targetDepth = calculateDepthForNode(ot.target);\n            entries.push(entry);\n            ot.lastReportedSize = calculateBoxSize(ot.target, ot.observedBox);\n            if (targetDepth < shallowestDepth) {\n                shallowestDepth = targetDepth;\n            }\n        });\n        callbacks.push(function resizeObserverCallback() {\n            ro.callback.call(ro.observer, entries, ro.observer);\n        });\n        ro.activeTargets.splice(0, ro.activeTargets.length);\n    });\n    for (var _i = 0, callbacks_1 = callbacks; _i < callbacks_1.length; _i++) {\n        var callback = callbacks_1[_i];\n        callback();\n    }\n    return shallowestDepth;\n};\nexport { broadcastActiveObservations };\n","import { resizeObservers } from '../utils/resizeObservers';\nimport { calculateDepthForNode } from './calculateDepthForNode';\nvar gatherActiveObservationsAtDepth = function (depth) {\n    resizeObservers.forEach(function processObserver(ro) {\n        ro.activeTargets.splice(0, ro.activeTargets.length);\n        ro.skippedTargets.splice(0, ro.skippedTargets.length);\n        ro.observationTargets.forEach(function processTarget(ot) {\n            if (ot.isActive()) {\n                if (calculateDepthForNode(ot.target) > depth) {\n                    ro.activeTargets.push(ot);\n                }\n                else {\n                    ro.skippedTargets.push(ot);\n                }\n            }\n        });\n    });\n};\nexport { gatherActiveObservationsAtDepth };\n","import { process } from './process';\nimport { global } from './global';\nimport { queueResizeObserver } from './queueResizeObserver';\nvar watching = 0;\nvar isWatching = function () { return !!watching; };\nvar CATCH_PERIOD = 250;\nvar observerConfig = { attributes: true, characterData: true, childList: true, subtree: true };\nvar events = [\n    'resize',\n    'load',\n    'transitionend',\n    'animationend',\n    'animationstart',\n    'animationiteration',\n    'keyup',\n    'keydown',\n    'mouseup',\n    'mousedown',\n    'mouseover',\n    'mouseout',\n    'blur',\n    'focus'\n];\nvar time = function (timeout) {\n    if (timeout === void 0) { timeout = 0; }\n    return Date.now() + timeout;\n};\nvar scheduled = false;\nvar Scheduler = (function () {\n    function Scheduler() {\n        var _this = this;\n        this.stopped = true;\n        this.listener = function () { return _this.schedule(); };\n    }\n    Scheduler.prototype.run = function (timeout) {\n        var _this = this;\n        if (timeout === void 0) { timeout = CATCH_PERIOD; }\n        if (scheduled) {\n            return;\n        }\n        scheduled = true;\n        var until = time(timeout);\n        queueResizeObserver(function () {\n            var elementsHaveResized = false;\n            try {\n                elementsHaveResized = process();\n            }\n            finally {\n                scheduled = false;\n                timeout = until - time();\n                if (!isWatching()) {\n                    return;\n                }\n                if (elementsHaveResized) {\n                    _this.run(1000);\n                }\n                else if (timeout > 0) {\n                    _this.run(timeout);\n                }\n                else {\n                    _this.start();\n                }\n            }\n        });\n    };\n    Scheduler.prototype.schedule = function () {\n        this.stop();\n        this.run();\n    };\n    Scheduler.prototype.observe = function () {\n        var _this = this;\n        var cb = function () { return _this.observer && _this.observer.observe(document.body, observerConfig); };\n        document.body ? cb() : global.addEventListener('DOMContentLoaded', cb);\n    };\n    Scheduler.prototype.start = function () {\n        var _this = this;\n        if (this.stopped) {\n            this.stopped = false;\n            this.observer = new MutationObserver(this.listener);\n            this.observe();\n            events.forEach(function (name) { return global.addEventListener(name, _this.listener, true); });\n        }\n    };\n    Scheduler.prototype.stop = function () {\n        var _this = this;\n        if (!this.stopped) {\n            this.observer && this.observer.disconnect();\n            events.forEach(function (name) { return global.removeEventListener(name, _this.listener, true); });\n            this.stopped = true;\n        }\n    };\n    return Scheduler;\n}());\nvar scheduler = new Scheduler();\nvar updateCount = function (n) {\n    !watching && n > 0 && scheduler.start();\n    watching += n;\n    !watching && scheduler.stop();\n};\nexport { scheduler, updateCount };\n","import { queueMicroTask } from './queueMicroTask';\nvar queueResizeObserver = function (cb) {\n    queueMicroTask(function ResizeObserver() {\n        requestAnimationFrame(cb);\n    });\n};\nexport { queueResizeObserver };\n","import { hasActiveObservations } from '../algorithms/hasActiveObservations';\nimport { hasSkippedObservations } from '../algorithms/hasSkippedObservations';\nimport { deliverResizeLoopError } from '../algorithms/deliverResizeLoopError';\nimport { broadcastActiveObservations } from '../algorithms/broadcastActiveObservations';\nimport { gatherActiveObservationsAtDepth } from '../algorithms/gatherActiveObservationsAtDepth';\nvar process = function () {\n    var depth = 0;\n    gatherActiveObservationsAtDepth(depth);\n    while (hasActiveObservations()) {\n        depth = broadcastActiveObservations();\n        gatherActiveObservationsAtDepth(depth);\n    }\n    if (hasSkippedObservations()) {\n        deliverResizeLoopError();\n    }\n    return depth > 0;\n};\nexport { process };\n","import { resizeObservers } from '../utils/resizeObservers';\nvar hasActiveObservations = function () {\n    return resizeObservers.some(function (ro) { return ro.activeTargets.length > 0; });\n};\nexport { hasActiveObservations };\n","import { resizeObservers } from '../utils/resizeObservers';\nvar hasSkippedObservations = function () {\n    return resizeObservers.some(function (ro) { return ro.skippedTargets.length > 0; });\n};\nexport { hasSkippedObservations };\n","import { ResizeObserverBoxOptions } from './ResizeObserverBoxOptions';\nimport { calculateBoxSize } from './algorithms/calculateBoxSize';\nimport { isSVG, isReplacedElement } from './utils/element';\nvar skipNotifyOnElement = function (target) {\n    return !isSVG(target)\n        && !isReplacedElement(target)\n        && getComputedStyle(target).display === 'inline';\n};\nvar ResizeObservation = (function () {\n    function ResizeObservation(target, observedBox) {\n        this.target = target;\n        this.observedBox = observedBox || ResizeObserverBoxOptions.CONTENT_BOX;\n        this.lastReportedSize = {\n            inlineSize: 0,\n            blockSize: 0\n        };\n    }\n    ResizeObservation.prototype.isActive = function () {\n        var size = calculateBoxSize(this.target, this.observedBox, true);\n        if (skipNotifyOnElement(this.target)) {\n            this.lastReportedSize = size;\n        }\n        if (this.lastReportedSize.inlineSize !== size.inlineSize\n            || this.lastReportedSize.blockSize !== size.blockSize) {\n            return true;\n        }\n        return false;\n    };\n    return ResizeObservation;\n}());\nexport { ResizeObservation };\n","var ResizeObserverDetail = (function () {\n    function ResizeObserverDetail(resizeObserver, callback) {\n        this.activeTargets = [];\n        this.skippedTargets = [];\n        this.observationTargets = [];\n        this.observer = resizeObserver;\n        this.callback = callback;\n    }\n    return ResizeObserverDetail;\n}());\nexport { ResizeObserverDetail };\n","import { scheduler, updateCount } from './utils/scheduler';\nimport { ResizeObservation } from './ResizeObservation';\nimport { ResizeObserverDetail } from './ResizeObserverDetail';\nimport { resizeObservers } from './utils/resizeObservers';\nvar observerMap = new WeakMap();\nvar getObservationIndex = function (observationTargets, target) {\n    for (var i = 0; i < observationTargets.length; i += 1) {\n        if (observationTargets[i].target === target) {\n            return i;\n        }\n    }\n    return -1;\n};\nvar ResizeObserverController = (function () {\n    function ResizeObserverController() {\n    }\n    ResizeObserverController.connect = function (resizeObserver, callback) {\n        var detail = new ResizeObserverDetail(resizeObserver, callback);\n        observerMap.set(resizeObserver, detail);\n    };\n    ResizeObserverController.observe = function (resizeObserver, target, options) {\n        var detail = observerMap.get(resizeObserver);\n        var firstObservation = detail.observationTargets.length === 0;\n        if (getObservationIndex(detail.observationTargets, target) < 0) {\n            firstObservation && resizeObservers.push(detail);\n            detail.observationTargets.push(new ResizeObservation(target, options && options.box));\n            updateCount(1);\n            scheduler.schedule();\n        }\n    };\n    ResizeObserverController.unobserve = function (resizeObserver, target) {\n        var detail = observerMap.get(resizeObserver);\n        var index = getObservationIndex(detail.observationTargets, target);\n        var lastObservation = detail.observationTargets.length === 1;\n        if (index >= 0) {\n            lastObservation && resizeObservers.splice(resizeObservers.indexOf(detail), 1);\n            detail.observationTargets.splice(index, 1);\n            updateCount(-1);\n        }\n    };\n    ResizeObserverController.disconnect = function (resizeObserver) {\n        var _this = this;\n        var detail = observerMap.get(resizeObserver);\n        detail.observationTargets.slice().forEach(function (ot) { return _this.unobserve(resizeObserver, ot.target); });\n        detail.activeTargets.splice(0, detail.activeTargets.length);\n    };\n    return ResizeObserverController;\n}());\nexport { ResizeObserverController };\n","import { ResizeObserverController } from './ResizeObserverController';\nimport { isElement } from './utils/element';\nvar ResizeObserver = (function () {\n    function ResizeObserver(callback) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (typeof callback !== 'function') {\n            throw new TypeError(\"Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.\");\n        }\n        ResizeObserverController.connect(this, callback);\n    }\n    ResizeObserver.prototype.observe = function (target, options) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (!isElement(target)) {\n            throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n        }\n        ResizeObserverController.observe(this, target, options);\n    };\n    ResizeObserver.prototype.unobserve = function (target) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (!isElement(target)) {\n            throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n        }\n        ResizeObserverController.unobserve(this, target);\n    };\n    ResizeObserver.prototype.disconnect = function () {\n        ResizeObserverController.disconnect(this);\n    };\n    ResizeObserver.toString = function () {\n        return 'function ResizeObserver () { [polyfill code] }';\n    };\n    return ResizeObserver;\n}());\nexport { ResizeObserver };\n","'use strict';\nvar token = '%[a-f0-9]{2}';\nvar singleMatcher = new RegExp(token, 'gi');\nvar multiMatcher = new RegExp('(' + token + ')+', 'gi');\n\nfunction decodeComponents(components, split) {\n\ttry {\n\t\t// Try to decode the entire string first\n\t\treturn decodeURIComponent(components.join(''));\n\t} catch (err) {\n\t\t// Do nothing\n\t}\n\n\tif (components.length === 1) {\n\t\treturn components;\n\t}\n\n\tsplit = split || 1;\n\n\t// Split the array in 2 parts\n\tvar left = components.slice(0, split);\n\tvar right = components.slice(split);\n\n\treturn Array.prototype.concat.call([], decodeComponents(left), decodeComponents(right));\n}\n\nfunction decode(input) {\n\ttry {\n\t\treturn decodeURIComponent(input);\n\t} catch (err) {\n\t\tvar tokens = input.match(singleMatcher);\n\n\t\tfor (var i = 1; i < tokens.length; i++) {\n\t\t\tinput = decodeComponents(tokens, i).join('');\n\n\t\t\ttokens = input.match(singleMatcher);\n\t\t}\n\n\t\treturn input;\n\t}\n}\n\nfunction customDecodeURIComponent(input) {\n\t// Keep track of all the replacements and prefill the map with the `BOM`\n\tvar replaceMap = {\n\t\t'%FE%FF': '\\uFFFD\\uFFFD',\n\t\t'%FF%FE': '\\uFFFD\\uFFFD'\n\t};\n\n\tvar match = multiMatcher.exec(input);\n\twhile (match) {\n\t\ttry {\n\t\t\t// Decode as big chunks as possible\n\t\t\treplaceMap[match[0]] = decodeURIComponent(match[0]);\n\t\t} catch (err) {\n\t\t\tvar result = decode(match[0]);\n\n\t\t\tif (result !== match[0]) {\n\t\t\t\treplaceMap[match[0]] = result;\n\t\t\t}\n\t\t}\n\n\t\tmatch = multiMatcher.exec(input);\n\t}\n\n\t// Add `%C2` at the end of the map to make sure it does not replace the combinator before everything else\n\treplaceMap['%C2'] = '\\uFFFD';\n\n\tvar entries = Object.keys(replaceMap);\n\n\tfor (var i = 0; i < entries.length; i++) {\n\t\t// Replace all decoded components\n\t\tvar key = entries[i];\n\t\tinput = input.replace(new RegExp(key, 'g'), replaceMap[key]);\n\t}\n\n\treturn input;\n}\n\nmodule.exports = function (encodedURI) {\n\tif (typeof encodedURI !== 'string') {\n\t\tthrow new TypeError('Expected `encodedURI` to be of type `string`, got `' + typeof encodedURI + '`');\n\t}\n\n\ttry {\n\t\tencodedURI = encodedURI.replace(/\\+/g, ' ');\n\n\t\t// Try the built in decoder first\n\t\treturn decodeURIComponent(encodedURI);\n\t} catch (err) {\n\t\t// Fallback to a more advanced decoder\n\t\treturn customDecodeURIComponent(encodedURI);\n\t}\n};\n","'use strict';\n\nmodule.exports = (string, separator) => {\n\tif (!(typeof string === 'string' && typeof separator === 'string')) {\n\t\tthrow new TypeError('Expected the arguments to be of type `string`');\n\t}\n\n\tif (separator === '') {\n\t\treturn [string];\n\t}\n\n\tconst separatorIndex = string.indexOf(separator);\n\n\tif (separatorIndex === -1) {\n\t\treturn [string];\n\t}\n\n\treturn [\n\t\tstring.slice(0, separatorIndex),\n\t\tstring.slice(separatorIndex + separator.length)\n\t];\n};\n","'use strict';\nmodule.exports = function (obj, predicate) {\n\tvar ret = {};\n\tvar keys = Object.keys(obj);\n\tvar isArr = Array.isArray(predicate);\n\n\tfor (var i = 0; i < keys.length; i++) {\n\t\tvar key = keys[i];\n\t\tvar val = obj[key];\n\n\t\tif (isArr ? predicate.indexOf(key) !== -1 : predicate(key, val, obj)) {\n\t\t\tret[key] = val;\n\t\t}\n\t}\n\n\treturn ret;\n};\n","'use strict';\nconst strictUriEncode = require('strict-uri-encode');\nconst decodeComponent = require('decode-uri-component');\nconst splitOnFirst = require('split-on-first');\nconst filterObject = require('filter-obj');\n\nconst isNullOrUndefined = value => value === null || value === undefined;\n\nfunction encoderForArrayFormat(options) {\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tconst index = result.length;\n\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), '[', index, ']'].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\t...result,\n\t\t\t\t\t[encode(key, options), '[', encode(index, options), ']=', encode(value, options)].join('')\n\t\t\t\t];\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), '[]'].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), '[]=', encode(value, options)].join('')];\n\t\t\t};\n\n\t\tcase 'comma':\n\t\tcase 'separator':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (value === null || value === undefined || value.length === 0) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (result.length === 0) {\n\t\t\t\t\treturn [[encode(key, options), '=', encode(value, options)].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [[result, encode(value, options)].join(options.arrayFormatSeparator)];\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, encode(key, options)];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), '=', encode(value, options)].join('')];\n\t\t\t};\n\t}\n}\n\nfunction parserForArrayFormat(options) {\n\tlet result;\n\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /\\[(\\d*)\\]$/.exec(key);\n\n\t\t\t\tkey = key.replace(/\\[\\d*\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /(\\[\\])$/.exec(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\n\t\tcase 'comma':\n\t\tcase 'separator':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tconst isArray = typeof value === 'string' && value.includes(options.arrayFormatSeparator);\n\t\t\t\tconst isEncodedArray = (typeof value === 'string' && !isArray && decode(value, options).includes(options.arrayFormatSeparator));\n\t\t\t\tvalue = isEncodedArray ? decode(value, options) : value;\n\t\t\t\tconst newValue = isArray || isEncodedArray ? value.split(options.arrayFormatSeparator).map(item => decode(item, options)) : value === null ? value : decode(value, options);\n\t\t\t\taccumulator[key] = newValue;\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t}\n}\n\nfunction validateArrayFormatSeparator(value) {\n\tif (typeof value !== 'string' || value.length !== 1) {\n\t\tthrow new TypeError('arrayFormatSeparator must be single character string');\n\t}\n}\n\nfunction encode(value, options) {\n\tif (options.encode) {\n\t\treturn options.strict ? strictUriEncode(value) : encodeURIComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction decode(value, options) {\n\tif (options.decode) {\n\t\treturn decodeComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction keysSorter(input) {\n\tif (Array.isArray(input)) {\n\t\treturn input.sort();\n\t}\n\n\tif (typeof input === 'object') {\n\t\treturn keysSorter(Object.keys(input))\n\t\t\t.sort((a, b) => Number(a) - Number(b))\n\t\t\t.map(key => input[key]);\n\t}\n\n\treturn input;\n}\n\nfunction removeHash(input) {\n\tconst hashStart = input.indexOf('#');\n\tif (hashStart !== -1) {\n\t\tinput = input.slice(0, hashStart);\n\t}\n\n\treturn input;\n}\n\nfunction getHash(url) {\n\tlet hash = '';\n\tconst hashStart = url.indexOf('#');\n\tif (hashStart !== -1) {\n\t\thash = url.slice(hashStart);\n\t}\n\n\treturn hash;\n}\n\nfunction extract(input) {\n\tinput = removeHash(input);\n\tconst queryStart = input.indexOf('?');\n\tif (queryStart === -1) {\n\t\treturn '';\n\t}\n\n\treturn input.slice(queryStart + 1);\n}\n\nfunction parseValue(value, options) {\n\tif (options.parseNumbers && !Number.isNaN(Number(value)) && (typeof value === 'string' && value.trim() !== '')) {\n\t\tvalue = Number(value);\n\t} else if (options.parseBooleans && value !== null && (value.toLowerCase() === 'true' || value.toLowerCase() === 'false')) {\n\t\tvalue = value.toLowerCase() === 'true';\n\t}\n\n\treturn value;\n}\n\nfunction parse(query, options) {\n\toptions = Object.assign({\n\t\tdecode: true,\n\t\tsort: true,\n\t\tarrayFormat: 'none',\n\t\tarrayFormatSeparator: ',',\n\t\tparseNumbers: false,\n\t\tparseBooleans: false\n\t}, options);\n\n\tvalidateArrayFormatSeparator(options.arrayFormatSeparator);\n\n\tconst formatter = parserForArrayFormat(options);\n\n\t// Create an object with no prototype\n\tconst ret = Object.create(null);\n\n\tif (typeof query !== 'string') {\n\t\treturn ret;\n\t}\n\n\tquery = query.trim().replace(/^[?#&]/, '');\n\n\tif (!query) {\n\t\treturn ret;\n\t}\n\n\tfor (const param of query.split('&')) {\n\t\tif (param === '') {\n\t\t\tcontinue;\n\t\t}\n\n\t\tlet [key, value] = splitOnFirst(options.decode ? param.replace(/\\+/g, ' ') : param, '=');\n\n\t\t// Missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tvalue = value === undefined ? null : ['comma', 'separator'].includes(options.arrayFormat) ? value : decode(value, options);\n\t\tformatter(decode(key, options), value, ret);\n\t}\n\n\tfor (const key of Object.keys(ret)) {\n\t\tconst value = ret[key];\n\t\tif (typeof value === 'object' && value !== null) {\n\t\t\tfor (const k of Object.keys(value)) {\n\t\t\t\tvalue[k] = parseValue(value[k], options);\n\t\t\t}\n\t\t} else {\n\t\t\tret[key] = parseValue(value, options);\n\t\t}\n\t}\n\n\tif (options.sort === false) {\n\t\treturn ret;\n\t}\n\n\treturn (options.sort === true ? Object.keys(ret).sort() : Object.keys(ret).sort(options.sort)).reduce((result, key) => {\n\t\tconst value = ret[key];\n\t\tif (Boolean(value) && typeof value === 'object' && !Array.isArray(value)) {\n\t\t\t// Sort object keys, not values\n\t\t\tresult[key] = keysSorter(value);\n\t\t} else {\n\t\t\tresult[key] = value;\n\t\t}\n\n\t\treturn result;\n\t}, Object.create(null));\n}\n\nexports.extract = extract;\nexports.parse = parse;\n\nexports.stringify = (object, options) => {\n\tif (!object) {\n\t\treturn '';\n\t}\n\n\toptions = Object.assign({\n\t\tencode: true,\n\t\tstrict: true,\n\t\tarrayFormat: 'none',\n\t\tarrayFormatSeparator: ','\n\t}, options);\n\n\tvalidateArrayFormatSeparator(options.arrayFormatSeparator);\n\n\tconst shouldFilter = key => (\n\t\t(options.skipNull && isNullOrUndefined(object[key])) ||\n\t\t(options.skipEmptyString && object[key] === '')\n\t);\n\n\tconst formatter = encoderForArrayFormat(options);\n\n\tconst objectCopy = {};\n\n\tfor (const key of Object.keys(object)) {\n\t\tif (!shouldFilter(key)) {\n\t\t\tobjectCopy[key] = object[key];\n\t\t}\n\t}\n\n\tconst keys = Object.keys(objectCopy);\n\n\tif (options.sort !== false) {\n\t\tkeys.sort(options.sort);\n\t}\n\n\treturn keys.map(key => {\n\t\tconst value = object[key];\n\n\t\tif (value === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (value === null) {\n\t\t\treturn encode(key, options);\n\t\t}\n\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value\n\t\t\t\t.reduce(formatter(key), [])\n\t\t\t\t.join('&');\n\t\t}\n\n\t\treturn encode(key, options) + '=' + encode(value, options);\n\t}).filter(x => x.length > 0).join('&');\n};\n\nexports.parseUrl = (url, options) => {\n\toptions = Object.assign({\n\t\tdecode: true\n\t}, options);\n\n\tconst [url_, hash] = splitOnFirst(url, '#');\n\n\treturn Object.assign(\n\t\t{\n\t\t\turl: url_.split('?')[0] || '',\n\t\t\tquery: parse(extract(url), options)\n\t\t},\n\t\toptions && options.parseFragmentIdentifier && hash ? {fragmentIdentifier: decode(hash, options)} : {}\n\t);\n};\n\nexports.stringifyUrl = (object, options) => {\n\toptions = Object.assign({\n\t\tencode: true,\n\t\tstrict: true\n\t}, options);\n\n\tconst url = removeHash(object.url).split('?')[0] || '';\n\tconst queryFromUrl = exports.extract(object.url);\n\tconst parsedQueryFromUrl = exports.parse(queryFromUrl, {sort: false});\n\n\tconst query = Object.assign(parsedQueryFromUrl, object.query);\n\tlet queryString = exports.stringify(query, options);\n\tif (queryString) {\n\t\tqueryString = `?${queryString}`;\n\t}\n\n\tlet hash = getHash(object.url);\n\tif (object.fragmentIdentifier) {\n\t\thash = `#${encode(object.fragmentIdentifier, options)}`;\n\t}\n\n\treturn `${url}${queryString}${hash}`;\n};\n\nexports.pick = (input, filter, options) => {\n\toptions = Object.assign({\n\t\tparseFragmentIdentifier: true\n\t}, options);\n\n\tconst {url, query, fragmentIdentifier} = exports.parseUrl(input, options);\n\treturn exports.stringifyUrl({\n\t\turl,\n\t\tquery: filterObject(query, filter),\n\t\tfragmentIdentifier\n\t}, options);\n};\n\nexports.exclude = (input, filter, options) => {\n\tconst exclusionFilter = Array.isArray(filter) ? key => !filter.includes(key) : (key, value) => !filter(key, value);\n\n\treturn exports.pick(input, exclusionFilter, options);\n};\n","'use strict';\nmodule.exports = str => encodeURIComponent(str).replace(/[!'()*]/g, x => `%${x.charCodeAt(0).toString(16).toUpperCase()}`);\n","import { useEffect, useLayoutEffect as vanillaUseLayoutEffect } from 'react'\n\nexport const isBrowser = typeof window !== 'undefined'\n\nexport const useLayoutEffect = isBrowser ? vanillaUseLayoutEffect : useEffect\n","import { useReducer, useRef, useDebugValue, useEffect, useLayoutEffect } from 'react';\n\nfunction createStore(createState) {\n  let state;\n  const listeners = /* @__PURE__ */ new Set();\n  const setState = (partial, replace) => {\n    const nextState = typeof partial === \"function\" ? partial(state) : partial;\n    if (nextState !== state) {\n      const previousState = state;\n      state = replace ? nextState : Object.assign({}, state, nextState);\n      listeners.forEach((listener) => listener(state, previousState));\n    }\n  };\n  const getState = () => state;\n  const subscribeWithSelector = (listener, selector = getState, equalityFn = Object.is) => {\n    console.warn(\"[DEPRECATED] Please use `subscribeWithSelector` middleware\");\n    let currentSlice = selector(state);\n    function listenerToAdd() {\n      const nextSlice = selector(state);\n      if (!equalityFn(currentSlice, nextSlice)) {\n        const previousSlice = currentSlice;\n        listener(currentSlice = nextSlice, previousSlice);\n      }\n    }\n    listeners.add(listenerToAdd);\n    return () => listeners.delete(listenerToAdd);\n  };\n  const subscribe = (listener, selector, equalityFn) => {\n    if (selector || equalityFn) {\n      return subscribeWithSelector(listener, selector, equalityFn);\n    }\n    listeners.add(listener);\n    return () => listeners.delete(listener);\n  };\n  const destroy = () => listeners.clear();\n  const api = { setState, getState, subscribe, destroy };\n  state = createState(setState, getState, api);\n  return api;\n}\n\nconst isSSR = typeof window === \"undefined\" || !window.navigator || /ServerSideRendering|^Deno\\//.test(window.navigator.userAgent);\nconst useIsomorphicLayoutEffect = isSSR ? useEffect : useLayoutEffect;\nfunction create(createState) {\n  const api = typeof createState === \"function\" ? createStore(createState) : createState;\n  const useStore = (selector = api.getState, equalityFn = Object.is) => {\n    const [, forceUpdate] = useReducer((c) => c + 1, 0);\n    const state = api.getState();\n    const stateRef = useRef(state);\n    const selectorRef = useRef(selector);\n    const equalityFnRef = useRef(equalityFn);\n    const erroredRef = useRef(false);\n    const currentSliceRef = useRef();\n    if (currentSliceRef.current === void 0) {\n      currentSliceRef.current = selector(state);\n    }\n    let newStateSlice;\n    let hasNewStateSlice = false;\n    if (stateRef.current !== state || selectorRef.current !== selector || equalityFnRef.current !== equalityFn || erroredRef.current) {\n      newStateSlice = selector(state);\n      hasNewStateSlice = !equalityFn(currentSliceRef.current, newStateSlice);\n    }\n    useIsomorphicLayoutEffect(() => {\n      if (hasNewStateSlice) {\n        currentSliceRef.current = newStateSlice;\n      }\n      stateRef.current = state;\n      selectorRef.current = selector;\n      equalityFnRef.current = equalityFn;\n      erroredRef.current = false;\n    });\n    const stateBeforeSubscriptionRef = useRef(state);\n    useIsomorphicLayoutEffect(() => {\n      const listener = () => {\n        try {\n          const nextState = api.getState();\n          const nextStateSlice = selectorRef.current(nextState);\n          if (!equalityFnRef.current(currentSliceRef.current, nextStateSlice)) {\n            stateRef.current = nextState;\n            currentSliceRef.current = nextStateSlice;\n            forceUpdate();\n          }\n        } catch (error) {\n          erroredRef.current = true;\n          forceUpdate();\n        }\n      };\n      const unsubscribe = api.subscribe(listener);\n      if (api.getState() !== stateBeforeSubscriptionRef.current) {\n        listener();\n      }\n      return unsubscribe;\n    }, []);\n    const sliceToReturn = hasNewStateSlice ? newStateSlice : currentSliceRef.current;\n    useDebugValue(sliceToReturn);\n    return sliceToReturn;\n  };\n  Object.assign(useStore, api);\n  useStore[Symbol.iterator] = function() {\n    console.warn(\"[useStore, api] = create() is deprecated and will be removed in v4\");\n    const items = [useStore, api];\n    return {\n      next() {\n        const done = items.length <= 0;\n        return { value: items.shift(), done };\n      }\n    };\n  };\n  return useStore;\n}\n\nexport { create as default };\n","// Global config\nimport type { Scene, Camera, WebGLRenderer } from 'three'\n\ntype PreloadCallback = (gl: WebGLRenderer, scene: Scene, camera: Camera) => void\n\nexport const config = {\n  // Execution order for useFrames (highest = last render)\n  PRIORITY_PRELOAD: 0,\n  PRIORITY_SCISSORS: 1,\n  PRIORITY_VIEWPORTS: 1,\n  PRIORITY_GLOBAL: 1000,\n\n  DEFAULT_SCALE_MULTIPLIER: 1,\n\n  // Global rendering props\n  preloadQueue: [] as PreloadCallback[],\n}\n","import create from 'zustand'\nimport { config } from './config'\n\nimport { ScrollCallback } from './scrollbar/SmoothScrollbarTypes'\n\ninterface ScrollRigStore {\n  debug: boolean\n  scaleMultiplier: number\n  globalRender: boolean\n  globalPriority: number\n  globalClearDepth: boolean\n  globalRenderQueue: false | any[]\n  clearGlobalRenderQueue: () => void\n  isCanvasAvailable: boolean\n  hasSmoothScrollbar: boolean\n  canvasChildren: Record<string, any | undefined>\n  updateCanvas: (key: string, newProps: any) => void\n  renderToCanvas: (key: string, mesh: any, props: any) => void\n  removeFromCanvas: (key: string, dispose: boolean) => void\n  pageReflow: number\n  requestReflow: () => void\n  scroll: {\n    y: number\n    x: number\n    limit: number\n    velocity: number\n    progress: number\n    direction: number\n    scrollDirection?: 'vertical' | 'horizontal'\n  }\n  scrollTo: (target: any) => void\n  onScroll: (cb: ScrollCallback) => () => void\n}\n\nconst useCanvasStore = create<ScrollRigStore>((set) => ({\n  // //////////////////////////////////////////////////////////////////////////\n  // GLOBAL ScrollRig STATE\n  // //////////////////////////////////////////////////////////////////////////\n  debug: false,\n  scaleMultiplier: config.DEFAULT_SCALE_MULTIPLIER,\n\n  globalRender: true,\n  globalPriority: config.PRIORITY_GLOBAL,\n  globalClearDepth: false,\n\n  globalRenderQueue: false,\n  clearGlobalRenderQueue: () => set(() => ({ globalRenderQueue: false })),\n\n  // true if WebGL initialized without errors\n  isCanvasAvailable: true,\n\n  // true if <VirtualScrollbar> is currently enabled\n  hasSmoothScrollbar: false,\n\n  // map of all components to render on the global canvas\n  canvasChildren: {},\n\n  // add component to canvas\n  renderToCanvas: (key, mesh, props = {}) =>\n    set(({ canvasChildren }) => {\n      // check if already mounted\n      if (Object.getOwnPropertyDescriptor(canvasChildren, key)) {\n        // increase usage count\n        canvasChildren[key].instances += 1\n        canvasChildren[key].props.inactive = false\n        return { canvasChildren }\n      } else {\n        // otherwise mount it\n        const obj = { ...canvasChildren, [key]: { mesh, props, instances: 1 } }\n        return { canvasChildren: obj }\n      }\n    }),\n\n  // pass new props to a canvas component\n  updateCanvas: (key, newProps) =>\n    // @ts-ignore\n    set(({ canvasChildren }) => {\n      if (!canvasChildren[key]) return\n      const {\n        [key]: { mesh, props, instances },\n      } = canvasChildren\n      const obj = {\n        ...canvasChildren,\n        [key]: { mesh, props: { ...props, ...newProps }, instances },\n      }\n      // console.log('updateCanvas', key, { ...props, ...newProps })\n      return { canvasChildren: obj }\n    }),\n\n  // remove component from canvas\n  removeFromCanvas: (key, dispose = true) =>\n    set(({ canvasChildren }) => {\n      // check if remove or reduce instances\n      if (canvasChildren[key]?.instances > 1) {\n        // reduce usage count\n        canvasChildren[key].instances -= 1\n        return { canvasChildren }\n      } else {\n        if (dispose) {\n          // unmount since no longer used\n          const { [key]: _omit, ...obj } = canvasChildren // make a separate copy of the obj and omit\n          return { canvasChildren: obj }\n        } else {\n          // or tell it that it is \"inactive\"\n          canvasChildren[key].instances = 0\n          canvasChildren[key].props.inactive = true\n          return { canvasChildren: { ...canvasChildren } }\n        }\n      }\n    }),\n\n  // Used to ask components to re-calculate their positions after a layout reflow\n  pageReflow: 0,\n  requestReflow: () => {\n    set((state) => {\n      return { pageReflow: state.pageReflow + 1 }\n    })\n  },\n\n  // keep track of scrollbar\n  scroll: {\n    y: 0,\n    x: 0,\n    limit: 0,\n    velocity: 0,\n    progress: 0,\n    direction: 0,\n    scrollDirection: undefined,\n  },\n  scrollTo: () => {},\n  onScroll: () => () => {},\n}))\n\nexport { useCanvasStore }\n","import React, { useRef, forwardRef, useMemo, useImperativeHandle } from 'react'\nimport { useThree } from '@react-three/fiber'\nimport { PerspectiveCamera as PerspectiveCameraImpl } from 'three'\n\nimport { useLayoutEffect } from '../hooks/useIsomorphicLayoutEffect'\nimport { useCanvasStore } from '../store'\n\ntype Props = JSX.IntrinsicElements['perspectiveCamera'] & {\n  makeDefault?: boolean\n  margin?: number\n}\n\nconst DEFAULT_FOV = 50\n\nexport const PerspectiveCamera = forwardRef(({ makeDefault = false, margin = 0, ...props }: Props, ref) => {\n  const set = useThree((state) => state.set)\n  const camera = useThree((state) => state.camera)\n  const size = useThree((state) => state.size)\n  const viewport = useThree((state) => state.viewport)\n  const cameraRef = useRef<PerspectiveCameraImpl>(null!)\n  useImperativeHandle(ref, () => cameraRef.current)\n\n  const pageReflow = useCanvasStore((state) => state.pageReflow)\n  const scaleMultiplier = useCanvasStore((state) => state.scaleMultiplier)\n\n  // Calculate FoV or distance to match DOM size\n  const { fov, distance, aspect } = useMemo(() => {\n    const width = (size.width + margin * 2) * scaleMultiplier\n    const height = (size.height + margin * 2) * scaleMultiplier\n    const aspect = width / height\n\n    // check props vs defaults\n    let fov = props.fov || DEFAULT_FOV\n    let distance = (props?.position as number[])?.[2]\n\n    // calculate either FoV or distance to match scale\n    if (distance) {\n      // calculate FoV based on distance\n      fov = 2 * (180 / Math.PI) * Math.atan(height / (2 * distance))\n    } else {\n      // calculate distance for specified FoV\n      const ratio = Math.tan(((fov / 2.0) * Math.PI) / 180.0) * 2.0\n      distance = height / ratio\n    }\n\n    return { fov, distance, aspect }\n  }, [size, scaleMultiplier, pageReflow])\n\n  // Update camera projection and R3F viewport\n  useLayoutEffect(() => {\n    cameraRef.current.lookAt(0, 0, 0)\n    cameraRef.current.updateProjectionMatrix()\n    // https://github.com/react-spring/@react-three/fiber/issues/178\n    // Update matrix world since the renderer is a frame late\n    cameraRef.current.updateMatrixWorld()\n    // update r3f viewport which is lagging on resize\n    set((state) => ({ viewport: { ...state.viewport, ...viewport.getCurrentViewport(camera) } }))\n  }, [size, scaleMultiplier, pageReflow])\n\n  useLayoutEffect(() => {\n    if (makeDefault) {\n      const oldCam = camera\n      set(() => ({ camera: cameraRef.current! }))\n      return () => set(() => ({ camera: oldCam }))\n    }\n    // The camera should not be part of the dependency list because this components camera is a stable reference\n    // that must exchange the default, and clean up after itself on unmount.\n  }, [cameraRef, makeDefault, set])\n\n  return (\n    <perspectiveCamera\n      ref={cameraRef}\n      position={[0, 0, distance]}\n      onUpdate={(self) => self.updateProjectionMatrix()}\n      near={0.1}\n      aspect={aspect}\n      fov={fov}\n      far={distance * 2}\n      {...props}\n    />\n  )\n})\n","import React, { useRef, forwardRef, useMemo, useImperativeHandle } from 'react'\nimport { OrthographicCamera as OrthographicCameraImpl } from 'three'\nimport { useThree } from '@react-three/fiber'\n\nimport { useLayoutEffect } from '../hooks/useIsomorphicLayoutEffect'\nimport { useCanvasStore } from '../store'\n\ntype Props = JSX.IntrinsicElements['orthographicCamera'] & {\n  makeDefault?: boolean\n  margin?: number\n}\nexport const OrthographicCamera = forwardRef(({ makeDefault = false, margin = 0, ...props }: Props, ref) => {\n  const set = useThree((state) => state.set)\n  const camera = useThree((state) => state.camera)\n  const size = useThree((state) => state.size)\n\n  const pageReflow = useCanvasStore((state) => state.pageReflow)\n  const scaleMultiplier = useCanvasStore((state) => state.scaleMultiplier)\n\n  const distance = useMemo(() => {\n    const width = size.width * scaleMultiplier\n    const height = size.height * scaleMultiplier\n    return Math.max(width, height)\n  }, [size, pageReflow, scaleMultiplier])\n\n  const cameraRef = useRef<OrthographicCameraImpl>(null!)\n  useImperativeHandle(ref, () => cameraRef.current)\n  useLayoutEffect(() => {\n    cameraRef.current.lookAt(0, 0, 0)\n    cameraRef.current.updateProjectionMatrix()\n    // https://github.com/react-spring/@react-three/fiber/issues/178\n    // Update matrix world since the renderer is a frame late\n    cameraRef.current.updateMatrixWorld()\n  }, [distance, size])\n\n  useLayoutEffect(() => {\n    if (makeDefault) {\n      const oldCam = camera\n      set(() => ({ camera: cameraRef.current! }))\n      return () => set(() => ({ camera: oldCam }))\n    }\n    // The camera should not be part of the dependency list because this components camera is a stable reference\n    // that must exchange the default, and clean up after itself on unmount.\n  }, [cameraRef, makeDefault, set])\n\n  return (\n    <orthographicCamera\n      left={(size.width * scaleMultiplier) / -2 - margin * scaleMultiplier}\n      right={(size.width * scaleMultiplier) / 2 + margin * scaleMultiplier}\n      top={(size.height * scaleMultiplier) / 2 + margin * scaleMultiplier}\n      bottom={(size.height * scaleMultiplier) / -2 - margin * scaleMultiplier}\n      far={distance * 2}\n      position={[0, 0, distance]}\n      near={0.001}\n      ref={cameraRef}\n      onUpdate={(self) => self.updateProjectionMatrix()}\n      {...props}\n    />\n  )\n})\n","import { Object3D } from 'three'\n\ntype CulledObject = {\n  wasFrustumCulled?: boolean\n  wasVisible?: boolean\n} & Object3D\n\n// Use to override Frustum temporarily to pre-upload textures to GPU\nexport function setAllCulled(obj: CulledObject, overrideCulled: boolean) {\n  if (!obj) return\n  if (overrideCulled === false) {\n    obj.wasFrustumCulled = obj.frustumCulled\n    obj.wasVisible = obj.visible\n    obj.visible = true\n    obj.frustumCulled = false\n  } else {\n    obj.visible = !!obj.wasVisible\n    obj.frustumCulled = !!obj.wasFrustumCulled\n  }\n  obj.children.forEach((child) => setAllCulled(child, overrideCulled))\n}\n","import { config } from './config'\nimport { Vector2, WebGLRenderer, Scene, Camera } from 'three'\nimport { invalidate } from '@react-three/fiber'\n\nimport { setAllCulled } from './utils/helpers'\nimport { useCanvasStore } from './store'\n\nconst viewportSize = new Vector2()\n\n// Flag that we need global rendering (full screen)\nexport const requestRender = (layers = [0]) => {\n  useCanvasStore.getState().globalRenderQueue = useCanvasStore.getState().globalRenderQueue || [0]\n  useCanvasStore.getState().globalRenderQueue = [...(useCanvasStore.getState().globalRenderQueue || []), ...layers]\n}\n\nexport const renderScissor = ({\n  gl,\n  scene,\n  camera,\n  left,\n  top,\n  width,\n  height,\n  layer = 0,\n  autoClear = false,\n  clearDepth = false,\n}: any) => {\n  if (!scene || !camera) return\n  gl.autoClear = autoClear\n  gl.setScissor(left, top, width, height)\n  gl.setScissorTest(true)\n  camera.layers.set(layer)\n  clearDepth && gl.clearDepth()\n  gl.render(scene, camera)\n  gl.setScissorTest(false)\n}\n\nexport const renderViewport = ({\n  gl,\n  scene,\n  camera,\n  left,\n  top,\n  width,\n  height,\n  layer = 0,\n  scissor = true,\n  autoClear = false,\n  clearDepth = false,\n}: any) => {\n  if (!scene || !camera) return\n  gl.getSize(viewportSize)\n  gl.autoClear = autoClear\n  gl.setViewport(left, top, width, height)\n  gl.setScissor(left, top, width, height)\n  gl.setScissorTest(scissor)\n  camera.layers.set(layer)\n  clearDepth && gl.clearDepth()\n  gl.render(scene, camera)\n  gl.setScissorTest(false)\n  gl.setViewport(0, 0, viewportSize.x, viewportSize.y)\n}\n\nexport const preloadScene = (scene: Scene, camera: Camera, layer = 0, callback?: () => void) => {\n  config.preloadQueue.push((gl: WebGLRenderer, globalScene: Scene, globalCamera: Camera) => {\n    gl.setScissorTest(false)\n    setAllCulled(scene || globalScene, false)\n    camera.layers.set(layer)\n    gl.render(scene || globalScene, camera || globalCamera)\n    setAllCulled(scene || globalScene, true)\n    callback && callback()\n  })\n  // auto trigger a new frame for the preload\n  invalidate()\n}\n","import { useEffect } from 'react'\n\nimport type { Scene, Camera } from 'three'\nimport { useCanvasStore } from '../store'\nimport { preloadScene, requestRender, renderScissor, renderViewport } from '../renderer-api'\n\nexport interface ScrollRigState {\n  debug: boolean\n  isCanvasAvailable: boolean\n  hasSmoothScrollbar: boolean\n  scaleMultiplier: number\n  preloadScene: (scene: Scene, camera: Camera, layer?: number, callback?: any) => void\n  requestRender: (layers?: number[]) => void\n  renderScissor: (args: any) => void\n  renderViewport: (args: any) => void\n  reflow: () => void\n}\n\n/**\n * Public interface for ScrollRig\n */\nexport const useScrollRig = () => {\n  const isCanvasAvailable = useCanvasStore((state) => state.isCanvasAvailable)\n  const hasSmoothScrollbar = useCanvasStore((state) => state.hasSmoothScrollbar)\n  const requestReflow = useCanvasStore((state) => state.requestReflow)\n  const pageReflow = useCanvasStore((state) => state.pageReflow)\n  const debug = useCanvasStore((state) => state.debug)\n  const scaleMultiplier = useCanvasStore((state) => state.scaleMultiplier)\n\n  useEffect(() => {\n    if (debug) {\n      // @ts-ignore\n      window._scrollRig = window._scrollRig || {}\n      // @ts-ignore\n      window._scrollRig.reflow = requestReflow\n    }\n  }, [])\n\n  return {\n    // boolean state\n    debug,\n    isCanvasAvailable,\n    hasSmoothScrollbar,\n    // scale\n    scaleMultiplier,\n    // render API\n    preloadScene,\n    requestRender,\n    renderScissor,\n    renderViewport,\n    // recalc all tracker positions\n    reflow: requestReflow,\n    reflowCompleted: pageReflow,\n  } as ScrollRigState\n}\n","import React from 'react'\nimport { Color } from 'three'\n\nexport const DebugMesh = ({ scale }: { scale: [x: number, y: number, z: number] }) => (\n  <mesh scale={scale}>\n    <planeGeometry />\n    <shaderMaterial\n      args={[\n        {\n          uniforms: {\n            color: { value: new Color('hotpink') },\n          },\n          vertexShader: `\n            void main() {\n              gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n            }\n          `,\n          fragmentShader: `\n            uniform vec3 color;\n            uniform float opacity;\n            void main() {\n              gl_FragColor.rgba = vec4(color, .5);\n            }\n          `,\n        },\n      ]}\n      transparent\n    />\n  </mesh>\n)\n","import * as React from 'react';\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nconst observerMap = new Map();\nconst RootIds = new WeakMap();\nlet rootId = 0;\nlet unsupportedValue = undefined;\n/**\r\n * What should be the default behavior if the IntersectionObserver is unsupported?\r\n * Ideally the polyfill has been loaded, you can have the following happen:\r\n * - `undefined`: Throw an error\r\n * - `true` or `false`: Set the `inView` value to this regardless of intersection state\r\n * **/\n\nfunction defaultFallbackInView(inView) {\n  unsupportedValue = inView;\n}\n/**\r\n * Generate a unique ID for the root element\r\n * @param root\r\n */\n\nfunction getRootId(root) {\n  if (!root) return '0';\n  if (RootIds.has(root)) return RootIds.get(root);\n  rootId += 1;\n  RootIds.set(root, rootId.toString());\n  return RootIds.get(root);\n}\n/**\r\n * Convert the options to a string Id, based on the values.\r\n * Ensures we can reuse the same observer when observing elements with the same options.\r\n * @param options\r\n */\n\n\nfunction optionsToId(options) {\n  return Object.keys(options).sort().filter(key => options[key] !== undefined).map(key => {\n    return `${key}_${key === 'root' ? getRootId(options.root) : options[key]}`;\n  }).toString();\n}\n\nfunction createObserver(options) {\n  // Create a unique ID for this observer instance, based on the root, root margin and threshold.\n  let id = optionsToId(options);\n  let instance = observerMap.get(id);\n\n  if (!instance) {\n    // Create a map of elements this observer is going to observe. Each element has a list of callbacks that should be triggered, once it comes into view.\n    const elements = new Map();\n    let thresholds;\n    const observer = new IntersectionObserver(entries => {\n      entries.forEach(entry => {\n        var _elements$get;\n\n        // While it would be nice if you could just look at isIntersecting to determine if the component is inside the viewport, browsers can't agree on how to use it.\n        // -Firefox ignores `threshold` when considering `isIntersecting`, so it will never be false again if `threshold` is > 0\n        const inView = entry.isIntersecting && thresholds.some(threshold => entry.intersectionRatio >= threshold); // @ts-ignore support IntersectionObserver v2\n\n        if (options.trackVisibility && typeof entry.isVisible === 'undefined') {\n          // The browser doesn't support Intersection Observer v2, falling back to v1 behavior.\n          // @ts-ignore\n          entry.isVisible = inView;\n        }\n\n        (_elements$get = elements.get(entry.target)) == null ? void 0 : _elements$get.forEach(callback => {\n          callback(inView, entry);\n        });\n      });\n    }, options); // Ensure we have a valid thresholds array. If not, use the threshold from the options\n\n    thresholds = observer.thresholds || (Array.isArray(options.threshold) ? options.threshold : [options.threshold || 0]);\n    instance = {\n      id,\n      observer,\n      elements\n    };\n    observerMap.set(id, instance);\n  }\n\n  return instance;\n}\n/**\r\n * @param element - DOM Element to observe\r\n * @param callback - Callback function to trigger when intersection status changes\r\n * @param options - Intersection Observer options\r\n * @param fallbackInView - Fallback inView value.\r\n * @return Function - Cleanup function that should be triggered to unregister the observer\r\n */\n\n\nfunction observe(element, callback, options = {}, fallbackInView = unsupportedValue) {\n  if (typeof window.IntersectionObserver === 'undefined' && fallbackInView !== undefined) {\n    const bounds = element.getBoundingClientRect();\n    callback(fallbackInView, {\n      isIntersecting: fallbackInView,\n      target: element,\n      intersectionRatio: typeof options.threshold === 'number' ? options.threshold : 0,\n      time: 0,\n      boundingClientRect: bounds,\n      intersectionRect: bounds,\n      rootBounds: bounds\n    });\n    return () => {// Nothing to cleanup\n    };\n  } // An observer with the same options can be reused, so lets use this fact\n\n\n  const {\n    id,\n    observer,\n    elements\n  } = createObserver(options); // Register the callback listener for this element\n\n  let callbacks = elements.get(element) || [];\n\n  if (!elements.has(element)) {\n    elements.set(element, callbacks);\n  }\n\n  callbacks.push(callback);\n  observer.observe(element);\n  return function unobserve() {\n    // Remove the callback from the callback list\n    callbacks.splice(callbacks.indexOf(callback), 1);\n\n    if (callbacks.length === 0) {\n      // No more callback exists for element, so destroy it\n      elements.delete(element);\n      observer.unobserve(element);\n    }\n\n    if (elements.size === 0) {\n      // No more elements are being observer by this instance, so destroy it\n      observer.disconnect();\n      observerMap.delete(id);\n    }\n  };\n}\n\nconst _excluded = [\"children\", \"as\", \"triggerOnce\", \"threshold\", \"root\", \"rootMargin\", \"onChange\", \"skip\", \"trackVisibility\", \"delay\", \"initialInView\", \"fallbackInView\"];\n\nfunction isPlainChildren(props) {\n  return typeof props.children !== 'function';\n}\n/**\r\n ## Render props\r\n\n To use the `<InView>` component, you pass it a function. It will be called\r\n whenever the state changes, with the new value of `inView`. In addition to the\r\n `inView` prop, children also receive a `ref` that should be set on the\r\n containing DOM element. This is the element that the IntersectionObserver will\r\n monitor.\r\n\n If you need it, you can also access the\r\n [`IntersectionObserverEntry`](https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry)\r\n on `entry`, giving you access to all the details about the current intersection\r\n state.\r\n\n ```jsx\r\n import { InView } from 'react-intersection-observer';\r\n\n const Component = () => (\r\n <InView>\r\n {({ inView, ref, entry }) => (\r\n      <div ref={ref}>\r\n        <h2>{`Header inside viewport ${inView}.`}</h2>\r\n      </div>\r\n    )}\r\n </InView>\r\n );\r\n\n export default Component;\r\n ```\r\n\n ## Plain children\r\n\n You can pass any element to the `<InView />`, and it will handle creating the\r\n wrapping DOM element. Add a handler to the `onChange` method, and control the\r\n state in your own component. Any extra props you add to `<InView>` will be\r\n passed to the HTML element, allowing you set the `className`, `style`, etc.\r\n\n ```jsx\r\n import { InView } from 'react-intersection-observer';\r\n\n const Component = () => (\r\n <InView as=\"div\" onChange={(inView, entry) => console.log('Inview:', inView)}>\r\n <h2>Plain children are always rendered. Use onChange to monitor state.</h2>\r\n </InView>\r\n );\r\n\n export default Component;\r\n ```\r\n */\n\n\nclass InView extends React.Component {\n  constructor(props) {\n    super(props);\n    this.node = null;\n    this._unobserveCb = null;\n\n    this.handleNode = node => {\n      if (this.node) {\n        // Clear the old observer, before we start observing a new element\n        this.unobserve();\n\n        if (!node && !this.props.triggerOnce && !this.props.skip) {\n          // Reset the state if we get a new node, and we aren't ignoring updates\n          this.setState({\n            inView: !!this.props.initialInView,\n            entry: undefined\n          });\n        }\n      }\n\n      this.node = node ? node : null;\n      this.observeNode();\n    };\n\n    this.handleChange = (inView, entry) => {\n      if (inView && this.props.triggerOnce) {\n        // If `triggerOnce` is true, we should stop observing the element.\n        this.unobserve();\n      }\n\n      if (!isPlainChildren(this.props)) {\n        // Store the current State, so we can pass it to the children in the next render update\n        // There's no reason to update the state for plain children, since it's not used in the rendering.\n        this.setState({\n          inView,\n          entry\n        });\n      }\n\n      if (this.props.onChange) {\n        // If the user is actively listening for onChange, always trigger it\n        this.props.onChange(inView, entry);\n      }\n    };\n\n    this.state = {\n      inView: !!props.initialInView,\n      entry: undefined\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    // If a IntersectionObserver option changed, reinit the observer\n    if (prevProps.rootMargin !== this.props.rootMargin || prevProps.root !== this.props.root || prevProps.threshold !== this.props.threshold || prevProps.skip !== this.props.skip || prevProps.trackVisibility !== this.props.trackVisibility || prevProps.delay !== this.props.delay) {\n      this.unobserve();\n      this.observeNode();\n    }\n  }\n\n  componentWillUnmount() {\n    this.unobserve();\n    this.node = null;\n  }\n\n  observeNode() {\n    if (!this.node || this.props.skip) return;\n    const {\n      threshold,\n      root,\n      rootMargin,\n      trackVisibility,\n      delay,\n      fallbackInView\n    } = this.props;\n    this._unobserveCb = observe(this.node, this.handleChange, {\n      threshold,\n      root,\n      rootMargin,\n      // @ts-ignore\n      trackVisibility,\n      // @ts-ignore\n      delay\n    }, fallbackInView);\n  }\n\n  unobserve() {\n    if (this._unobserveCb) {\n      this._unobserveCb();\n\n      this._unobserveCb = null;\n    }\n  }\n\n  render() {\n    if (!isPlainChildren(this.props)) {\n      const {\n        inView,\n        entry\n      } = this.state;\n      return this.props.children({\n        inView,\n        entry,\n        ref: this.handleNode\n      });\n    }\n\n    const _this$props = this.props,\n          {\n      children,\n      as\n    } = _this$props,\n          props = _objectWithoutPropertiesLoose(_this$props, _excluded);\n\n    return React.createElement(as || 'div', _extends({\n      ref: this.handleNode\n    }, props), children);\n  }\n\n}\n\n/**\r\n * React Hooks make it easy to monitor the `inView` state of your components. Call\r\n * the `useInView` hook with the (optional) [options](#options) you need. It will\r\n * return an array containing a `ref`, the `inView` status and the current\r\n * [`entry`](https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry).\r\n * Assign the `ref` to the DOM element you want to monitor, and the hook will\r\n * report the status.\r\n *\r\n * @example\r\n * ```jsx\r\n * import React from 'react';\r\n * import { useInView } from 'react-intersection-observer';\r\n *\r\n * const Component = () => {\r\n *   const { ref, inView, entry } = useInView({\r\n *       threshold: 0,\r\n *   });\r\n *\r\n *   return (\r\n *     <div ref={ref}>\r\n *       <h2>{`Header inside viewport ${inView}.`}</h2>\r\n *     </div>\r\n *   );\r\n * };\r\n * ```\r\n */\n\nfunction useInView({\n  threshold,\n  delay,\n  trackVisibility,\n  rootMargin,\n  root,\n  triggerOnce,\n  skip,\n  initialInView,\n  fallbackInView,\n  onChange\n} = {}) {\n  var _state$entry;\n\n  const [ref, setRef] = React.useState(null);\n  const callback = React.useRef();\n  const [state, setState] = React.useState({\n    inView: !!initialInView,\n    entry: undefined\n  }); // Store the onChange callback in a `ref`, so we can access the latest instance\n  // inside the `useEffect`, but without triggering a rerender.\n\n  callback.current = onChange;\n  React.useEffect(() => {\n    // Ensure we have node ref, and that we shouldn't skip observing\n    if (skip || !ref) return;\n    let unobserve = observe(ref, (inView, entry) => {\n      setState({\n        inView,\n        entry\n      });\n      if (callback.current) callback.current(inView, entry);\n\n      if (entry.isIntersecting && triggerOnce && unobserve) {\n        // If it should only trigger once, unobserve the element after it's inView\n        unobserve();\n        unobserve = undefined;\n      }\n    }, {\n      root,\n      rootMargin,\n      threshold,\n      // @ts-ignore\n      trackVisibility,\n      // @ts-ignore\n      delay\n    }, fallbackInView);\n    return () => {\n      if (unobserve) {\n        unobserve();\n      }\n    };\n  }, // We break the rule here, because we aren't including the actual `threshold` variable\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  [// If the threshold is an array, convert it to a string, so it won't change between renders.\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  Array.isArray(threshold) ? threshold.toString() : threshold, ref, root, rootMargin, triggerOnce, skip, trackVisibility, fallbackInView, delay]);\n  const entryTarget = (_state$entry = state.entry) == null ? void 0 : _state$entry.target;\n  React.useEffect(() => {\n    if (!ref && entryTarget && !triggerOnce && !skip) {\n      // If we don't have a node ref, then reset the state (unless the hook is set to only `triggerOnce` or `skip`)\n      // This ensures we correctly reflect the current state - If you aren't observing anything, then nothing is inView\n      setState({\n        inView: !!initialInView,\n        entry: undefined\n      });\n    }\n  }, [ref, entryTarget, triggerOnce, skip, initialInView]);\n  const result = [setRef, state.inView, state.entry]; // Support object destructuring, by adding the specific values.\n\n  result.ref = result[0];\n  result.inView = result[1];\n  result.entry = result[2];\n  return result;\n}\n\nexport { InView, defaultFallbackInView, observe, useInView };\n//# sourceMappingURL=react-intersection-observer.modern.mjs.map\n","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nfunction debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n  \n  debounced.flush = function() {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      \n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n\n// Adds compatibility for ES modules\ndebounce.debounce = debounce;\n\nmodule.exports = debounce;\n","import { useState, useEffect } from 'react'\nimport { ResizeObserver as Polyfill } from '@juggle/resize-observer'\nimport pkg from 'debounce'\n\nconst isBrowser = typeof window !== 'undefined'\nexport interface WindowSize {\n  width: number\n  height: number\n}\n\ntype ConfigProps = {\n  debounce?: number\n}\n\n/*\n * Triggers a resize only if the Canvas DOM element changed dimensions - not on window resize event\n *\n * This is to avoid costly re-renders when the URL bar is scrolled away on mobile\n *\n * Based on: https://usehooks.com/useWindowSize/\n */\n\nexport function useWindowSize({ debounce = 0 }: ConfigProps = {}) {\n  // Initialize state with undefined width/height so server and client renders match\n  // Learn more here: https://joshwcomeau.com/react/the-perils-of-rehydration/\n  const [windowSize, setWindowSize] = useState<WindowSize>({\n    width: isBrowser ? window.innerWidth : Infinity,\n    height: isBrowser ? window.innerHeight : Infinity,\n  })\n\n  useEffect(() => {\n    // check if we can find a canvas - if so, base size on canvas instead of window\n    // since 100vh !== window.innerHeight on mobile\n    const canvasEl = document.getElementById('ScrollRig-canvas')\n\n    // Handler to call on window resize\n    function handleResize() {\n      const width = canvasEl ? canvasEl.clientWidth : window.innerWidth\n      const height = canvasEl ? canvasEl.clientHeight : window.innerHeight\n\n      if (width !== windowSize.width || height !== windowSize.height) {\n        // Set window width/height to state\n        setWindowSize({\n          width,\n          height,\n        })\n      }\n    }\n\n    const debouncedResize = pkg.debounce(handleResize, debounce)\n\n    // Add event listener\n    const ResizeObserver = window.ResizeObserver || Polyfill\n    let observer: ResizeObserver\n    if (canvasEl) {\n      observer = new ResizeObserver(debouncedResize)\n      observer.observe(canvasEl)\n    } else {\n      window.addEventListener('resize', debouncedResize)\n    }\n    // Call handler right away so state gets updated with initial window size\n    handleResize()\n    // Remove event listener on cleanup\n    return () => {\n      window.removeEventListener('resize', debouncedResize)\n      observer?.disconnect()\n    }\n  }, [windowSize, setWindowSize])\n\n  return windowSize\n}\n","/**\n * An object for memoizing vecType functions.\n * @type {Object}\n * @private\n */\nlet vecTypes = (function () {\n  const handler = {\n    get: function (obj, prop) {\n      if (!obj.hasOwnProperty(prop)) {\n        obj[prop] = getVecType(prop)\n      }\n      return obj[prop]\n    }\n  }\n\n  return new Proxy({}, handler)\n})()\n\n/**\n * A class for fixed-size vectors of numbers.\n * @extends Array\n */\nclass vecn extends Array {\n  /**\n   * Creates a vecn of the specified dimension. This should never be called\n   * by the user (as if this were an abstract class).\n   * @param {number} dimension The dimension of this vector.\n   * @param {number[]} [args=[]] The numbers to be put in the vector.\n   */\n  constructor (dimension, args) {\n    args = flattenOuter(args)\n\n    if (!args.every((x) => type(x) === 'Number')) {\n      throw new TypeError('All arguments must be numbers.')\n    }\n    if (args.length > 1 && args.length !== dimension) {\n      throw new Error('Argument list must be empty, have a single number, or have a length equal to the dimension.')\n    }\n\n    if (args.length === 0) {\n      args = [0]\n    }\n    if (args.length === 1 && type(args[0]) === 'Number') {\n      args = Array(dimension).fill(args[0])\n    }\n\n    if (dimension > 1) {\n      super(...args)\n    } else {\n      super(1)\n      this[0] = args[0]\n    }\n\n    Reflect.defineProperty(this, 'pop', {\n      value: undefined,\n      enumerable: false\n    })\n    Reflect.defineProperty(this, 'push', {\n      value: undefined,\n      enumerable: false\n    })\n    Reflect.defineProperty(this, 'shift', {\n      value: undefined,\n      enumerable: false\n    })\n    Reflect.defineProperty(this, 'unshift', {\n      value: undefined,\n      enumerable: false\n    })\n  }\n\n  /**\n   * The L2 norm (Euclidian norm) of the vector.\n   * @type {number}\n   */\n  get magnitude () {\n    return this.pnorm(2)\n  }\n\n  // --------------------------------------------------------------------------\n  //   Arithmetic\n\n  /**\n   * Returns a vector where this is divided by v componentwise. If v is\n   * a single number, the vector is scaled by 1/v.\n   * @param {number|number[]} v The value to multiply with.\n   *\n   * @returns {vecn} A new vector with the divided components.\n   */\n  div (v) {\n    checkCompatibility(v, this.dim, true)\n    if (type(v) === 'Number') {\n      v = (new Array(this.dim)).fill(v)\n    }\n\n    let result = []\n    for (let i = 0; i < this.length; ++i) {\n      result[i] = this[i] / v[i]\n    }\n    return vecTypes[this.dim](result)\n  }\n\n  /**\n   * Returns a vector where v is subtracted from the components of this\n   * vector. If v is a single number, it is subtracted to each component. If v\n   * is a vector, the vectors are combined componentwise.\n   * @param {number|number[]} v The value to subtract from this vector.\n   *\n   * @returns {vecn} A new vector with the combined components.\n   */\n  minus (v) {\n    checkCompatibility(v, this.dim, true)\n    if (type(v) === 'Number') {\n      v = (new Array(this.dim)).fill(v)\n    }\n\n    let result = []\n    for (let i = 0; i < this.dim; ++i) {\n      result[i] = this[i] - v[i]\n    }\n    return vecTypes[this.dim](result)\n  }\n\n  /**\n   * Negates each element in this vector.\n   * @returns {vecn} A new vector where all elements are negated.\n   */\n  neg () {\n    return vecTypes[this.dim](this.times(-1))\n  }\n\n  /**\n   * Returns a vector where v is added to the components of this vector. If v\n   * is a single number, it is added to each component. If v is a vector, the\n   * vectors are added componentwise.\n   * @param {number|number[]} v The value to add to this vector.\n   *\n   * @returns {vecn} A new vector with the summed components.\n   */\n  plus (v) {\n    checkCompatibility(v, this.dim, true)\n    if (type(v) === 'Number') {\n      v = (new Array(this.dim)).fill(v)\n    }\n\n    let result = []\n    for (let i = 0; i < this.dim; ++i) {\n      result[i] = this[i] + v[i]\n    }\n    return vecTypes[this.dim](result)\n  }\n\n  /**\n   * Returns a vector where each component of this was raised to a power p.\n   * @param {number} p The power to raise each component by.\n   *\n   * @returns {vecn} A new vector with the exponentiated components.\n   */\n  pow (p) {\n    let result = []\n    for (let i = 0; i < this.dim; ++i) {\n      result[i] = Math.pow(this[i], p)\n    }\n    return vecTypes[this.dim](result)\n  }\n\n  /**\n   * Returns a vector where v and this are multiplied componentwise. If v is\n   * a single number, the vector is scaled by v.\n   * @param {number|number[]} v The value to multiply with.\n   *\n   * @returns {vecn} A new vector with the multiplied components.\n   */\n  times (v) {\n    checkCompatibility(v, this.dim, true)\n    if (type(v) === 'Number') {\n      v = (new Array(this.dim)).fill(v)\n    }\n\n    let result = []\n    for (let i = 0; i < this.dim; ++i) {\n      result[i] = this[i] * v[i]\n    }\n    return vecTypes[this.dim](result)\n  }\n\n  // --------------------------------------------------------------------------\n  //   Vector Operations\n\n  /**\n   * Dot product of two vectors.\n   * @param {number[]} v The vector to dot with this one.\n   *\n   * @returns {number} The dot product between this and v.\n   */\n  dot (v) {\n    checkCompatibility(v, this.dim)\n\n    let result = 0\n    for (let i = 0; i < this.dim; ++i) {\n      result += this[i] * v[i]\n    }\n    return result\n  }\n\n  /**\n   * Scales this vector to a magnitude of 1.\n   *\n   * @returns {vecn} A new vector with scaled components.\n   */\n  normalize () {\n    return this.div(this.magnitude)\n  }\n\n  /**\n   * Evaluates the p-norm (or lp-norm) of this vector.\n   * @param {number} p The p-value to evaluate.\n   *\n   * @returns {number} The norm of this vector.\n   */\n  pnorm (p) {\n    let result = 0\n    for (let i = 0; i < this.dim; ++i) {\n      result += Math.pow(Math.abs(this[i]), p)\n    }\n    return Math.pow(result, 1 / p)\n  }\n\n  /**\n   * Reflects this vector across the provided vector. The normal can be imagined\n   * as a surface normal or as describing a hyperpalane.\n   * @param {number[]} normal A vector describing the hyperplane to reflect off of.\n   *\n   * @returns {vecn} The reflected vector.\n   */\n  reflect (normal) {\n    const n = normal.normalize()\n    return this.minus(n.times(2 * this.dot(n)))\n  }\n\n  // --------------------------------------------------------------------------\n  //   Extras\n\n  /**\n   * Finds the indices of the max value in this vector.\n   *\n   * @returns {number[]} An array of indices corresponding to the max values.\n   */\n  argmax () {\n    const maxVal = this.max()\n    return this.reduce((acc, x, i) => x === maxVal ? acc.concat([i]) : acc, [])\n  }\n\n  /**\n   * Finds the indices of the min value in this vector.\n   *\n   * @returns {number[]} An array of indices corresponding to the min values.\n   */\n  argmin () {\n    const minVal = this.min()\n    return this.reduce((acc, x, i) => x === minVal ? acc.concat([i]) : acc, [])\n  }\n\n  /**\n   * Creates a new vector from the provided indices of this one. Basically\n   * equivalent to swizzling.\n   * @param {number[]} indices The indices to select into a new vector.\n   *\n   * @returns {vecn} A new vector from the provided indices.\n   */\n  choose (indices) {\n    if (!Array.isArray(indices)) {\n      throw new TypeError('Argument must be a list of indices.')\n    }\n    if (!indices.every((i) => i < this.dim && isIndex(i.toString()))) {\n      throw new RangeError('All elements of argument must be valid indices.')\n    }\n\n    let v = []\n    indices.forEach((i) => v.push(this[i]))\n    return vecTypes[v.length](v)\n  }\n\n  /**\n   * Creates a duplicate of this vector. Same as passing this vector through\n   * the factory that created it.\n   *\n   * @returns {vecn} A deep copy of this vector.\n   */\n  copy () {\n    return vecTypes[this.dim](this)\n  }\n\n  /**\n   * Returns whether every element in each vector is equal.\n   * @param {number[]} v A vector to test against.\n   *\n   * @returns {boolean} True if both vectors have the same dimension and values.\n   */\n  equals (v) {\n    return v.length === this.dim && v.every((x, i) => this[i] === x)\n  }\n\n  /**\n   * Returns whether every element in each vector is approximately equal.\n   * @param {number[]} v A vector to test against.\n   * @param {number} epsilon The largest meaningful difference between two values.\n   *\n   * @returns {boolean} True if both vectors have the same dimension and the\n   * distance between each number is less than epsilon.\n   */\n  approximatelyEquals (v, epsilon = 0.00000001) {\n    return v.length === this.dim && v.every((x, i) => Math.abs(this[i] - x) < epsilon)\n  }\n\n  /**\n   * Returns the max value of this vector.\n   *\n   * @returns {number} The max value of this vector.\n   */\n  max () {\n    return Math.max(...this)\n  }\n\n  /**\n   * Returns the min value of this vector.\n   *\n   * @returns {number} The min value of this vector.\n   */\n  min () {\n    return Math.min(...this)\n  }\n\n  /**\n   * Sums the components of this vector.\n   *\n   * @returns {number} The sum of the components of this vector.\n   */\n  sum () {\n    return this.reduce((acc, x) => acc + x, 0)\n  }\n\n  /**\n   * Converts this vector into an Array.\n   *\n   * @returns {number[]} An array of the contents of this vector.\n   */\n  toArray () {\n    return Array.from(this)\n  }\n\n  // --------------------------------------------------------------------------\n  //   Array Overrides\n\n  /**\n   * Same as Array.prototype.concat, but return value is of a new vecType.\n   *\n   * @returns {vecn}\n   */\n  concat (...args) {\n    const result = super.concat.apply(this.toArray(), args)\n    return vecTypes[result.length](result)\n  }\n\n  /**\n   * Same as Array.prototype.filter, but returns an Array if the result has 0\n   * entries.\n   *\n   * @returns {vecn|number[]}\n   */\n  filter (...args) {\n    const result = super.filter.apply(this.toArray(), args)\n    if (result.length > 0) {\n      return vecTypes[result.length](result)\n    }\n    return result\n  }\n\n  /**\n   * Same as Array.prototype.map, but returns an Array if the result contains\n   * non-numbers.\n   *\n   * @returns {vecn|Array}\n   */\n  map (...args) {\n    const result = super.map(...args)\n    if (result.every((x) => type(x) === 'Number')) {\n      return result\n    }\n    return result.toArray()\n  }\n\n  /**\n   * Same as Array.prototype.slice, but returns an Array if the result has 0\n   * entries.\n   */\n  slice (...args) {\n    const result = super.slice.apply(this.toArray(), args)\n    if (result.length > 0) {\n      return vecTypes[result.length](result)\n    }\n    return result\n  }\n\n  /**\n   * A restrictive version of the Array.prototype.splice that requires all\n   * removed elements to be replaced.\n   */\n  splice (...args) {\n    let test = this.toArray()\n    test.splice(...args)\n\n    if (test.length !== this.dim) {\n      throw new Error('All removed elements must be replaced.')\n    }\n    if (!test.every((x) => type(x) === 'Number')) {\n      throw new TypeError('All elements must be numbers.')\n    }\n\n    test.forEach((x, i) => { this[i] = x })\n  }\n\n  toString () {\n    return this.reduce((s, x, i) => {\n      return s + x + (i === this.dim - 1 ? ' ' : ', ')\n    }, '[ ') + ']'\n  }\n}\n\n// --------------------------------------------------------------------------\n//   General Tools\n\n/**\n * Adds an arbitrary number of vectors together. All vectors must be of the same\n * dimension.\n * @param {...vecn} vecs Vectors to add together.\n *\n * @returns {vecn} The sum of all the provided vectors.\n */\nfunction add (...vecs) {\n  const dim = vecs[0].dim\n  if (!vecs.every((v) => v.dim === dim)) {\n    throw new TypeError('All vectors must have the same dimension.')\n  }\n  return vecs.reduce((acc, v) => acc.plus(v), vecTypes[dim]())\n}\n\n/**\n * The validator to be used in the proxy for all vec objects. Catches swizzling\n * properties, makes sure assignment only works for indices, and disallows\n * non-numerical assignments. Used in getVecType.\n * @constant\n * @type {Object}\n * @private\n */\nconst validator = {\n  set: function (obj, prop, value) {\n    if (prop === 'length') {\n      return false\n    }\n    if (isIndex(prop)) {\n      if (Number(prop) >= obj.dim) {\n        throw new RangeError('Vector may not have more elements than dimension.')\n      } else if (type(value) !== 'Number') {\n        throw new TypeError('Vectors may only contain numbers.')\n      } else {\n        obj[prop] = value\n        return true\n      }\n    }\n\n    const swizzleSymbolMap = getSwizzleSymbolMap(prop.toString())\n    if (obj.dim <= 4 && swizzleSymbolMap) {\n      swizzleSet(obj, prop.toString(), swizzleSymbolMap, value)\n      return true\n    }\n\n    return false\n  },\n  get: function (obj, prop) {\n    const swizzleSymbolMap = getSwizzleSymbolMap(prop.toString())\n    if (obj.dim <= 4 && swizzleSymbolMap) {\n      return swizzleGet(obj, prop, swizzleSymbolMap)\n    }\n\n    return obj[prop]\n  }\n}\n\n/**\n * Returns a factory function for vectors of the specified dimension.\n * @param {number} dim The dimension of the new vector type.\n *\n * @returns {Function} A factory (not a constructor) for creating new vecs.\n */\nfunction getVecType (dim) {\n  dim = Number(dim)\n\n  if (!(dim in vecTypes)) {\n    if (isNaN(dim)) throw new TypeError('Dimension must be coercible to a number.')\n    if (dim <= 0) throw new RangeError('Dimension must be positive.')\n    if (!Number.isInteger(dim)) throw new RangeError('Dimension must be positive.')\n\n    // Doing a little bit of exploiting ES6 to dynamically name the class\n    let classname = 'vec' + dim\n    let VecType = ({[classname]: class extends vecn {\n      constructor (...args) {\n        if (args.length === 1 && args[0] instanceof vecn) {\n          if (args[0].dim > dim) {\n            throw new TypeError('Cannot demote vectors.')\n          }\n          args = promoteArrayDimension(args[0].toArray(), dim)\n        }\n        super(dim, args)\n        Reflect.defineProperty(this, 'dim', {\n          value: dim,\n          writable: false,\n          enumerable: false\n        })\n      }\n    }})[classname]\n\n    let factory = function factory (...args) {\n      let target = new VecType(...args)\n      Object.preventExtensions(target)\n      return new Proxy(target, validator)\n    }\n    vecTypes[dim] = factory\n  }\n\n  return vecTypes[dim]\n}\n\n/**\n * The correct function for determining whether an object is a vecn.\n * @param {*} v The object in question.\n *\n * @returns {boolean} True if the object is an instance of vecn.\n */\nfunction isVec (v) {\n  return v instanceof vecn\n}\n\n/**\n * Linearly interpolates between two vectors.\n * @param {vecn} v1 The starting vector.\n * @param {vecn} v2 The ending vector.\n * @param {number} t The interpolant, which is clamped to the inteval [0, 1].\n *\n * @returns {vecn} The interpolated vector.\n */\nfunction lerp (v1, v2, t) {\n  if (v1.dim !== v2.dim) throw new TypeError('Vectors must have the same dimension.')\n  t = t < 0 ? 0 : (t > 1 ? 1 : t)\n  return v1.plus(v2.minus(v1).times(t))\n}\n\n/**\n * Multiplies an arbitrary number of vectors together. All vectors must be of the same\n * dimension.\n * @param {...vecn} vecs Vectors to multiply together.\n *\n * @returns {vecn} The product of all the provided vectors.\n */\nfunction multiply (...vecs) {\n  const dim = vecs[0].dim\n  if (!vecs.every((v) => v.dim === dim)) throw new TypeError('All vectors must have the same dimension.')\n  return vecs.reduce((acc, v) => acc.times(v), vecTypes[dim](1))\n}\n\n/**\n * Spherically interpolates between two vectors.\n * @param {vecn} v1 The starting vector.\n * @param {vecn} v2 The ending vector.\n * @param {number} t The interpolant, which is clamped to the inteval [0, 1].\n *\n * @returns {vecn} The interpolated vector.\n */\nfunction slerp (v1, v2, t) {\n  if (v1.dim !== v2.dim) throw new TypeError('Vectors must have the same dimension.')\n\n  t = t < 0 ? 0 : (t > 1 ? 1 : t)\n  let dot = v1.normalize().dot(v2.normalize())\n  dot = dot < -1 ? -1 : (dot > 1 ? 1 : dot)\n  const theta = Math.acos(dot) * t\n  const relative = v2.minus(v1.times(dot)).normalize()\n  const magnitude = v1.magnitude + ((v2.magnitude - v1.magnitude) * t)\n  return v1.times(Math.cos(theta)).plus(relative.times(Math.sin(theta)))\n    .normalize().times(magnitude)\n}\n\n// --------------------------------------------------------------------------\n//   Swizzling\n\n/**\n * The index corresponding to common names for indexing vectors.\n * @constant\n * @type {Object}\n * @private\n */\nconst namedIndices = [\n  {x: 0, y: 1, z: 2, w: 3},\n  {r: 0, g: 1, b: 2, a: 3},\n  {s: 0, t: 1, p: 2, q: 3}\n]\n\n/**\n * Gets the set of symbols corresponding to indices used for swizzling.\n * @private\n * @param {string} s The string used as a property to swizzle.\n *\n * @returns {Object} A map from characters to indices.\n */\nfunction getSwizzleSymbolMap (s) {\n  return namedIndices.find((map) => {\n    return s.split('').every((c) => c in map)\n  })\n}\n\n/**\n * Creates a new vector from the named indices given by swizzling.\n * @private\n * @param {vecn} v The vector to pull data from. The dimension is assumed to be\n * 2, 3, or 4, but this isn't enforced here.\n * @param {string} s The property being used to swizzle (e.g. 'xxy' or 'z').\n * @param {Object} set A map from characters to indices (assumed to be valid).\n *\n * @returns {undefined|number|vecn} Either undefined (if s isn't a valid swizzle\n * string), a number (if s has a length of 1), or a vecn where the values have\n * been rearranged according to the order given in s.\n */\nfunction swizzleGet (v, s, set) {\n  const newDim = s.length\n\n  if (newDim === 1) {\n    return v[set[s]]\n  }\n\n  let values = s.split('').reduce((acc, x) => {\n    let i = set[x]\n    return acc && i < v.dim ? acc.concat([v[i]]) : undefined\n  }, [])\n  return values ? new vecTypes[newDim](...values) : undefined\n}\n\n/**\n * Assigns the indexed values in v to the values in newVals in the order they\n * are described in in s.\n * @private\n * @param {vecn} v The starting vector.\n * @param {string} s The property being used to swizzle (e.g. 'xyz' or 'xz').\n * @param {Object} map A map from characters to indices (assumed to be valid).\n * @param {number|number[]} newVals The right hand side of the assignment\n *\n * @returns {vecn} A copy of v with the correct elements replaced.\n */\nfunction swizzleSet (v, s, map, newVals) {\n  if (s.length === 1) {\n    if (type(newVals) !== 'Number') {\n      throw new TypeError('Must set to a number')\n    }\n    v[map[s]] = newVals\n    return\n  }\n\n  if (!Array.isArray(newVals)) throw new TypeError('Right-hand side must be an array.')\n  if (s.length !== newVals.length) throw new TypeError('Right-hand side must have matching length.')\n  if (!newVals.every((item) => type(item) === 'Number')) throw new TypeError('All new values must be numbers.')\n\n  if (s.split('').some((c) => map[c] >= v.dim)) {\n    return\n  }\n\n  let valid = true\n  for (let i = 0, unique = {}; i < s.length; ++i) {\n    if (unique.hasOwnProperty(s[i])) {\n      valid = false\n      break\n    }\n    unique[s[i]] = true\n  }\n  if (!valid) throw new SyntaxError('Swizzle assignment does not allow symbols to be repeated.')\n\n  s.split('').map((c) => map[c]).forEach((index, i) => { v[index] = newVals[i] })\n}\n\n// --------------------------------------------------------------------------\n//   Helpers\n\n/**\n * Checks whether something is valid to do vector operations with and throws\n * a TypeError if not.\n * @private\n * @param {*} o An object to check.\n * @param {number} dim The dimension to check against.\n * @param {boolean} [numberValid=false] Whether scalars are compatible for the operation.\n */\nfunction checkCompatibility (o, dim, numberValid = false) {\n  if (numberValid && type(o) === 'Number') {\n    return\n  } else if (o.length && o.length === dim) {\n    return\n  }\n  throw new TypeError(`Invalid argument. Input must have matching dimension${numberValid ? 'or be a scalar' : ''}.`)\n}\n\n/**\n * Removes outer arrays and returns a reference to the innermost array. For\n * example, [[1, 2]] becomes [1, 2]. [[[['a'], true]]] becomes [['a'], true].\n * @private\n * @param {Array} arr The array to flatten.\n *\n * @returns {Array} A reference to the innermost array in arr.\n */\nfunction flattenOuter (arr) {\n  if (!(arr instanceof Array) || arr.length !== 1) {\n    return arr\n  }\n  if (arr[0] instanceof Array) {\n    return flattenOuter(arr[0])\n  }\n  return arr\n}\n\n/**\n * Checks whether a provided string can be used as a valid index into an array.\n * @private\n * @param {string} n A string representation of the number in question.\n *\n * @returns {boolean} True if n can be used to index an array.\n */\nfunction isIndex (n) {\n  return !isNaN(n) &&\n         Number(n).toString() === n &&\n         Number.isInteger(Number(n)) &&\n         Number(n) >= 0\n}\n\n/**\n * Lengthens an exsting array and fills new entries with 0 (does not mutate).\n * @private\n * @param {Array} arr The source array.\n * @param {number} dim The dimension of the new array.\n *\n * @returns {Array} A new array with length dim and arr as a prefix.\n */\nfunction promoteArrayDimension (arr, dim) {\n  return [...Array(dim)].map((_, i) => i < arr.length ? arr[i] : 0)\n}\n\n/**\n * Returns a string representing the type of an object. Similar to typeof, but\n * better with wrapped primitives, null, Array, etc...\n * @private\n * @param {*} obj The object to check the type of.\n *\n * @returns {string} A capitalized string describing the perceived type (i.e. 'Number', 'Array', etc...)\n */\nfunction type (obj) {\n  return Object.prototype.toString.call(obj).slice(8, -1)\n}\n\nmodule.exports = {\n  getVecType,\n  isVec,\n  vec2: vecTypes[2],\n  vec3: vecTypes[3],\n  vec4: vecTypes[4],\n\n  add,\n  multiply,\n  lerp,\n  slerp\n}\n","// Linear mapping from range <a1, a2> to range <b1, b2>\nexport function mapLinear(x: number, a1: number, a2: number, b1: number, b2: number) {\n  return b1 + ((x - a1) * (b2 - b1)) / (a2 - a1)\n}\n","import { useCanvasStore } from '../store'\nimport { ScrollCallback } from './SmoothScrollbarTypes'\n\nexport interface Scroll {\n  y: number\n  x: number\n  limit: number\n  velocity: number\n  progress: number\n  direction: number\n  scrollDirection: string\n}\n\ninterface UseScrollbarProps {\n  enabled: boolean\n  scroll: Scroll\n  scrollTo: (target: any) => void\n  onScroll: (cb: ScrollCallback) => () => void\n}\n\n/**\n * Public interface for ScrollRig\n */\nexport const useScrollbar = () => {\n  const hasSmoothScrollbar = useCanvasStore((state) => state.hasSmoothScrollbar)\n  const scroll = useCanvasStore((state) => state.scroll)\n  const scrollTo = useCanvasStore((state) => state.scrollTo)\n  const onScroll = useCanvasStore((state) => state.onScroll)\n\n  return {\n    enabled: hasSmoothScrollbar,\n    scroll,\n    scrollTo,\n    onScroll,\n  } as UseScrollbarProps\n}\n","// https://www.typescriptlang.org/docs/handbook/modules.html#ambient-modules\n/// <reference path=\"../types/global.ts\" />\n\nimport { useRef, useCallback, useEffect, useMemo, useState, MutableRefObject } from 'react'\nimport { useInView } from 'react-intersection-observer'\nimport { useWindowSize } from './useWindowSize'\nimport vecn from 'vecn'\n\nimport { useLayoutEffect } from '../hooks/useIsomorphicLayoutEffect'\nimport { mapLinear } from '../utils/math'\nimport { useCanvasStore } from '../store'\n\nimport { useScrollbar, Scroll } from '../scrollbar/useScrollbar'\n\nimport type { Rect, Bounds, TrackerOptions, Tracker, ScrollState, UpdateCallback } from './useTrackerTypes'\n\nfunction updateBounds(bounds: Bounds, rect: Rect, scroll: Scroll, size: any) {\n  bounds.top = rect.top - (scroll.y || 0)\n  bounds.bottom = rect.bottom - (scroll.y || 0)\n  bounds.left = rect.left - (scroll.x || 0)\n  bounds.right = rect.right - (scroll.x || 0)\n  bounds.width = rect.width\n  bounds.height = rect.height\n  // move coordinate system so 0,0 is at center of screen\n  bounds.x = bounds.left + rect.width * 0.5 - size.width * 0.5\n  bounds.y = bounds.top + rect.height * 0.5 - size.height * 0.5\n  bounds.positiveYUpBottom = size.height - bounds.bottom // inverse Y\n}\n\nfunction updatePosition(position: vec3, bounds: Bounds, scaleMultiplier: number) {\n  position.x = bounds.x * scaleMultiplier\n  position.y = -1 * bounds.y * scaleMultiplier\n}\n\n/**\n * Returns the current Scene position of the DOM element\n * based on initial getBoundingClientRect and scroll delta from start\n */\nfunction useTracker(track: MutableRefObject<HTMLElement>, options?: TrackerOptions): Tracker {\n  const size = useWindowSize()\n  const { scroll, onScroll } = useScrollbar()\n  const scaleMultiplier = useCanvasStore((state) => state.scaleMultiplier)\n  const pageReflow = useCanvasStore((state) => state.pageReflow)\n  const debug = useCanvasStore((state) => state.debug)\n\n  // extend defaults with optional options\n  const { rootMargin, threshold, autoUpdate, wrapper } = useMemo(() => {\n    const target = { rootMargin: '0%', threshold: 0, autoUpdate: true } as TrackerOptions\n    const opts = options || {}\n    Object.keys(opts).map((key: string, index) => {\n      if (opts[key] !== undefined) target[key] = opts[key]\n    })\n    return target\n  }, [options])\n\n  // check if element is in viewport\n  const { ref, inView: inViewport } = useInView({ rootMargin, threshold })\n\n  // bind useInView ref to current tracking element\n  useLayoutEffect(() => {\n    ref(track.current)\n  }, [track, track.current])\n\n  // Using state so it's reactive\n  const [scale, setScale] = useState<vec3>(vecn.vec3(0, 0, 0))\n\n  // Using ref because\n  const scrollState: ScrollState = useRef({\n    inViewport: false,\n    progress: -1,\n    visibility: -1,\n    viewport: -1,\n  }).current\n\n  // DOM rect (initial position in pixels offset by scroll value on page load)\n  // Using ref so we can calculate bounds & position without a re-render\n  const rect = useRef({\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    width: 0,\n    height: 0,\n  }).current\n\n  // expose internal ref as a reactive state as well\n  const [reactiveRect, setReactiveRect] = useState<Rect>(rect)\n\n  // bounding rect in pixels - updated by scroll\n  const bounds = useRef({\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    width: 0,\n    height: 0,\n    x: 0,\n    y: 0,\n    positiveYUpBottom: 0,\n  }).current\n\n  // position in viewport units - updated by scroll\n  const position = useRef(vecn.vec3(0, 0, 0)).current\n\n  // Calculate bounding Rect as soon as it's available\n  useLayoutEffect(() => {\n    const _rect = track.current?.getBoundingClientRect()\n    if (!_rect) return\n    const initialY = wrapper ? (wrapper as HTMLElement).scrollTop : window.scrollY\n    const initialX = wrapper ? (wrapper as HTMLElement).scrollLeft : window.scrollX\n    rect.top = _rect.top + initialY\n    rect.bottom = _rect.bottom + initialY\n    rect.left = _rect.left + initialX\n    rect.right = _rect.right + initialX\n    rect.width = _rect.width\n    rect.height = _rect.height\n    setReactiveRect({ ...rect })\n    setScale(vecn.vec3(rect?.width * scaleMultiplier, rect?.height * scaleMultiplier, 1))\n    debug &&\n      console.log(\n        'useTracker.getBoundingClientRect:',\n        rect,\n        'intialScroll:',\n        { initialY, initialX },\n        'size:',\n        size,\n        'pageReflow:',\n        pageReflow\n      )\n  }, [track, size, pageReflow, scaleMultiplier, debug])\n\n  const update = useCallback(\n    ({ onlyUpdateInViewport = false, scroll: overrideScroll }: UpdateCallback = {}) => {\n      if (!track.current || (onlyUpdateInViewport && !scrollState.inViewport)) {\n        return\n      }\n\n      const _scroll = overrideScroll || scroll\n\n      updateBounds(bounds, rect, _scroll, size)\n      updatePosition(position, bounds, scaleMultiplier)\n\n      // scrollState setup based on scroll direction\n      const isHorizontal = _scroll.scrollDirection === 'horizontal'\n      const sizeProp = isHorizontal ? 'width' : 'height'\n      const startProp = isHorizontal ? 'left' : 'top'\n\n      // calculate progress of passing through viewport (0 = just entered, 1 = just exited)\n      const pxInside = size[sizeProp] - bounds[startProp]\n      scrollState.progress = mapLinear(pxInside, 0, size[sizeProp] + bounds[sizeProp], 0, 1) // percent of total visible distance\n      scrollState.visibility = mapLinear(pxInside, 0, bounds[sizeProp], 0, 1) // percent of item height in view\n      scrollState.viewport = mapLinear(pxInside, 0, size[sizeProp], 0, 1) // percent of window height scrolled since visible\n    },\n    [track, size, scaleMultiplier, scroll]\n  )\n\n  // update scrollState in viewport\n  useLayoutEffect(() => {\n    scrollState.inViewport = inViewport\n    // update once more in case it went out of view\n    update({ onlyUpdateInViewport: false })\n    debug && console.log('useTracker.inViewport:', inViewport, 'update()')\n  }, [inViewport])\n\n  // re-run if the callback updated\n  useLayoutEffect(() => {\n    update({ onlyUpdateInViewport: false })\n    debug && console.log('useTracker.update on resize/reflow')\n  }, [update, pageReflow])\n\n  // auto-update on scroll\n  useEffect(() => {\n    if (autoUpdate) return onScroll((_scroll) => update({ onlyUpdateInViewport: true }))\n  }, [autoUpdate, update, onScroll])\n\n  return {\n    rect: reactiveRect, // Dom rect - doesn't change on scroll - not - reactive\n    bounds, // scrolled bounding rect in pixels - not reactive\n    scale, // reactive scene scale - includes z-axis so it can be spread onto mesh directly\n    position, // scrolled element position in viewport units - not reactive\n    scrollState, // scroll progress stats - not reactive\n    inViewport, // reactive prop for when inside viewport\n    update, // optional manual update\n  }\n}\n\nexport { useTracker }\n","import React, { memo, useState, useCallback, MutableRefObject, ReactNode } from 'react'\nimport { Scene } from 'three'\nimport { useFrame, createPortal } from '@react-three/fiber'\n\nimport { useLayoutEffect } from '../hooks/useIsomorphicLayoutEffect'\nimport { config } from '../config'\nimport { useCanvasStore } from '../store'\nimport { useScrollRig } from '../hooks/useScrollRig'\nimport { DebugMesh } from './DebugMesh'\nimport { useTracker } from '../hooks/useTracker'\nimport type { ScrollState } from '../hooks/useTrackerTypes'\n\nexport interface ScrollSceneChildProps {\n  track: MutableRefObject<HTMLElement>\n  margin: number\n  priority: number\n  scale: vec3 | undefined\n  scrollState: ScrollState\n  inViewport: boolean\n}\n\ninterface ScrollScene {\n  track: MutableRefObject<HTMLElement>\n  children: (state: ScrollSceneChildProps) => ReactNode\n  margin?: number\n  inViewportMargin?: string\n  inViewportThreshold?: number\n  visible?: boolean\n  hideOffscreen?: boolean\n  scissor?: boolean\n  debug?: boolean\n  as?: string\n  priority?: number\n}\n\n/**\n * Generic THREE.js Scene that tracks the dimensions and position of a DOM element while scrolling\n * Scene is positioned and scaled exactly above DOM element\n *\n * @author david@14islands.com\n */\nconst ScrollSceneImpl = ({\n  track,\n  children,\n  margin = 0, // Margin outside scissor to avoid clipping vertex displacement (px)\n  inViewportMargin,\n  inViewportThreshold,\n  visible = true,\n  hideOffscreen = true,\n  scissor = false,\n  debug = false,\n  as = 'scene',\n  priority = config.PRIORITY_SCISSORS,\n  ...props\n}: ScrollScene) => {\n  const inlineSceneRef = useCallback((node: any) => {\n    if (node !== null) {\n      setScene(node)\n    }\n  }, [])\n\n  const [scene, setScene] = useState<Scene | null>(scissor ? new Scene() : null)\n  const { requestRender, renderScissor } = useScrollRig()\n  const globalRender = useCanvasStore((state) => state.globalRender)\n\n  const { bounds, scale, position, scrollState, inViewport } = useTracker(track, {\n    rootMargin: inViewportMargin,\n    threshold: inViewportThreshold,\n  })\n\n  // Hide scene when outside of viewport if `hideOffscreen` or set to `visible` prop\n  useLayoutEffect(() => {\n    if (scene) scene.visible = hideOffscreen ? inViewport && visible : visible\n  }, [scene, inViewport, hideOffscreen, visible])\n\n  // RENDER FRAME\n  useFrame(\n    ({ gl, camera }) => {\n      if (!scene) return\n\n      if (scene.visible) {\n        // move scene\n        scene.position.y = position.y\n        scene.position.x = position.x\n\n        if (scissor) {\n          renderScissor({\n            gl,\n            scene,\n            camera,\n            left: bounds.left - margin,\n            top: bounds.positiveYUpBottom - margin,\n            width: bounds.width + margin * 2,\n            height: bounds.height + margin * 2,\n          })\n        } else {\n          requestRender()\n        }\n      }\n    },\n    globalRender ? priority : undefined\n  )\n\n  const content = (\n    <>\n      {(!children || debug) && scale && <DebugMesh scale={scale} />}\n      {children &&\n        scene &&\n        scale &&\n        children({\n          // inherited props\n          track,\n          margin,\n          // new props\n          scale,\n          scrollState,\n          inViewport,\n          // useFrame render priority (in case children need to run after)\n          priority: priority,\n          // tunnel the rest\n          ...props,\n        })}\n    </>\n  )\n\n  // portal if scissor or inline nested scene\n  const InlineElement: any = as\n  // @ts-ignore\n  return scissor && scene ? createPortal(content, scene) : <InlineElement ref={inlineSceneRef}>{content}</InlineElement>\n}\n\nconst ScrollScene = memo(ScrollSceneImpl)\n\nexport { ScrollScene }\n","import React, { memo, useEffect, useState, useCallback, MutableRefObject, ReactNode } from 'react'\nimport { Scene } from 'three'\nimport { useFrame, createPortal, useThree } from '@react-three/fiber'\n\nimport { useLayoutEffect } from '../hooks/useIsomorphicLayoutEffect'\nimport { config } from '../config'\nimport { useScrollRig } from '../hooks/useScrollRig'\nimport { DebugMesh } from './DebugMesh'\nimport { useTracker } from '../hooks/useTracker'\nimport type { Tracker } from '../hooks/useTrackerTypes'\nimport { PerspectiveCamera } from './PerspectiveCamera'\nimport { OrthographicCamera } from './OrthographicCamera'\n\nimport type { ScrollSceneChildProps } from './ScrollScene'\n\ninterface ViewportScrollScene {\n  track: MutableRefObject<HTMLElement>\n  children: (state: ScrollSceneChildProps) => ReactNode\n  margin?: number\n  inViewportMargin?: string\n  inViewportThreshold?: number\n  visible?: boolean\n  hideOffscreen?: boolean\n  debug?: boolean\n  orthographic?: boolean\n  priority?: number\n  hud?: boolean // clear depth to render on top\n  camera?: any\n}\n\n/**\n * Generic THREE.js Scene that tracks the dimensions and position of a DOM element while scrolling\n * Scene is rendered into a GL viewport matching the DOM position for better performance\n *\n * Adapted to @react-three/fiber from https://threejsfundamentals.org/threejs/lessons/threejs-multiple-scenes.html\n * @author david@14islands.com\n */\nconst Viewport = ({\n  track,\n  children,\n  margin = 0, // Margin outside viewport to avoid clipping vertex displacement (px)\n  visible = true,\n  hideOffscreen = true,\n  debug = false,\n  orthographic = false,\n  priority = config.PRIORITY_VIEWPORTS,\n  inViewport,\n  bounds,\n  scale,\n  scrollState,\n  camera,\n  hud,\n  ...props\n}: ViewportScrollScene & Tracker) => {\n  const scene = useThree((s) => s.scene)\n  const get = useThree((state) => state.get)\n  const setEvents = useThree((state) => state.setEvents)\n\n  const { renderViewport } = useScrollRig()\n\n  // Hide scene when outside of viewport if `hideOffscreen` or set to `visible` prop\n  useLayoutEffect(() => {\n    scene.visible = hideOffscreen ? inViewport && visible : visible\n  }, [inViewport, hideOffscreen, visible])\n\n  // From: https://github.com/pmndrs/drei/blob/d22fe0f58fd596c7bfb60a7a543cf6c80da87624/src/web/View.tsx#L80\n  useEffect(() => {\n    // Connect the event layer to the tracking element\n    const old = get().events.connected\n    setEvents({ connected: track.current })\n    return () => setEvents({ connected: old })\n  }, [])\n\n  // RENDER FRAME\n  useFrame(({ gl, scene, camera }) => {\n    // Render scene to viewport using local camera and limit updates using scissor test\n    if (scene.visible) {\n      renderViewport({\n        gl,\n        scene,\n        camera,\n        left: bounds.left - margin,\n        top: bounds.positiveYUpBottom - margin,\n        width: bounds.width + margin * 2,\n        height: bounds.height + margin * 2,\n        clearDepth: !!hud,\n      })\n    }\n  }, priority)\n\n  return (\n    <>\n      {!orthographic && <PerspectiveCamera manual margin={margin} makeDefault {...camera} />}\n      {orthographic && <OrthographicCamera manual margin={margin} makeDefault {...camera} />}\n      {(!children || debug) && scale && <DebugMesh scale={scale} />}\n      {children &&\n        // scene &&\n        scale &&\n        children({\n          // inherited props\n          track,\n          margin,\n          // new props\n          scale,\n          scrollState,\n          inViewport,\n          // useFrame render priority (in case children need to run after)\n          priority,\n          // tunnel the rest\n          ...props,\n        })}\n    </>\n  )\n}\n\nfunction ViewportScrollSceneImpl({\n  track,\n  margin = 0, // Margin outside viewport to avoid clipping vertex displacement (px)\n  inViewportMargin,\n  inViewportThreshold,\n  priority,\n  ...props\n}: ViewportScrollScene) {\n  const [scene] = useState(() => new Scene())\n\n  const { bounds, ...trackerProps } = useTracker(track, {\n    rootMargin: inViewportMargin,\n    threshold: inViewportThreshold,\n  })\n\n  // From: https://github.com/pmndrs/drei/blob/d22fe0f58fd596c7bfb60a7a543cf6c80da87624/src/web/View.tsx#L80\n  const compute = useCallback(\n    (event: any, state: any) => {\n      // limit events to DOM element bounds\n      if (track.current && event.target === track.current) {\n        const { width, height, left, top } = bounds\n        const mWidth = width + margin * 2\n        const mHeight = height + margin * 2\n        const x = event.clientX - left + margin\n        const y = event.clientY - top + margin\n        state.pointer.set((x / mWidth) * 2 - 1, -(y / mHeight) * 2 + 1)\n        state.raycaster.setFromCamera(state.pointer, state.camera)\n      }\n    },\n    [bounds]\n  )\n\n  return (\n    bounds &&\n    createPortal(\n      <Viewport track={track} bounds={bounds} priority={priority} margin={margin} {...props} {...trackerProps} />,\n      scene,\n      // @ts-ignore\n      { events: { compute, priority }, size: { width: bounds.width, height: bounds.height } }\n    )\n  )\n}\n\nconst ViewportScrollScene = memo(ViewportScrollSceneImpl)\n\nexport { ViewportScrollScene }\n","function shallowEqualArrays(arrA, arrB, equal = (a, b) => a === b) {\n  if (arrA === arrB) return true;\n  if (!arrA || !arrB) return false;\n  const len = arrA.length;\n  if (arrB.length !== len) return false;\n\n  for (let i = 0; i < len; i++) if (!equal(arrA[i], arrB[i])) return false;\n\n  return true;\n}\n\nconst globalCache = [];\n\nfunction query(fn, keys, preload = false, config = {}) {\n  for (const entry of globalCache) {\n    // Find a match\n    if (shallowEqualArrays(keys, entry.keys, entry.equal)) {\n      // If we're pre-loading and the element is present, just return\n      if (preload) return undefined; // If an error occurred, throw\n\n      if (Object.prototype.hasOwnProperty.call(entry, 'error')) throw entry.error; // If a response was successful, return\n\n      if (Object.prototype.hasOwnProperty.call(entry, 'response')) return entry.response; // If the promise is still unresolved, throw\n\n      if (!preload) throw entry.promise;\n    }\n  } // The request is new or has changed.\n\n\n  const entry = {\n    keys,\n    equal: config.equal,\n    promise: // Execute the promise\n    fn(...keys) // When it resolves, store its value\n    .then(response => entry.response = response) // Remove the entry if a lifespan was given\n    .then(() => {\n      if (config.lifespan && config.lifespan > 0) {\n        setTimeout(() => {\n          const index = globalCache.indexOf(entry);\n          if (index !== -1) globalCache.splice(index, 1);\n        }, config.lifespan);\n      }\n    }) // Store caught errors, they will be thrown in the render-phase to bubble into an error-bound\n    .catch(error => entry.error = error)\n  }; // Register the entry\n\n  globalCache.push(entry); // And throw the promise, this yields control back to React\n\n  if (!preload) throw entry.promise;\n  return undefined;\n}\n\nconst suspend = (fn, keys, config) => query(fn, keys, false, config);\n\nconst preload = (fn, keys, config) => void query(fn, keys, true, config);\n\nconst peek = keys => {\n  var _globalCache$find;\n\n  return (_globalCache$find = globalCache.find(entry => shallowEqualArrays(keys, entry.keys, entry.equal))) == null ? void 0 : _globalCache$find.response;\n};\n\nconst clear = keys => {\n  if (keys === undefined || keys.length === 0) globalCache.splice(0, globalCache.length);else {\n    const entry = globalCache.find(entry => shallowEqualArrays(keys, entry.keys, entry.equal));\n\n    if (entry) {\n      const index = globalCache.indexOf(entry);\n      if (index !== -1) globalCache.splice(index, 1);\n    }\n  }\n};\n\nexport { clear, peek, preload, suspend };\n","import { forwardRef, ReactNode } from 'react'\nimport { useCanvas } from '../hooks/useCanvas'\n\nimport { ScrollRigState } from '../hooks/useScrollRig'\n\ninterface IUseCanvas {\n  children: ReactNode | ((props: ScrollRigState) => ReactNode)\n  id?: string // persistent layout id\n  dispose?: boolean // dispose on unmount\n  [key: string]: any // Any props to reactively tunnel to the child\n}\n\nconst UseCanvas = forwardRef(({ children, id, dispose = true, ...props }: IUseCanvas, ref) => {\n  if (!children) return null\n  // auto update canvas with all props\n  useCanvas(children, { ...props, ref }, { key: id, dispose })\n  return null\n})\n\nexport { UseCanvas }\n","import { useEffect, useMemo, useCallback, ReactNode } from 'react'\nimport { MathUtils } from 'three'\n\nimport { useCanvasStore } from '../store'\nimport { useLayoutEffect } from '../hooks/useIsomorphicLayoutEffect'\n\nimport { ScrollRigState } from '../hooks/useScrollRig'\n/**\n * Adds THREE.js object to the GlobalCanvas while the component is mounted\n * @param {object} object THREE.js object3d\n */\nfunction useCanvas(\n  object: ReactNode | ((props: ScrollRigState) => ReactNode),\n  deps: any = {},\n  { key, dispose = true }: { key?: string; dispose?: boolean } = {}\n) {\n  const updateCanvas = useCanvasStore((state) => state.updateCanvas)\n  const renderToCanvas = useCanvasStore((state) => state.renderToCanvas)\n  const removeFromCanvas = useCanvasStore((state) => state.removeFromCanvas)\n\n  // auto generate uuid v4 key\n  const uniqueKey = useMemo(() => key || MathUtils.generateUUID(), [])\n\n  // render to canvas if not mounted already\n  useLayoutEffect(() => {\n    renderToCanvas(uniqueKey, object, { inactive: false })\n  }, [uniqueKey])\n\n  // remove from canvas if no usage (after render so new users have time to register)\n  useEffect(() => {\n    return () => {\n      removeFromCanvas(uniqueKey, dispose)\n    }\n  }, [uniqueKey])\n\n  // return function that can set new props on the canvas component\n  const set = useCallback(\n    (props: any) => {\n      updateCanvas(uniqueKey, props)\n    },\n    [updateCanvas, uniqueKey]\n  )\n\n  // auto update props when deps change\n  useEffect(() => {\n    set(deps)\n  }, [...Object.values(deps)])\n\n  return set\n}\n\nexport { useCanvas }\n","export default new Promise(resolve => {\n\tconst image = new Image();\n\timage.addEventListener('error', () => resolve(false));\n\timage.addEventListener('load', () => resolve(image.width === 1));\n\timage.src = 'data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA=';\n}).catch(() => false);\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","import { useEffect, RefObject, useMemo, useState } from 'react'\nimport { useThree, useLoader } from '@react-three/fiber'\nimport { Texture, CanvasTexture, ImageBitmapLoader, TextureLoader, DefaultLoadingManager } from 'three'\nimport { suspend } from 'suspend-react'\nimport supportsWebP from 'supports-webp'\nimport equal from 'fast-deep-equal'\n\nimport { useWindowSize } from './useWindowSize'\nimport { useCanvasStore } from '../store'\n\n/**\n *  Create Threejs Texture from DOM image tag\n *\n *  - Supports <picture> and `srcset` - uses `currentSrc` to get the responsive image source\n *\n *  - Supports lazy-loading image - suspends until first load event. Warning: the GPU upload can cause jank\n *\n *  - Relies on browser cache to avoid loading image twice. We let the <img> tag load the image and suspend until it's ready.\n *\n *  - NOTE: You must add the `crossOrigin` attribute\n *     <img src=\"\" alt=\"\" crossOrigin=\"anonymous\"/>\n */\n\nlet hasWebpSupport: boolean = false\n// this test is fast - \"should\" run before first image is requested\nsupportsWebP.then((supported) => {\n  hasWebpSupport = supported\n})\n\nfunction useTextureLoader() {\n  // Use an ImageBitmapLoader if imageBitmaps are supported. Moves much of the\n  // expensive work of uploading a texture to the GPU off the main thread.\n  // Copied from: github.com/mrdoob/three.js/blob/master/examples/jsm/loaders/GLTFLoader.js#L2424\n  const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent) === true\n  const isFirefox = navigator.userAgent.indexOf('Firefox') > -1\n  // @ts-ignore\n  const firefoxVersion = isFirefox ? navigator.userAgent.match(/Firefox\\/([0-9]+)\\./)[1] : -1\n  return typeof createImageBitmap === 'undefined' || isSafari || (isFirefox && firefoxVersion < 98)\n}\n\nfunction useImageAsTexture(\n  imgRef: RefObject<HTMLImageElement>,\n  { initTexture = true, premultiplyAlpha = 'default' } = {}\n) {\n  const gl = useThree((s) => s.gl)\n  const size = useWindowSize()\n  const debug = useCanvasStore((state) => state.debug)\n\n  // This is a workaround for detecting lazy loading images\n  // unfortunately the `loadstart` event is not working everywhere: https://bugs.chromium.org/p/chromium/issues/detail?id=458851\n  // So we can't suspend while lazy images are loading - only detect when they finished\n  const [newSrcDetected, setNewSrcDetected] = useState(imgRef.current?.currentSrc)\n  useEffect(() => {\n    const el = imgRef.current\n    const onLoad = () => {\n      setNewSrcDetected(imgRef.current?.currentSrc)\n    }\n    el?.addEventListener('load', onLoad)\n    return () => el?.removeEventListener('load', onLoad)\n  }, [imgRef, newSrcDetected, setNewSrcDetected])\n\n  // suspend until we have currentSrc for this `size`\n  const currentSrc = suspend(\n    () => {\n      DefaultLoadingManager.itemStart('waiting for DOM image')\n      return new Promise((resolve) => {\n        const el = imgRef.current\n\n        function returnResolve() {\n          resolve(el?.currentSrc)\n          DefaultLoadingManager.itemEnd('waiting for DOM image')\n        }\n\n        // respond to future load event if not cached\n        el?.addEventListener('load', returnResolve, { once: true })\n\n        // detect if loaded from browser cache\n        if (el?.complete) {\n          el?.removeEventListener('load', returnResolve)\n          returnResolve()\n        }\n      })\n    },\n    [imgRef, size, imgRef.current?.currentSrc, newSrcDetected],\n    { equal } // use deep-equal since size ref seems to update on route change\n  ) as string\n\n  const LoaderProto = useTextureLoader() ? TextureLoader : ImageBitmapLoader\n\n  // @ts-ignore\n  const result: any = useLoader(LoaderProto, currentSrc, (loader) => {\n    if (loader instanceof ImageBitmapLoader) {\n      loader.setOptions({\n        colorSpaceConversion: 'none',\n        premultiplyAlpha, // \"none\" increases blocking time in lighthouse\n        imageOrientation: 'flipY',\n      })\n      // Add webp to Accept header if supported\n      // TODO: add check for AVIF\n      loader.setRequestHeader({\n        Accept: `${hasWebpSupport ? 'image/webp,' : ''}*/*`,\n      })\n    }\n  })\n\n  const texture = useMemo(() => {\n    if (result instanceof Texture) {\n      return result\n    }\n    if (result instanceof ImageBitmap) {\n      return new CanvasTexture(result)\n    }\n  }, [result]) as Texture\n\n  // https://github.com/mrdoob/three.js/issues/22696\n  // Upload the texture to the GPU immediately instead of waiting for the first render\n  useEffect(\n    function uploadTextureToGPU() {\n      initTexture && gl.initTexture(texture)\n      debug && console.log('useImageAsTexture', 'initTexture()')\n    },\n    [gl, texture, initTexture]\n  )\n\n  return texture\n}\n\nexport { useImageAsTexture }\n","function t(){return t=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},t.apply(this,arguments)}function e(t,e,i){return Math.max(t,Math.min(e,i))}class i{advance(t){var i;if(!this.isRunning)return;let s=!1;if(this.lerp)this.value=(1-(o=this.lerp))*this.value+o*this.to,Math.round(this.value)===this.to&&(this.value=this.to,s=!0);else{this.currentTime+=t;const i=e(0,this.currentTime/this.duration,1);s=i>=1;const o=s?1:this.easing(i);this.value=this.from+(this.to-this.from)*o}var o;null==(i=this.onUpdate)||i.call(this,this.value,{completed:s}),s&&this.stop()}stop(){this.isRunning=!1}fromTo(t,e,{lerp:i=.1,duration:s=1,easing:o=(t=>t),onUpdate:n}){this.from=this.value=t,this.to=e,this.lerp=i,this.duration=s,this.easing=o,this.currentTime=0,this.isRunning=!0,this.onUpdate=n}}function s(t,e){let i;return function(){let s=arguments,o=this;clearTimeout(i),i=setTimeout(function(){t.apply(o,s)},e)}}class o{constructor(t,e){this.onWindowResize=()=>{this.width=window.innerWidth,this.height=window.innerHeight},this.onWrapperResize=()=>{this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight},this.onContentResize=()=>{const t=this.wrapper===window?document.documentElement:this.wrapper;this.scrollHeight=t.scrollHeight,this.scrollWidth=t.scrollWidth},this.wrapper=t,this.content=e,this.wrapper===window?(window.addEventListener(\"resize\",this.onWindowResize,!1),this.onWindowResize()):(this.wrapperResizeObserver=new ResizeObserver(s(this.onWrapperResize,100)),this.wrapperResizeObserver.observe(this.wrapper),this.onWrapperResize()),this.contentResizeObserver=new ResizeObserver(s(this.onContentResize,100)),this.contentResizeObserver.observe(this.content),this.onContentResize()}destroy(){var t,e;window.removeEventListener(\"resize\",this.onWindowResize,!1),null==(t=this.wrapperResizeObserver)||t.disconnect(),null==(e=this.contentResizeObserver)||e.disconnect()}get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}}let n=()=>({events:{},emit(t,...e){let i=this.events[t]||[];for(let t=0,s=i.length;t<s;t++)i[t](...e)},on(t,e){var i;return(null==(i=this.events[t])?void 0:i.push(e))||(this.events[t]=[e]),()=>{var i;this.events[t]=null==(i=this.events[t])?void 0:i.filter(t=>e!==t)}}});class r{constructor(t,{wheelMultiplier:i=1,touchMultiplier:s=2,normalizeWheel:o=!1}){this.onTouchStart=t=>{const{clientX:e,clientY:i}=t.targetTouches?t.targetTouches[0]:t;this.touchStart.x=e,this.touchStart.y=i,this.lastDelta={x:0,y:0}},this.onTouchMove=t=>{const{clientX:e,clientY:i}=t.targetTouches?t.targetTouches[0]:t,s=-(e-this.touchStart.x)*this.touchMultiplier,o=-(i-this.touchStart.y)*this.touchMultiplier;this.touchStart.x=e,this.touchStart.y=i,this.lastDelta={x:s,y:o},this.emitter.emit(\"scroll\",{type:\"touch\",deltaX:s,deltaY:o,event:t})},this.onTouchEnd=t=>{this.emitter.emit(\"scroll\",{type:\"touch\",inertia:!0,deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:t})},this.onWheel=t=>{let{deltaX:i,deltaY:s}=t;this.normalizeWheel&&(i=e(-100,i,100),s=e(-100,s,100)),i*=this.wheelMultiplier,s*=this.wheelMultiplier,this.emitter.emit(\"scroll\",{type:\"wheel\",deltaX:i,deltaY:s,event:t})},this.element=t,this.wheelMultiplier=i,this.touchMultiplier=s,this.normalizeWheel=o,this.touchStart={x:null,y:null},this.emitter=n(),this.element.addEventListener(\"wheel\",this.onWheel,{passive:!1}),this.element.addEventListener(\"touchstart\",this.onTouchStart,{passive:!1}),this.element.addEventListener(\"touchmove\",this.onTouchMove,{passive:!1}),this.element.addEventListener(\"touchend\",this.onTouchEnd,{passive:!1})}on(t,e){return this.emitter.on(t,e)}destroy(){this.emitter.events={},this.element.removeEventListener(\"wheel\",this.onWheel,{passive:!1}),this.element.removeEventListener(\"touchstart\",this.onTouchStart,{passive:!1}),this.element.removeEventListener(\"touchmove\",this.onTouchMove,{passive:!1}),this.element.removeEventListener(\"touchend\",this.onTouchEnd,{passive:!1})}}class l{constructor({direction:e,gestureDirection:s,mouseMultiplier:l,smooth:h,wrapper:a=window,content:c=document.documentElement,wheelEventsTarget:u=a,smoothWheel:p=null==h||h,smoothTouch:d=!1,syncTouch:m=!1,syncTouchLerp:v=.1,touchInertiaMultiplier:g=35,duration:S,easing:w=(t=>Math.min(1,1.001-Math.pow(2,-10*t))),lerp:f=(S?null:.1),infinite:y=!1,orientation:T=(null!=e?e:\"vertical\"),gestureOrientation:z=(null!=s?s:\"vertical\"),touchMultiplier:M=1,wheelMultiplier:E=(null!=l?l:1),normalizeWheel:L=!1}={}){this.onVirtualScroll=({type:e,inertia:i,deltaX:s,deltaY:o,event:n})=>{if(n.ctrlKey)return;const r=\"touch\"===e,l=\"wheel\"===e;if(\"vertical\"===this.options.gestureOrientation&&0===o||\"horizontal\"===this.options.gestureOrientation&&0===s||r&&\"vertical\"===this.options.gestureOrientation&&0===this.scroll&&!this.options.infinite&&o<=0)return;if(n.composedPath().find(t=>null==t||null==t.hasAttribute?void 0:t.hasAttribute(\"data-lenis-prevent\")))return;if(this.isStopped||this.isLocked)return void n.preventDefault();if(this.isSmooth=(this.options.smoothTouch||this.options.syncTouch)&&r||this.options.smoothWheel&&l,!this.isSmooth)return this.isScrolling=!1,void this.animate.stop();n.preventDefault();let h=o;\"both\"===this.options.gestureOrientation?h=Math.abs(o)>Math.abs(s)?o:s:\"horizontal\"===this.options.gestureOrientation&&(h=s);const a=r&&this.options.syncTouch,c=r&&i&&Math.abs(h)>1;c&&(h=this.velocity*this.options.touchInertiaMultiplier),this.scrollTo(this.targetScroll+h,t({programmatic:!1},a&&{lerp:c?this.syncTouchLerp:.4}))},this.onScroll=()=>{if(!this.isScrolling){const t=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.direction=Math.sign(this.animatedScroll-t),this.emit()}},e&&console.warn(\"Lenis: `direction` option is deprecated, use `orientation` instead\"),s&&console.warn(\"Lenis: `gestureDirection` option is deprecated, use `gestureOrientation` instead\"),l&&console.warn(\"Lenis: `mouseMultiplier` option is deprecated, use `wheelMultiplier` instead\"),h&&console.warn(\"Lenis: `smooth` option is deprecated, use `smoothWheel` instead\"),window.lenisVersion=\"1.0.10\",a!==document.documentElement&&a!==document.body||(a=window),this.options={wrapper:a,content:c,wheelEventsTarget:u,smoothWheel:p,smoothTouch:d,syncTouch:m,syncTouchLerp:v,touchInertiaMultiplier:g,duration:S,easing:w,lerp:f,infinite:y,gestureOrientation:z,orientation:T,touchMultiplier:M,wheelMultiplier:E,normalizeWheel:L},this.dimensions=new o(a,c),this.rootElement.classList.add(\"lenis\"),this.velocity=0,this.isStopped=!1,this.isSmooth=p||d,this.isScrolling=!1,this.targetScroll=this.animatedScroll=this.actualScroll,this.animate=new i,this.emitter=n(),this.options.wrapper.addEventListener(\"scroll\",this.onScroll,{passive:!1}),this.virtualScroll=new r(u,{touchMultiplier:M,wheelMultiplier:E,normalizeWheel:L}),this.virtualScroll.on(\"scroll\",this.onVirtualScroll)}destroy(){this.emitter.events={},this.options.wrapper.removeEventListener(\"scroll\",this.onScroll,{passive:!1}),this.virtualScroll.destroy()}on(t,e){return this.emitter.on(t,e)}off(t,e){var i;this.emitter.events[t]=null==(i=this.emitter.events[t])?void 0:i.filter(t=>e!==t)}setScroll(t){this.isHorizontal?this.rootElement.scrollLeft=t:this.rootElement.scrollTop=t}emit(){this.emitter.emit(\"scroll\",this)}reset(){this.isLocked=!1,this.isScrolling=!1,this.velocity=0,this.animate.stop()}start(){this.isStopped=!1,this.reset()}stop(){this.isStopped=!0,this.animate.stop(),this.reset()}raf(t){const e=t-(this.time||t);this.time=t,this.animate.advance(.001*e)}scrollTo(t,{offset:i=0,immediate:s=!1,lock:o=!1,duration:n=this.options.duration,easing:r=this.options.easing,lerp:l=!n&&this.options.lerp,onComplete:h=null,force:a=!1,programmatic:c=!0}={}){if(!this.isStopped||a){if([\"top\",\"left\",\"start\"].includes(t))t=0;else if([\"bottom\",\"right\",\"end\"].includes(t))t=this.limit;else{var u;let e;if(\"string\"==typeof t?e=document.querySelector(t):null!=(u=t)&&u.nodeType&&(e=t),e){if(this.options.wrapper!==window){const t=this.options.wrapper.getBoundingClientRect();i-=this.isHorizontal?t.left:t.top}const s=e.getBoundingClientRect();t=(this.isHorizontal?s.left:s.top)+this.animatedScroll}}if(\"number\"==typeof t){if(t+=i,this.options.infinite?c&&(this.targetScroll=this.animatedScroll=this.scroll):t=e(0,t,this.limit),s)return this.animatedScroll=this.targetScroll=t,this.setScroll(this.scroll),this.reset(),this.emit(),void(null==h||h());if(!c){if(t===this.targetScroll)return;this.targetScroll=t}this.animate.fromTo(this.animatedScroll,t,{duration:n,easing:r,lerp:l,onUpdate:(t,{completed:e})=>{o&&(this.isLocked=!0),this.isScrolling=!0,this.velocity=t-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=t,this.setScroll(this.scroll),c&&(this.targetScroll=t),e&&(o&&(this.isLocked=!1),requestAnimationFrame(()=>{this.isScrolling=!1}),this.velocity=0,null==h||h()),this.emit()}})}}}get rootElement(){return this.options.wrapper===window?this.options.content:this.options.wrapper}get limit(){return this.isHorizontal?this.dimensions.limit.x:this.dimensions.limit.y}get isHorizontal(){return\"horizontal\"===this.options.orientation}get actualScroll(){return this.isHorizontal?this.rootElement.scrollLeft:this.rootElement.scrollTop}get scroll(){return this.options.infinite?function(t,e){let i=t%e;return(e>0&&i<0||e<0&&i>0)&&(i+=e),i}(this.animatedScroll,this.limit):this.animatedScroll}get progress(){return 0===this.limit?1:this.scroll/this.limit}get isSmooth(){return this.__isSmooth}set isSmooth(t){this.__isSmooth!==t&&(this.rootElement.classList.toggle(\"lenis-smooth\",t),this.__isSmooth=t)}get isScrolling(){return this.__isScrolling}set isScrolling(t){this.__isScrolling!==t&&(this.rootElement.classList.toggle(\"lenis-scrolling\",t),this.__isScrolling=t)}get isStopped(){return this.__isStopped}set isStopped(t){this.__isStopped!==t&&(this.rootElement.classList.toggle(\"lenis-stopped\",t),this.__isStopped=t)}}export{l as default};\n//# sourceMappingURL=lenis.modern.mjs.map\n","import { useEffect, useRef, useCallback, ReactElement, forwardRef, useImperativeHandle } from 'react'\nimport Lenis from '@studio-freight/lenis'\n\nimport { useLayoutEffect } from '../hooks/useIsomorphicLayoutEffect'\nimport { useCanvasStore } from '../store'\nimport { ISmoothScrollbar, ScrollCallback, ScrollToTarget, ScrollToConfig } from './SmoothScrollbarTypes'\n\nconst POINTER_EVENTS_ENABLE_VELOCITY = 1\nconst POINTER_EVENTS_DISABLE_VELOCITY = 1.5\n\nconst SmoothScrollbarImpl = (\n  {\n    children,\n    enabled = true,\n    locked = false,\n    scrollRestoration = 'auto',\n    disablePointerOnScroll = true,\n    horizontal = false,\n    scrollInContainer = false,\n    updateGlobalState = true,\n    onScroll,\n    config = {},\n    invalidate = () => {},\n    addEffect,\n  }: ISmoothScrollbar,\n  ref: any\n) => {\n  const innerRef = useRef<HTMLElement>()\n  const lenis = useRef<Lenis>()\n  const preventPointer = useRef(false)\n  const globalScrollState = useCanvasStore((s) => s.scroll)\n\n  // Expose lenis imperative API\n  useImperativeHandle(ref, () => ({\n    start: () => lenis.current?.start(),\n    stop: () => lenis.current?.stop(),\n    on: (event: string, cb: ScrollCallback) => lenis.current?.on(event, cb),\n    notify: () => lenis.current?.emit(), // backwards compatible\n    emit: () => lenis.current?.emit(),\n    scrollTo: (target: ScrollToTarget, props: ScrollToConfig) => lenis.current?.scrollTo(target, props),\n    raf: (time: number) => lenis.current?.raf(time),\n    __lenis: lenis.current,\n  }))\n\n  // disable pointer events while scrolling to avoid slow event handlers\n  const preventPointerEvents = useCallback(\n    (prevent: boolean) => {\n      if (!disablePointerOnScroll) return\n      if (innerRef.current && preventPointer.current !== prevent) {\n        preventPointer.current = prevent\n        innerRef.current.style.pointerEvents = prevent ? 'none' : 'auto'\n      }\n    },\n    [disablePointerOnScroll, innerRef, preventPointer]\n  )\n\n  // apply chosen scroll restoration\n  useLayoutEffect(() => {\n    if ('scrollRestoration' in window.history) {\n      window.history.scrollRestoration = scrollRestoration\n    }\n  }, [])\n\n  // INIT LENIS\n  useLayoutEffect(() => {\n    // Set up scroll containers - allows scrolling without resizing window on iOS/mobile\n    const html = document.documentElement\n    const wrapper = document.body\n    const content = document.body.firstElementChild\n\n    html.classList.toggle('ScrollRig-scrollHtml', scrollInContainer)\n    wrapper.classList.toggle('ScrollRig-scrollWrapper', scrollInContainer)\n\n    if (scrollInContainer) {\n      Object.assign(config, {\n        smoothTouch: true,\n        wrapper,\n        content,\n      })\n    }\n\n    lenis.current = new Lenis({\n      orientation: horizontal ? 'horizontal' : 'vertical',\n      ...config,\n    })\n\n    // let r3f drive the frameloop\n    let removeEffect: () => void\n    if (addEffect) {\n      removeEffect = addEffect((time: number) => lenis.current?.raf(time))\n    } else {\n      // manual animation frame\n      // TODO use framer motion / popmotion render loop?\n      let _raf: number\n      function raf(time: number) {\n        lenis.current?.raf(time)\n        _raf = requestAnimationFrame(raf)\n      }\n      _raf = requestAnimationFrame(raf)\n      removeEffect = () => cancelAnimationFrame(_raf)\n    }\n\n    return () => {\n      removeEffect()\n      lenis.current?.destroy()\n    }\n  }, [])\n\n  // BIND TO LENIS SCROLL EVENT\n  useLayoutEffect(() => {\n    const _onScroll = ({ scroll, limit, velocity, direction, progress }: any) => {\n      const y = !horizontal ? scroll : 0\n      const x = horizontal ? scroll : 0\n\n      // update global scroll store\n      if (updateGlobalState) {\n        globalScrollState.y = y\n        globalScrollState.x = x\n        globalScrollState.limit = limit\n        globalScrollState.velocity = velocity\n        globalScrollState.direction = direction\n        globalScrollState.progress = progress || 0 // avoid NaN from Lenis\n      }\n\n      if (Math.abs(velocity) > POINTER_EVENTS_DISABLE_VELOCITY) {\n        preventPointerEvents(true)\n      }\n      if (Math.abs(velocity) < POINTER_EVENTS_ENABLE_VELOCITY) {\n        preventPointerEvents(false)\n      }\n\n      onScroll && onScroll({ scroll, limit, velocity, direction, progress })\n\n      invalidate() // demand a R3F frame on scroll\n    }\n\n    lenis.current?.on('scroll', _onScroll)\n\n    // update global state\n    if (updateGlobalState) {\n      globalScrollState.scrollDirection = horizontal ? 'horizontal' : 'vertical'\n\n      // expose global scrollTo and onScroll function to subscribe to scroll events\n      useCanvasStore.setState({\n        scrollTo: (...args) => {\n          lenis.current?.scrollTo(...args)\n        },\n        onScroll: (cb: ScrollCallback) => {\n          lenis.current?.on('scroll', cb)\n          lenis.current?.emit() // send current scroll to new subscriber\n          return () => lenis.current?.off('scroll', cb)\n        },\n      })\n\n      // Set current scroll position on load in case reloaded further down\n      useCanvasStore.getState().scroll.y = window.scrollY\n      useCanvasStore.getState().scroll.x = window.scrollX\n    }\n\n    // fire our internal scroll callback to update globalState\n    lenis.current?.emit()\n    return () => {\n      lenis.current?.off('scroll', _onScroll)\n      // reset store\n      useCanvasStore.setState({\n        onScroll: () => () => {},\n        scrollTo: () => {},\n      })\n    }\n  }, [])\n\n  // Interaction events - invalidate R3F loop and enable pointer events\n  useLayoutEffect(() => {\n    const invalidateOnWheelEvent = () => invalidate()\n    const onPointerInteraction = () => preventPointerEvents(false)\n    window.addEventListener('pointermove', onPointerInteraction)\n    window.addEventListener('pointerdown', onPointerInteraction)\n    window.addEventListener('wheel', invalidateOnWheelEvent)\n    return () => {\n      window.removeEventListener('pointermove', onPointerInteraction)\n      window.removeEventListener('pointerdown', onPointerInteraction)\n      window.removeEventListener('wheel', invalidateOnWheelEvent)\n    }\n  }, [])\n\n  // Mark as enabled in global state\n  useEffect(() => {\n    if (updateGlobalState) {\n      document.documentElement.classList.toggle('js-smooth-scrollbar-enabled', enabled)\n      document.documentElement.classList.toggle('js-smooth-scrollbar-disabled', !enabled)\n      useCanvasStore.setState({ hasSmoothScrollbar: enabled })\n    }\n  }, [enabled])\n\n  useEffect(() => {\n    locked ? lenis.current?.stop() : lenis.current?.start()\n  }, [locked])\n\n  {\n    /* Use function child so we can spread props\n    - for instance disable pointer events while scrolling */\n  }\n  return children({ ref: innerRef })\n}\n\nexport const SmoothScrollbar = forwardRef<any, ISmoothScrollbar>(SmoothScrollbarImpl)\n","import React, { forwardRef } from 'react'\nimport { SmoothScrollbar } from '../scrollbar/SmoothScrollbar'\nimport { ISmoothScrollbar } from '../scrollbar/SmoothScrollbarTypes'\nimport { addEffect, invalidate } from '@react-three/fiber'\n\nfunction R3FSmoothScrollbar(props: ISmoothScrollbar, ref: any) {\n  return <SmoothScrollbar ref={ref} invalidate={invalidate} addEffect={addEffect} {...props} />\n}\n\nexport default forwardRef<any, ISmoothScrollbar>(R3FSmoothScrollbar)\n","import React, { useMemo, useEffect, ReactNode, MutableRefObject } from 'react'\nimport { Color, Material } from 'three'\nimport { useThree } from '@react-three/fiber'\nimport { Text } from '@react-three/drei'\n\nimport { useScrollRig } from '../src'\n\n/**\n * Returns a WebGL Troika text mesh styled as the source DOM element\n */\n\ninterface WebGLTextProps {\n  el: MutableRefObject<HTMLElement>\n  children?: ReactNode\n  material?: Material\n  scale?: any\n  font?: string\n  fontOffsetY?: number\n  fontOffsetX?: number\n  overrideEmissive?: boolean\n  color?: string\n}\n\nexport const WebGLText = ({\n  el,\n  children,\n  material,\n  scale,\n  font,\n  fontOffsetY = 0,\n  fontOffsetX = 0,\n  overrideEmissive = false,\n  color,\n  ...props\n}: WebGLTextProps) => {\n  const { size } = useThree()\n  const { scaleMultiplier } = useScrollRig()\n\n  const { textColor, fontSize, textAlign, lineHeight, letterSpacing } = useMemo(() => {\n    if (!el.current) return {}\n    const cs = window.getComputedStyle(el.current)\n\n    // font size relative letter spacing\n    const letterSpacing = (parseFloat(cs.letterSpacing) || 0) / parseFloat(cs.fontSize)\n    const lineHeight = (parseFloat(cs.lineHeight) || 0) / parseFloat(cs.fontSize)\n    const textColor = new Color(color || cs.color).convertSRGBToLinear()\n\n    return {\n      letterSpacing,\n      lineHeight,\n      textColor,\n      fontSize: parseFloat(cs.fontSize) * scaleMultiplier,\n      textAlign: cs.textAlign,\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [el, size, scale, color, scaleMultiplier]) // recalc on resize\n\n  useEffect(() => {\n    if (material && overrideEmissive) {\n      // @ts-ignore\n      material.emissive = color\n    }\n  }, [material, color, overrideEmissive])\n\n  let xOffset = 0\n  if (textAlign === 'left' || textAlign === 'start') {\n    xOffset = scale[0] * -0.5\n  } else if (textAlign === 'right' || textAlign === 'end') {\n    xOffset = scale[0] * 0.5\n  }\n\n  const yOffset = scale ? scale[1] * 0.5 : size.height * 0.5\n\n  return (\n    <Text\n      fontSize={fontSize}\n      maxWidth={scale ? scale[0] : size.width}\n      lineHeight={lineHeight}\n      // @ts-ignore\n      textAlign={textAlign}\n      letterSpacing={letterSpacing}\n      overflowWrap=\"break-word\"\n      font={font}\n      color={textColor}\n      // @ts-ignore\n      anchorX={textAlign}\n      anchorY=\"top\" // so text moves down if row breaks\n      // @ts-ignore\n      position={[xOffset + fontSize * fontOffsetX, yOffset + fontSize * fontOffsetY, 0]} // font specific\n      material={material}\n      {...props}\n    >\n      {children}\n    </Text>\n  )\n}\n","import React, {\n  useRef,\n  useMemo,\n  useEffect,\n  forwardRef,\n  MutableRefObject,\n  ForwardedRef,\n  useImperativeHandle,\n} from 'react'\nimport { Color, Vector2, ShaderMaterial, Mesh, ShaderMaterialParameters } from 'three'\nimport { useFrame, useThree } from '@react-three/fiber'\n\nimport { useScrollRig, useImageAsTexture, useScrollbar } from '../src'\n\ninterface WebGLImageProps {\n  el: MutableRefObject<HTMLImageElement>\n  scale?: any\n  scrollState?: any\n  vertexShader?: string\n  fragmentShader?: string\n  invalidateFrameLoop: boolean\n  widthSegments?: number\n  heightSegments?: number\n}\n\nexport const WebGLImage = forwardRef(\n  (\n    {\n      el,\n      scale,\n      scrollState,\n      vertexShader,\n      fragmentShader,\n      invalidateFrameLoop = false,\n      widthSegments = 128,\n      heightSegments = 128,\n      ...props\n    }: WebGLImageProps,\n    ref: ForwardedRef<Mesh>\n  ) => {\n    const material = useRef<ShaderMaterial>(null!)\n    const mesh = useRef<Mesh>(null!)\n    useImperativeHandle(ref, () => mesh.current)\n\n    const { invalidate, gl, size } = useThree()\n    const pixelRatio = useThree((s) => s.viewport.dpr)\n    const { scroll } = useScrollbar()\n    const { scaleMultiplier } = useScrollRig()\n\n    const texture = useImageAsTexture(el)\n\n    const uniforms = useMemo(() => {\n      return {\n        u_color: { value: new Color('black') },\n        u_time: { value: 0 },\n        u_pixelRatio: { value: pixelRatio },\n        u_progress: { value: 0 },\n        u_visibility: { value: 0 },\n        u_viewport: { value: 0 },\n        u_velocity: { value: 0 }, // scroll speed\n        u_res: { value: new Vector2() }, // screen dimensions\n        u_rect: { value: new Vector2() }, // DOM el dimensions\n        u_size: { value: new Vector2() }, // Texture dimensions\n        u_texture: { value: null },\n        u_loaded: { value: false },\n        u_scaleMultiplier: { value: scaleMultiplier },\n      }\n    }, [pixelRatio])\n\n    // Fade in when texture loaded\n    useEffect(() => {\n      if (!texture) return\n      if (!material.current) return\n      material.current.uniforms.u_texture.value = texture\n      material.current.uniforms.u_size.value.set(texture.image.width, texture.image.height)\n      material.current.uniforms.u_loaded.value = true\n    }, [texture, gl])\n\n    useEffect(() => {\n      if (!material.current) return\n      material.current.uniforms.u_res.value.set(size.width, size.height)\n      material.current.uniforms.u_rect.value.set(scale?.[0], scale?.[1])\n    }, [size, scale])\n\n    useFrame((_, delta) => {\n      if (!scrollState.inViewport || !mesh.current || !material.current) return\n\n      if (!material.current.uniforms.u_loaded.value) return\n\n      material.current.uniforms.u_time.value += delta\n\n      // update scale while animating too\n      material.current.uniforms.u_rect.value.set(mesh.current.scale.x, mesh.current.scale.y)\n\n      // px velocity\n      material.current.uniforms.u_velocity.value = scroll.velocity\n\n      // percent of total visible distance that was scrolled (0 = just outside bottom of screen, 1 = just outside top of screen)\n      material.current.uniforms.u_progress.value = scrollState.progress\n\n      // percent of item height in view\n      material.current.uniforms.u_visibility.value = scrollState.visibility\n      // percent of window height scrolled since visible\n      material.current.uniforms.u_viewport.value = scrollState.viewport\n\n      if (invalidateFrameLoop) invalidate()\n    })\n\n    const args = useMemo(\n      () => [\n        {\n          vertexShader,\n          fragmentShader,\n        },\n      ],\n      [vertexShader, fragmentShader]\n    )\n\n    return (\n      <>\n        <mesh ref={mesh} {...props}>\n          <planeGeometry attach=\"geometry\" args={[1, 1, widthSegments, heightSegments]} />\n          <shaderMaterial\n            ref={material}\n            args={args as [ShaderMaterialParameters]}\n            transparent={true}\n            uniforms={uniforms}\n          />\n        </mesh>\n      </>\n    )\n  }\n)\n","import React, { useRef } from 'react'\nimport { useFrame, useThree } from '@react-three/fiber'\nimport { Mesh } from 'three'\n\nimport { ScrollScene, useScrollRig } from '../src'\n\n// Parallax group inside ScrollScene\nconst ParallaxGroup = ({ children, scrollState, parallax }: any) => {\n  const mesh = useRef<Mesh>(null!)\n  const size = useThree((s) => s.size)\n  const { scaleMultiplier } = useScrollRig()\n\n  useFrame(() => {\n    if (!scrollState.inViewport) return\n    const parallaxProgress = scrollState.progress * 2 - 1\n    mesh.current.position.y = parallax * parallaxProgress * scaleMultiplier * size.height\n  })\n\n  return <mesh ref={mesh}>{children}</mesh>\n}\n\n/* Speed=1 is no parallax */\nexport const ParallaxScrollScene = ({ children, speed = 1, ...props }: any) => {\n  const extraMargin = 50 // add 50vh extra margin to avoid aggressive clipping\n  const parallaxAmount = speed - 1\n  return (\n    // @ts-ignore\n    <ScrollScene scissor={false} inViewportMargin={`${Math.max(0, 1 - 0.5) * 200 + extraMargin}%`} {...props}>\n      {(props) => (\n        <ParallaxGroup parallax={parallaxAmount} {...props}>\n          {children(props)}\n        </ParallaxGroup>\n      )}\n    </ScrollScene>\n  )\n}\n","// https://www.typescriptlang.org/docs/handbook/modules.html#ambient-modules\n/// <reference path=\"../src/types/global.ts\" />\n\nimport React, { useRef, useMemo } from 'react'\nimport { useFrame, useThree } from '@react-three/fiber'\nimport { Group } from 'three'\nimport vecn from 'vecn'\n// @ts-ignore\nimport lerp from '@14islands/lerp'\n\nimport { ScrollScene, useScrollRig } from '../src'\n\n// Sticky mesh that covers full viewport size\nconst StickyChild = ({\n  children,\n  childTop,\n  childBottom,\n  scrollState,\n  parentScale,\n  childScale,\n  scaleMultiplier,\n  priority,\n  stickyLerp = 1.0,\n}: any) => {\n  const group = useRef<Group>(null!)\n  const size = useThree((s) => s.size)\n\n  useFrame((_, delta) => {\n    if (!scrollState.inViewport) return\n\n    const topOffset = (childTop / size.height) * scaleMultiplier\n    const bottomOffset = (childBottom / parentScale[1]) * scaleMultiplier\n\n    //  move to top of sticky area\n    const yTop = parentScale[1] * 0.5 - childScale[1] * 0.5\n    const yBottom = -parentScale[1] * 0.5 + childScale[1] * 0.5\n    const ySticky = -childTop + yTop - (scrollState.viewport - 1) * size.height * scaleMultiplier\n\n    let y = group.current.position.y\n\n    // enter\n    if (scrollState.viewport + topOffset < 1) {\n      y = yTop\n    }\n    // sticky\n    else if (scrollState.visibility - bottomOffset < 1) {\n      y = ySticky\n    }\n    // exit\n    else {\n      y = yBottom\n    }\n\n    group.current.position.y = lerp(group.current.position.y, y, stickyLerp, delta)\n  }, priority) // must happen after ScrollScene's useFrame to be buttery\n\n  return <group ref={group}>{children}</group>\n}\n\nconst renderAsSticky = (\n  children: any,\n  size: any,\n  childStyle: any,\n  scaleMultiplier: number,\n  { stickyLerp, fillViewport }: any\n) => {\n  return ({ scale, ...props }: any) => {\n    // set child's scale to 100vh/100vw instead of the full DOM el\n    // the DOM el should be taller to indicate how far the scene stays sticky\n    let childScale = vecn.vec3(parseFloat(childStyle.width), parseFloat(childStyle.height), 1)\n    let childTop = parseFloat(childStyle.top)\n    let childBottom = size.height - childTop - childScale[1]\n\n    if (fillViewport) {\n      childScale = vecn.vec3(size.width, size.height, 1)\n      childTop = 0\n      childBottom = 0\n    }\n\n    return (\n      // @ts-ignore\n      <StickyChild\n        parentScale={scale}\n        childScale={childScale.times(scaleMultiplier)}\n        stickyLerp={stickyLerp}\n        childTop={childTop}\n        childBottom={childBottom}\n        scaleMultiplier={scaleMultiplier}\n        {...props}\n      >\n        {children({ scale: childScale.times(scaleMultiplier), ...props })}\n      </StickyChild>\n    )\n  }\n}\n\nexport const StickyScrollScene = ({ children, track, stickyLerp, fillViewport, ...props }: any) => {\n  const size = useThree((s) => s.size)\n  const { scaleMultiplier } = useScrollRig()\n\n  const internalRef = useRef(track.current)\n\n  // if tracked element is position:sticky, track the parent instead\n  // we want to track the progress of the entire sticky area\n  const childStyle = useMemo(() => {\n    const style = getComputedStyle(track.current)\n    if (style.position === 'sticky') {\n      internalRef.current = track.current.parentElement\n    } else {\n      console.error('StickyScrollScene: tracked element is not position:sticky')\n    }\n    return style\n  }, [track])\n\n  return (\n    <ScrollScene track={internalRef} {...props}>\n      {renderAsSticky(children, size, childStyle, scaleMultiplier, { stickyLerp, fillViewport })}\n    </ScrollScene>\n  )\n}\n","const _lerp = require('lerp')\n\n/**\n * Drop-in replacement of standard lerp with optional frame delta and target fps\n * to maintain constant animation speed at various fps\n * \n * Based on http://www.rorydriscoll.com/2016/03/07/frame-rate-independent-damping-using-lerp/\n * \n * @param {number} source Current value\n * @param {number} target Value to lerp towards\n * @param {number} rate Interpolation rate\n * @param {number} frameDelta Optional frame delta time in seconds. Should be 1/60 for a steady 60fps.\n * @param {number} targetFps Optional, target is 60 by default\n * @returns {number} interpolated value\n */\n\nfunction lerp(source, target, rate, frameDelta, targetFps = 60){\n  \n  // return normal lerp if no delta was passed\n  if (typeof frameDelta === 'undefined') {\n    return _lerp(source, target, rate)\n  }\n\n  const relativeDelta = frameDelta / (1 / targetFps)\n  const smoothing = 1 - rate\n  return _lerp(source, target, 1 - Math.pow(smoothing, relativeDelta));\n}\n\nmodule.exports = lerp","function lerp(v0, v1, t) {\n    return v0*(1-t)+v1*t\n}\nmodule.exports = lerp"],"names":["ResizeObserverBoxOptions","resizeObservers","msg","trigger","freeze","obj","Object","ResizeObserverSize","inlineSize","blockSize","this","DOMRectReadOnly","x","y","width","height","top","left","bottom","right","prototype","toJSON","_a","fromRect","rectangle","isSVG","target","SVGElement","isHidden","getBBox","offsetWidth","offsetHeight","getClientRects","length","isElement","Element","scope","ownerDocument","defaultView","global","window","cache","WeakMap","scrollRegexp","verticalRegexp","IE","test","navigator","userAgent","parseDimension","pixel","parseFloat","size","switchSizes","zeroBoxes","devicePixelContentBoxSize","borderBoxSize","contentBoxSize","contentRect","calculateBoxSizes","forceRecalculation","has","get","set","cs","getComputedStyle","svg","ownerSVGElement","removePadding","boxSizing","writingMode","canScrollVertically","overflowY","canScrollHorizontally","overflowX","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTop","borderTopWidth","borderRight","borderRightWidth","borderBottom","borderBottomWidth","horizontalPadding","verticalPadding","horizontalBorderArea","borderLeftWidth","verticalBorderArea","horizontalScrollbarThickness","clientHeight","verticalScrollbarThickness","clientWidth","widthReduction","heightReduction","contentWidth","contentHeight","borderBoxWidth","borderBoxHeight","boxes","Math","round","devicePixelRatio","calculateBoxSize","observedBox","DEVICE_PIXEL_CONTENT_BOX","BORDER_BOX","ResizeObserverEntry","calculateDepthForNode","node","Infinity","depth","parent","parentNode","broadcastActiveObservations","shallowestDepth","callbacks","forEach","ro","activeTargets","entries","ot","entry","targetDepth","push","lastReportedSize","callback","call","observer","splice","_i","callbacks_1","gatherActiveObservationsAtDepth","skippedTargets","observationTargets","isActive","watching","observerConfig","attributes","characterData","childList","subtree","events","time","timeout","Date","now","scheduled","scheduler","Scheduler","_this","stopped","listener","schedule","run","cb","until","elementsHaveResized","event","some","ErrorEvent","message","document","createEvent","initEvent","dispatchEvent","process","start","toggle_1","el_1","createTextNode","MutationObserver","observe","textContent","concat","requestAnimationFrame","queueMicroTask","stop","body","addEventListener","name","disconnect","removeEventListener","updateCount","n","ResizeObservation","CONTENT_BOX","tagName","type","isReplacedElement","display","ResizeObserverDetail","resizeObserver","observerMap","getObservationIndex","i","ResizeObserverController","connect","detail","options","firstObservation","box","unobserve","index","indexOf","slice","ResizeObserver","arguments","TypeError","toString","token","singleMatcher","RegExp","multiMatcher","decodeComponents","components","split","decodeURIComponent","join","err","Array","decode","input","tokens","match","decodeUriComponent","encodedURI","replace","replaceMap","exec","result","keys","key","customDecodeURIComponent","splitOnFirst","string","separator","separatorIndex","filterObj","predicate","ret","isArr","isArray","val","validateArrayFormatSeparator","value","encode","strict","encodeURIComponent","charCodeAt","toUpperCase","decodeComponent","keysSorter","sort","a","b","Number","map","removeHash","hashStart","extract","queryStart","parseValue","parseNumbers","isNaN","trim","parseBooleans","toLowerCase","parse","query","assign","arrayFormat","arrayFormatSeparator","formatter","accumulator","undefined","includes","isEncodedArray","newValue","item","parserForArrayFormat","create","param","k","reduce","Boolean","exports","stringify","object","shouldFilter","skipNull","skipEmptyString","encoderForArrayFormat","objectCopy","filter","parseUrl","url","url_","hash","parseFragmentIdentifier","fragmentIdentifier","stringifyUrl","queryFromUrl","parsedQueryFromUrl","queryString","getHash","pick","filterObject","exclude","exclusionFilter","useLayoutEffect","vanillaUseLayoutEffect","useEffect","useIsomorphicLayoutEffect","config","PRIORITY_PRELOAD","PRIORITY_SCISSORS","PRIORITY_VIEWPORTS","PRIORITY_GLOBAL","DEFAULT_SCALE_MULTIPLIER","preloadQueue","useCanvasStore","createState","api","state","listeners","Set","setState","partial","nextState","previousState","getState","subscribe","selector","equalityFn","is","console","warn","currentSlice","listenerToAdd","nextSlice","previousSlice","add","delete","subscribeWithSelector","destroy","clear","debug","scaleMultiplier","globalRender","globalPriority","globalClearDepth","globalRenderQueue","clearGlobalRenderQueue","isCanvasAvailable","hasSmoothScrollbar","canvasChildren","renderToCanvas","mesh","props","_ref","_extends2","getOwnPropertyDescriptor","instances","inactive","_extends","updateCanvas","newProps","_ref2","_extends3","_canvasChildren$key","removeFromCanvas","dispose","_ref3","_canvasChildren$key2","_objectWithoutPropertiesLoose","_toPropertyKey","pageReflow","requestReflow","scroll","limit","velocity","progress","direction","scrollDirection","scrollTo","onScroll","createStore","useStore","forceUpdate","useReducer","c","stateRef","useRef","selectorRef","equalityFnRef","erroredRef","currentSliceRef","newStateSlice","current","hasNewStateSlice","stateBeforeSubscriptionRef","nextStateSlice","error","unsubscribe","sliceToReturn","useDebugValue","Symbol","iterator","items","next","done","shift","_excluded","PerspectiveCamera","forwardRef","ref","_ref$makeDefault","makeDefault","_ref$margin","margin","useThree","camera","viewport","cameraRef","useImperativeHandle","_useMemo","useMemo","_props$position","aspect","fov","distance","position","PI","atan","tan","lookAt","updateProjectionMatrix","updateMatrixWorld","getCurrentViewport","oldCam","React","onUpdate","self","near","far","OrthographicCamera","max","setAllCulled","overrideCulled","wasFrustumCulled","frustumCulled","wasVisible","visible","children","child","viewportSize","Vector2","requestRender","layers","renderScissor","gl","scene","_ref$layer","layer","_ref$autoClear","autoClear","_ref$clearDepth","clearDepth","setScissor","setScissorTest","render","renderViewport","_ref2$layer","_ref2$scissor","scissor","_ref2$autoClear","_ref2$clearDepth","getSize","setViewport","preloadScene","globalScene","globalCamera","invalidate","useScrollRig","_scrollRig","reflow","reflowCompleted","DebugMesh","createElement","scale","args","uniforms","color","Color","vertexShader","fragmentShader","transparent","Map","RootIds","rootId","debounce","func","wait","immediate","context","timestamp","later","last","setTimeout","apply","debounced","callNow","clearTimeout","flush","debounce_1","isBrowser","useWindowSize","_temp","_ref$debounce","_useState","useState","innerWidth","innerHeight","windowSize","setWindowSize","canvasEl","getElementById","handleResize","debouncedResize","pkg","Polyfill","_observer","vecTypes","Proxy","prop","hasOwnProperty","getVecType","vecn","constructor","dimension","flattenOuter","every","Error","fill","super","Reflect","defineProperty","enumerable","magnitude","pnorm","div","v","checkCompatibility","dim","minus","neg","times","plus","pow","p","dot","normalize","abs","reflect","normal","argmax","maxVal","acc","argmin","minVal","min","choose","indices","isIndex","RangeError","copy","equals","approximatelyEquals","epsilon","sum","toArray","from","s","validator","swizzleSymbolMap","getSwizzleSymbolMap","newVals","valid","unique","SyntaxError","swizzleSet","newDim","values","swizzleGet","isInteger","classname","VecType","arr","_","promoteArrayDimension","writable","preventExtensions","namedIndices","z","w","r","g","t","q","find","o","numberValid","src","isVec","vec2","vec3","vec4","vecs","multiply","lerp","v1","v2","slerp","theta","acos","relative","cos","sin","mapLinear","a1","a2","b1","b2","useScrollbar","enabled","useTracker","track","_useScrollbar","rootMargin","threshold","autoUpdate","opts","wrapper","_useInView","delay","trackVisibility","root","triggerOnce","skip","initialInView","fallbackInView","onChange","_state$entry","setRef","inView","element","unsupportedValue","IntersectionObserver","bounds","getBoundingClientRect","isIntersecting","intersectionRatio","boundingClientRect","intersectionRect","rootBounds","id","elements","optionsToId","instance","thresholds","_elements$get","isVisible","createObserver","entryTarget","useInView","inViewport","setScale","scrollState","visibility","rect","_useState2","reactiveRect","setReactiveRect","positiveYUpBottom","_track$current","_rect","initialY","scrollTop","scrollY","initialX","scrollLeft","scrollX","log","update","useCallback","_ref$onlyUpdateInView","onlyUpdateInViewport","_scroll","updateBounds","updatePosition","isHorizontal","sizeProp","pxInside","ScrollScene","memo","inViewportMargin","inViewportThreshold","_ref$visible","_ref$hideOffscreen","hideOffscreen","_ref$scissor","_ref$debug","_ref$as","as","_ref$priority","priority","inlineSceneRef","setScene","Scene","_useScrollRig","_useTracker","useFrame","content","Fragment","InlineElement","createPortal","Viewport","_ref$orthographic","orthographic","hud","setEvents","old","connected","manual","_ref3$margin","_excluded2","trackerProps","_excluded3","compute","pointer","clientX","clientY","raycaster","setFromCamera","shallowEqualArrays","arrA","arrB","equal","len","_ref$dispose","deps","uniqueKey","MathUtils","generateUUID","useCanvas","globalCache","supportsWebP","Promise","resolve","image","Image","catch","fastDeepEqual","source","flags","valueOf","hasWebpSupport","bind","e","then","supported","advance","isRunning","to","currentTime","duration","easing","completed","fromTo","onWindowResize","onWrapperResize","onContentResize","documentElement","scrollHeight","scrollWidth","wrapperResizeObserver","contentResizeObserver","emit","on","wheelMultiplier","touchMultiplier","normalizeWheel","onTouchStart","targetTouches","touchStart","lastDelta","onTouchMove","emitter","deltaX","deltaY","onTouchEnd","inertia","onWheel","passive","l","gestureDirection","mouseMultiplier","smooth","h","wheelEventsTarget","u","smoothWheel","smoothTouch","d","syncTouch","m","syncTouchLerp","touchInertiaMultiplier","S","f","infinite","orientation","T","gestureOrientation","M","E","L","onVirtualScroll","ctrlKey","composedPath","hasAttribute","isStopped","isLocked","preventDefault","isSmooth","isScrolling","animate","targetScroll","programmatic","animatedScroll","actualScroll","sign","lenisVersion","dimensions","rootElement","classList","virtualScroll","off","setScroll","reset","raf","offset","lock","onComplete","force","querySelector","nodeType","__isSmooth","toggle","__isScrolling","__isStopped","SmoothScrollbar","_ref$enabled","_ref$locked","locked","_ref$scrollRestoratio","scrollRestoration","_ref$disablePointerOn","disablePointerOnScroll","_ref$horizontal","horizontal","_ref$scrollInContaine","scrollInContainer","_ref$updateGlobalStat","updateGlobalState","_ref$config","_ref$invalidate","addEffect","innerRef","lenis","preventPointer","globalScrollState","_lenis$current","_lenis$current2","_lenis$current3","notify","_lenis$current4","_lenis$current5","_lenis$current6","_lenis$current7","__lenis","preventPointerEvents","prevent","style","pointerEvents","history","removeEffect","_raf","html","firstElementChild","Lenis","_lenis$current8","_lenis$current9","cancelAnimationFrame","_lenis$current10","_lenis$current11","_lenis$current16","_onScroll","_lenis$current12","_lenis$current13","_lenis$current14","_lenis$current15","_lenis$current17","invalidateOnWheelEvent","onPointerInteraction","_lenis$current18","_lenis$current19","WebGLText","el","material","font","_ref$fontOffsetY","fontOffsetY","_ref$fontOffsetX","fontOffsetX","_ref$overrideEmissive","overrideEmissive","letterSpacing","fontSize","lineHeight","textColor","convertSRGBToLinear","textAlign","emissive","xOffset","Text","maxWidth","overflowWrap","anchorX","anchorY","WebGLImage","_ref$invalidateFrameL","invalidateFrameLoop","_ref$widthSegments","widthSegments","_ref$heightSegments","heightSegments","_useThree","pixelRatio","dpr","texture","imgRef","_imgRef$current","_imgRef$current3","_ref$initTexture","initTexture","_ref$premultiplyAlpha","premultiplyAlpha","currentSrc","newSrcDetected","setNewSrcDetected","onLoad","_imgRef$current2","isSafari","isFirefox","firefoxVersion","fn","preload","response","promise","lifespan","DefaultLoadingManager","itemStart","returnResolve","itemEnd","once","complete","LoaderProto","createImageBitmap","TextureLoader","ImageBitmapLoader","useLoader","loader","setOptions","colorSpaceConversion","imageOrientation","setRequestHeader","Accept","Texture","ImageBitmap","CanvasTexture","useImageAsTexture","u_color","u_time","u_pixelRatio","u_progress","u_visibility","u_viewport","u_velocity","u_res","u_rect","u_size","u_texture","u_loaded","u_scaleMultiplier","delta","attach","ParallaxGroup","parallax","ParallaxScrollScene","_ref2$speed","speed","parallaxAmount","StickyChild","childTop","childBottom","parentScale","childScale","_ref$stickyLerp","stickyLerp","group","yTop","rate","frameDelta","targetFps","v0","_lerp","StickyScrollScene","_ref4","fillViewport","internalRef","childStyle","parentElement","renderAsSticky"],"mappings":"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"}