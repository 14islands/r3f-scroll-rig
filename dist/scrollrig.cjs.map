{"version":3,"file":"scrollrig.cjs","sources":["../src/hooks/useIsomorphicLayoutEffect.ts","../src/config.ts","../src/store.ts","../src/components/ResizeManager.ts","../src/polyfills/requestIdleCallback.ts","../src/components/PerspectiveCamera.tsx","../src/components/OrthographicCamera.tsx","../src/utils/helpers.ts","../src/renderer-api.ts","../src/hooks/useScrollRig.ts","../src/components/GlobalChildren.tsx","../src/components/GlobalRenderer.tsx","../../node_modules/react-is/cjs/react-is.production.min.js","../../node_modules/react-is/cjs/react-is.development.js","../../node_modules/react-is/index.js","../../node_modules/object-assign/index.js","../../node_modules/prop-types/lib/has.js","../../node_modules/prop-types/lib/ReactPropTypesSecret.js","../../node_modules/prop-types/checkPropTypes.js","../../node_modules/prop-types/factoryWithTypeCheckers.js","../../node_modules/prop-types/factoryWithThrowingShims.js","../../node_modules/prop-types/index.js","../src/components/CanvasErrorBoundary.tsx","../src/components/GlobalCanvas.tsx","../src/components/DebugMesh.tsx","../src/hooks/useWindowSize.ts","../src/utils/math.ts","../src/scrollbar/useScrollbar.ts","../src/hooks/useTracker.ts","../src/components/ScrollScene.tsx","../src/components/ViewportScrollScene.tsx","../src/hooks/useCanvas.ts","../src/components/UseCanvas.tsx","../src/hooks/useImageAsTexture.ts","../src/scrollbar/LenisScrollbar.tsx","../src/scrollbar/SmoothScrollbar.tsx","../src/index.ts"],"sourcesContent":["import { useEffect, useLayoutEffect as vanillaUseLayoutEffect } from 'react'\n\nexport const isBrowser = typeof window !== 'undefined'\n\nexport const useLayoutEffect = isBrowser ? vanillaUseLayoutEffect : useEffect\n","// Global config\n\nimport { Scene, Camera, WebGLRenderer } from 'three'\n\ntype PreloadCallback = (gl: WebGLRenderer, scene: Scene, camera: Camera) => void\n\nexport const config = {\n  // Execution order for useFrames (highest = last render)\n  PRIORITY_PRELOAD: 0,\n  PRIORITY_SCISSORS: 1,\n  PRIORITY_VIEWPORTS: 1,\n  PRIORITY_GLOBAL: 1000,\n\n  DEFAULT_SCALE_MULTIPLIER: 1,\n\n  // Global rendering props\n  preloadQueue: [] as PreloadCallback[],\n}\n","import create from 'zustand'\nimport { config } from './config'\n\nimport { LenisScrollCallback } from './scrollbar/LenisScrollbar'\n\ninterface ScrollRigStore {\n  debug: boolean\n  scaleMultiplier: number\n  globalRender: boolean\n  globalPriority: number\n  globalClearDepth: boolean\n  globalRenderQueue: false | any[]\n  clearGlobalRenderQueue: () => void\n  isCanvasAvailable: boolean\n  hasSmoothScrollbar: boolean\n  canvasChildren: Record<string, any | undefined>\n  updateCanvas: (key: string, newProps: any) => void\n  renderToCanvas: (key: string, mesh: any, props: any) => void\n  removeFromCanvas: (key: string, dispose: boolean) => void\n  pageReflow: number\n  requestReflow: () => void\n  scroll: {\n    y: number\n    x: number\n    limit: number\n    velocity: number\n    progress: number\n    direction: number\n    scrollDirection?: 'vertical' | 'horizontal'\n  }\n  scrollTo: (target: any) => void\n  onScroll: (cb: LenisScrollCallback) => () => void\n}\n\nconst useCanvasStore = create<ScrollRigStore>((set) => ({\n  // //////////////////////////////////////////////////////////////////////////\n  // GLOBAL ScrollRig STATE\n  // //////////////////////////////////////////////////////////////////////////\n  debug: false,\n  scaleMultiplier: config.DEFAULT_SCALE_MULTIPLIER,\n\n  globalRender: true,\n  globalPriority: config.PRIORITY_GLOBAL,\n  globalClearDepth: false,\n\n  globalRenderQueue: false,\n  clearGlobalRenderQueue: () => set(() => ({ globalRenderQueue: false })),\n\n  // true if WebGL initialized without errors\n  isCanvasAvailable: true,\n\n  // true if <VirtualScrollbar> is currently enabled\n  hasSmoothScrollbar: false,\n\n  // map of all components to render on the global canvas\n  canvasChildren: {},\n\n  // add component to canvas\n  renderToCanvas: (key, mesh, props = {}) =>\n    set(({ canvasChildren }) => {\n      // check if already mounted\n      if (Object.getOwnPropertyDescriptor(canvasChildren, key)) {\n        // increase usage count\n        canvasChildren[key].instances += 1\n        canvasChildren[key].props.inactive = false\n        return { canvasChildren }\n      } else {\n        // otherwise mount it\n        const obj = { ...canvasChildren, [key]: { mesh, props, instances: 1 } }\n        return { canvasChildren: obj }\n      }\n    }),\n\n  // pass new props to a canvas component\n  updateCanvas: (key, newProps) =>\n    // @ts-ignore\n    set(({ canvasChildren }) => {\n      if (!canvasChildren[key]) return\n      const {\n        [key]: { mesh, props, instances },\n      } = canvasChildren\n      const obj = {\n        ...canvasChildren,\n        [key]: { mesh, props: { ...props, ...newProps }, instances },\n      }\n      // console.log('updateCanvas', key, { ...props, ...newProps })\n      return { canvasChildren: obj }\n    }),\n\n  // remove component from canvas\n  removeFromCanvas: (key, dispose = true) =>\n    set(({ canvasChildren }) => {\n      // check if remove or reduce instances\n      if (canvasChildren[key]?.instances > 1) {\n        // reduce usage count\n        canvasChildren[key].instances -= 1\n        return { canvasChildren }\n      } else {\n        if (dispose) {\n          // unmount since no longer used\n          const { [key]: _omit, ...obj } = canvasChildren // make a separate copy of the obj and omit\n          return { canvasChildren: obj }\n        } else {\n          // or tell it that it is \"inactive\"\n          canvasChildren[key].instances = 0\n          canvasChildren[key].props.inactive = true\n          return { canvasChildren: { ...canvasChildren } }\n        }\n      }\n    }),\n\n  // Used to ask components to re-calculate their positions after a layout reflow\n  pageReflow: 0,\n  requestReflow: () => {\n    set((state) => {\n      return { pageReflow: state.pageReflow + 1 }\n    })\n  },\n\n  // keep track of scrollbar\n  scroll: {\n    y: 0,\n    x: 0,\n    limit: 0,\n    velocity: 0,\n    progress: 0,\n    direction: 0,\n    scrollDirection: undefined,\n  },\n  scrollTo: (target) => window.scrollTo(0, target),\n  onScroll: () => () => {},\n}))\n\nexport { useCanvasStore }\n","import { useEffect } from 'react'\n\nimport { requestIdleCallback } from '../polyfills/requestIdleCallback'\nimport { useCanvasStore } from '../store'\n\n/**\n * Trigger reflow when WebFonts loaded\n */\nexport const ResizeManager = () => {\n  const requestReflow = useCanvasStore((state) => state.requestReflow)\n\n  // reflow on webfont loaded to prevent misalignments\n  useEffect(() => {\n    if ('fonts' in document) {\n      document.fonts.ready.then(() => {\n        requestIdleCallback(requestReflow)\n      })\n    }\n  }, [])\n\n  return null\n}\n","/**\n * runtime check for requestIdleCallback\n */\nexport const requestIdleCallback = (callback: () => void, { timeout = 100 } = {}) => {\n  if ('requestIdleCallback' in window) {\n    window.requestIdleCallback(callback, { timeout })\n  } else {\n    setTimeout(callback, 0)\n  }\n}\n\nexport const cancelIdleCallback = (id: any) => {\n  if ('cancelIdleCallback' in window) {\n    window.cancelIdleCallback(id)\n  } else {\n    clearTimeout(id)\n  }\n}\n","import React, { useRef, forwardRef, useMemo } from 'react'\nimport { useThree } from '@react-three/fiber'\nimport { PerspectiveCamera as PerspectiveCameraImpl } from 'three'\nimport mergeRefs from 'react-merge-refs'\n\nimport { useLayoutEffect } from '../hooks/useIsomorphicLayoutEffect'\nimport { useCanvasStore } from '../store'\n\ntype Props = JSX.IntrinsicElements['perspectiveCamera'] & {\n  makeDefault?: boolean\n}\n\nexport const PerspectiveCamera = forwardRef(({ makeDefault = false, ...props }: Props, ref) => {\n  const set = useThree((state) => state.set)\n  const camera = useThree((state) => state.camera)\n  const size = useThree((state) => state.size)\n  const viewport = useThree((state) => state.viewport)\n  const cameraRef = useRef<PerspectiveCameraImpl>(null!)\n\n  const pageReflow = useCanvasStore((state) => state.pageReflow)\n  const scaleMultiplier = useCanvasStore((state) => state.scaleMultiplier)\n\n  // Calculate FoV or distance to match DOM size\n  const { fov, distance, aspect } = useMemo(() => {\n    const width = size.width * scaleMultiplier\n    const height = size.height * scaleMultiplier\n    const aspect = width / height\n\n    // check props vs defaults\n    let fov = props.fov\n    let distance = (props?.position as number[])?.[2] || Math.max(width, height)\n\n    // calculate either FoV or distance to match scale\n    if (fov) {\n      // calculate distance for specified FoV\n      const ratio = Math.tan(((fov / 2.0) * Math.PI) / 180.0) * 2.0\n      distance = height / ratio\n    } else {\n      // calculate FoV based on distance\n      fov = 2 * (180 / Math.PI) * Math.atan(height / (2 * distance))\n    }\n\n    return { fov, distance, aspect }\n  }, [size, scaleMultiplier, pageReflow])\n\n  // Update camera projection and R3F viewport\n  useLayoutEffect(() => {\n    cameraRef.current.updateProjectionMatrix()\n    // https://github.com/react-spring/@react-three/fiber/issues/178\n    // Update matrix world since the renderer is a frame late\n    cameraRef.current.updateMatrixWorld()\n    // update r3f viewport which is lagging on resize\n    set((state) => ({ viewport: { ...state.viewport, ...viewport.getCurrentViewport(camera) } }))\n  }, [size, scaleMultiplier, pageReflow])\n\n  useLayoutEffect(() => {\n    if (makeDefault) {\n      const oldCam = camera\n      set(() => ({ camera: cameraRef.current! }))\n      return () => set(() => ({ camera: oldCam }))\n    }\n    // The camera should not be part of the dependency list because this components camera is a stable reference\n    // that must exchange the default, and clean up after itself on unmount.\n  }, [cameraRef, makeDefault, set])\n\n  return (\n    <perspectiveCamera\n      ref={mergeRefs([cameraRef, ref])}\n      position={[0, 0, distance]}\n      onUpdate={(self) => self.updateProjectionMatrix()}\n      near={0.1}\n      aspect={aspect}\n      fov={fov}\n      far={distance * 2}\n      {...props}\n    />\n  )\n})\n","import React, { useRef, forwardRef, useMemo } from 'react'\nimport { OrthographicCamera as OrthographicCameraImpl } from 'three'\nimport { useThree } from '@react-three/fiber'\nimport mergeRefs from 'react-merge-refs'\n\nimport { useLayoutEffect } from '../hooks/useIsomorphicLayoutEffect'\nimport { useCanvasStore } from '../store'\n\ntype Props = JSX.IntrinsicElements['orthographicCamera'] & {\n  makeDefault?: boolean\n}\nexport const OrthographicCamera = forwardRef(({ makeDefault = false, ...props }: Props, ref) => {\n  const set = useThree((state) => state.set)\n  const camera = useThree((state) => state.camera)\n  const size = useThree((state) => state.size)\n\n  const pageReflow = useCanvasStore((state) => state.pageReflow)\n  const scaleMultiplier = useCanvasStore((state) => state.scaleMultiplier)\n\n  const distance = useMemo(() => {\n    const width = size.width * scaleMultiplier\n    const height = size.height * scaleMultiplier\n    return Math.max(width, height)\n  }, [size, pageReflow, scaleMultiplier])\n\n  const cameraRef = useRef<OrthographicCameraImpl>(null!)\n  useLayoutEffect(() => {\n    cameraRef.current.lookAt(0, 0, 0)\n    cameraRef.current.updateProjectionMatrix()\n    // https://github.com/react-spring/@react-three/fiber/issues/178\n    // Update matrix world since the renderer is a frame late\n    cameraRef.current.updateMatrixWorld()\n  }, [distance, size])\n\n  useLayoutEffect(() => {\n    if (makeDefault) {\n      const oldCam = camera\n      set(() => ({ camera: cameraRef.current! }))\n      return () => set(() => ({ camera: oldCam }))\n    }\n    // The camera should not be part of the dependency list because this components camera is a stable reference\n    // that must exchange the default, and clean up after itself on unmount.\n  }, [cameraRef, makeDefault, set])\n\n  return (\n    <orthographicCamera\n      left={(size.width * scaleMultiplier) / -2}\n      right={(size.width * scaleMultiplier) / 2}\n      top={(size.height * scaleMultiplier) / 2}\n      bottom={(size.height * scaleMultiplier) / -2}\n      far={distance * 2}\n      position={[0, 0, distance]}\n      near={0.001}\n      ref={mergeRefs([cameraRef, ref])}\n      onUpdate={(self) => self.updateProjectionMatrix()}\n      {...props}\n    />\n  )\n})\n","import { Object3D } from 'three'\n\ntype CulledObject = {\n  wasFrustumCulled?: boolean\n  wasVisible?: boolean\n} & Object3D\n\n// Use to override Frustum temporarily to pre-upload textures to GPU\nexport function setAllCulled(obj: CulledObject, overrideCulled: boolean) {\n  if (!obj) return\n  if (overrideCulled === false) {\n    obj.wasFrustumCulled = obj.frustumCulled\n    obj.wasVisible = obj.visible\n    obj.visible = true\n    obj.frustumCulled = false\n  } else {\n    obj.visible = !!obj.wasVisible\n    obj.frustumCulled = !!obj.wasFrustumCulled\n  }\n  obj.children.forEach((child) => setAllCulled(child, overrideCulled))\n}\n","import { config } from './config'\nimport { Vector2, WebGLRenderer, Scene, Camera } from 'three'\nimport { invalidate } from '@react-three/fiber'\n\nimport { setAllCulled } from './utils/helpers'\nimport { useCanvasStore } from './store'\n\nconst viewportSize = new Vector2()\n\n// Flag that we need global rendering (full screen)\nexport const requestRender = (layers = [0]) => {\n  useCanvasStore.getState().globalRenderQueue = useCanvasStore.getState().globalRenderQueue || [0]\n  useCanvasStore.getState().globalRenderQueue = [...(useCanvasStore.getState().globalRenderQueue || []), ...layers]\n}\n\nexport const renderScissor = ({\n  gl,\n  scene,\n  camera,\n  left,\n  top,\n  width,\n  height,\n  layer = 0,\n  autoClear = false,\n  clearDepth = false,\n}: any) => {\n  if (!scene || !camera) return\n  gl.autoClear = autoClear\n  gl.setScissor(left, top, width, height)\n  gl.setScissorTest(true)\n  camera.layers.set(layer)\n  clearDepth && gl.clearDepth()\n  gl.render(scene, camera)\n  gl.setScissorTest(false)\n}\n\nexport const renderViewport = ({\n  gl,\n  scene,\n  camera,\n  left,\n  top,\n  width,\n  height,\n  layer = 0,\n  scissor = true,\n  autoClear = false,\n  clearDepth = false,\n}: any) => {\n  if (!scene || !camera) return\n  gl.getSize(viewportSize)\n  gl.autoClear = autoClear\n  gl.setViewport(left, top, width, height)\n  gl.setScissor(left, top, width, height)\n  gl.setScissorTest(scissor)\n  camera.layers.set(layer)\n  clearDepth && gl.clearDepth()\n  gl.render(scene, camera)\n  gl.setScissorTest(false)\n  gl.setViewport(0, 0, viewportSize.x, viewportSize.y)\n}\n\nexport const preloadScene = (scene: Scene, camera: Camera, layer = 0, callback?: () => void) => {\n  config.preloadQueue.push((gl: WebGLRenderer, globalScene: Scene, globalCamera: Camera) => {\n    gl.setScissorTest(false)\n    setAllCulled(scene || globalScene, false)\n    camera.layers.set(layer)\n    gl.render(scene || globalScene, camera || globalCamera)\n    setAllCulled(scene || globalScene, true)\n    callback && callback()\n  })\n  // auto trigger a new frame for the preload\n  invalidate()\n}\n","import { useEffect } from 'react'\n\nimport type { Scene, Camera } from 'three'\nimport { useCanvasStore } from '../store'\nimport { preloadScene, requestRender, renderScissor, renderViewport } from '../renderer-api'\n\nexport interface ScrollRigState {\n  debug: boolean\n  isCanvasAvailable: boolean\n  hasSmoothScrollbar: boolean\n  scaleMultiplier: number\n  preloadScene: (scene: Scene, camera: Camera, layer?: number, callback?: any) => void\n  requestRender: (layers?: number[]) => void\n  renderScissor: (args: any) => void\n  renderViewport: (args: any) => void\n  reflow: () => void\n}\n\n/**\n * Public interface for ScrollRig\n */\nexport const useScrollRig = () => {\n  const isCanvasAvailable = useCanvasStore((state) => state.isCanvasAvailable)\n  const hasSmoothScrollbar = useCanvasStore((state) => state.hasSmoothScrollbar)\n  const requestReflow = useCanvasStore((state) => state.requestReflow)\n  const pageReflow = useCanvasStore((state) => state.pageReflow)\n  const debug = useCanvasStore((state) => state.debug)\n  const scaleMultiplier = useCanvasStore((state) => state.scaleMultiplier)\n\n  useEffect(() => {\n    if (debug) {\n      // @ts-ignore\n      window._scrollRig = window._scrollRig || {}\n      // @ts-ignore\n      window._scrollRig.reflow = requestReflow\n    }\n  }, [])\n\n  return {\n    // boolean state\n    debug,\n    isCanvasAvailable,\n    hasSmoothScrollbar,\n    // scale\n    scaleMultiplier,\n    // render API\n    preloadScene,\n    requestRender,\n    renderScissor,\n    renderViewport,\n    // recalc all tracker positions\n    reflow: requestReflow,\n    reflowCompleted: pageReflow,\n  } as ScrollRigState\n}\n","import React, { Fragment, useEffect, ReactNode, cloneElement } from 'react'\nimport { invalidate } from '@react-three/fiber'\n\nimport { useCanvasStore } from '../store'\nimport { useScrollRig } from '../hooks/useScrollRig'\n\n/**\n * Renders global children from useCanvas hook\n */\nexport const GlobalChildren = ({ children }: { children?: ReactNode }) => {\n  const canvasChildren = useCanvasStore((state) => state.canvasChildren)\n  const scrollRig = useScrollRig()\n\n  useEffect(() => {\n    // render empty canvas automatically if all children were removed\n    if (!Object.keys(canvasChildren).length) {\n      scrollRig.debug && console.log('GlobalRenderer', 'auto render empty canvas')\n      scrollRig.requestRender()\n      invalidate()\n    }\n  }, [canvasChildren])\n\n  scrollRig.debug && console.log('GlobalChildren', Object.keys(canvasChildren).length)\n  return (\n    <>\n      {children}\n      {Object.keys(canvasChildren).map((key) => {\n        const { mesh, props } = canvasChildren[key]\n\n        if (typeof mesh === 'function') {\n          return <Fragment key={key}>{mesh({ key, ...scrollRig, ...props })}</Fragment>\n        }\n\n        return cloneElement(mesh, {\n          key,\n          ...props,\n        })\n      })}\n    </>\n  )\n}\n","import { useThree, useFrame, invalidate } from '@react-three/fiber'\n\nimport { useLayoutEffect } from '../hooks/useIsomorphicLayoutEffect'\nimport { config } from '../config'\nimport { useCanvasStore } from '../store'\nimport { useScrollRig } from '../hooks/useScrollRig'\n\n/**\n * Global render loop to avoid double renders on the same frame\n */\nexport const GlobalRenderer = () => {\n  const gl = useThree((s) => s.gl)\n  const frameloop = useThree((s) => s.frameloop)\n  const globalClearDepth = useCanvasStore((state) => state.globalClearDepth)\n  const globalPriority = useCanvasStore((state) => state.globalPriority)\n  const scrollRig = useScrollRig()\n\n  // https://threejs.org/docs/#api/en/renderers/WebGLRenderer.debug\n  useLayoutEffect(() => {\n    gl.debug.checkShaderErrors = scrollRig.debug\n  }, [scrollRig.debug])\n\n  // PRELOAD RENDER LOOP\n  useFrame(({ camera, scene }) => {\n    if (!config.preloadQueue.length) return\n    // Render preload frames first and clear directly\n    config.preloadQueue.forEach((render) => render(gl, scene, camera))\n    // cleanup\n    gl.clear()\n    config.preloadQueue = []\n    // trigger new frame to get correct visual state after all preloads\n    scrollRig.debug && console.log('GlobalRenderer', 'preload complete. trigger global render')\n    scrollRig.requestRender()\n    invalidate()\n  }, config.PRIORITY_PRELOAD)\n\n  // GLOBAL RENDER LOOP\n  useFrame(({ camera, scene }) => {\n    const globalRenderQueue = useCanvasStore.getState().globalRenderQueue\n\n    // Render if requested or if always on\n    if (frameloop === 'always' || globalRenderQueue) {\n      // render default layer, scene, camera\n      camera.layers.disableAll()\n      if (globalRenderQueue) {\n        // @ts-ignore\n        globalRenderQueue.forEach((layer) => {\n          camera.layers.enable(layer)\n        })\n      } else {\n        camera.layers.enable(0)\n      }\n\n      // render as HUD over any other renders by default\n      globalClearDepth && gl.clearDepth()\n      gl.render(scene, camera)\n    }\n    // cleanup for next frame\n    useCanvasStore.getState().clearGlobalRenderQueue()\n  }, globalPriority) // Take over rendering\n\n  return null\n}\n","/** @license React v16.13.1\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';var b=\"function\"===typeof Symbol&&Symbol.for,c=b?Symbol.for(\"react.element\"):60103,d=b?Symbol.for(\"react.portal\"):60106,e=b?Symbol.for(\"react.fragment\"):60107,f=b?Symbol.for(\"react.strict_mode\"):60108,g=b?Symbol.for(\"react.profiler\"):60114,h=b?Symbol.for(\"react.provider\"):60109,k=b?Symbol.for(\"react.context\"):60110,l=b?Symbol.for(\"react.async_mode\"):60111,m=b?Symbol.for(\"react.concurrent_mode\"):60111,n=b?Symbol.for(\"react.forward_ref\"):60112,p=b?Symbol.for(\"react.suspense\"):60113,q=b?\nSymbol.for(\"react.suspense_list\"):60120,r=b?Symbol.for(\"react.memo\"):60115,t=b?Symbol.for(\"react.lazy\"):60116,v=b?Symbol.for(\"react.block\"):60121,w=b?Symbol.for(\"react.fundamental\"):60117,x=b?Symbol.for(\"react.responder\"):60118,y=b?Symbol.for(\"react.scope\"):60119;\nfunction z(a){if(\"object\"===typeof a&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type,a){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof,a){case k:case n:case t:case r:case h:return a;default:return u}}case d:return u}}}function A(a){return z(a)===m}exports.AsyncMode=l;exports.ConcurrentMode=m;exports.ContextConsumer=k;exports.ContextProvider=h;exports.Element=c;exports.ForwardRef=n;exports.Fragment=e;exports.Lazy=t;exports.Memo=r;exports.Portal=d;\nexports.Profiler=g;exports.StrictMode=f;exports.Suspense=p;exports.isAsyncMode=function(a){return A(a)||z(a)===l};exports.isConcurrentMode=A;exports.isContextConsumer=function(a){return z(a)===k};exports.isContextProvider=function(a){return z(a)===h};exports.isElement=function(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===c};exports.isForwardRef=function(a){return z(a)===n};exports.isFragment=function(a){return z(a)===e};exports.isLazy=function(a){return z(a)===t};\nexports.isMemo=function(a){return z(a)===r};exports.isPortal=function(a){return z(a)===d};exports.isProfiler=function(a){return z(a)===g};exports.isStrictMode=function(a){return z(a)===f};exports.isSuspense=function(a){return z(a)===p};\nexports.isValidElementType=function(a){return\"string\"===typeof a||\"function\"===typeof a||a===e||a===m||a===g||a===f||a===p||a===q||\"object\"===typeof a&&null!==a&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===w||a.$$typeof===x||a.$$typeof===y||a.$$typeof===v)};exports.typeOf=z;\n","/** @license React v16.13.1\n * react-is.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function() {\n'use strict';\n\n// The Symbol used to tag the ReactElement-like types. If there is no native Symbol\n// nor polyfill, then a plain number is used for performance.\nvar hasSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = hasSymbol ? Symbol.for('react.element') : 0xeac7;\nvar REACT_PORTAL_TYPE = hasSymbol ? Symbol.for('react.portal') : 0xeaca;\nvar REACT_FRAGMENT_TYPE = hasSymbol ? Symbol.for('react.fragment') : 0xeacb;\nvar REACT_STRICT_MODE_TYPE = hasSymbol ? Symbol.for('react.strict_mode') : 0xeacc;\nvar REACT_PROFILER_TYPE = hasSymbol ? Symbol.for('react.profiler') : 0xead2;\nvar REACT_PROVIDER_TYPE = hasSymbol ? Symbol.for('react.provider') : 0xeacd;\nvar REACT_CONTEXT_TYPE = hasSymbol ? Symbol.for('react.context') : 0xeace; // TODO: We don't use AsyncMode or ConcurrentMode anymore. They were temporary\n// (unstable) APIs that have been removed. Can we remove the symbols?\n\nvar REACT_ASYNC_MODE_TYPE = hasSymbol ? Symbol.for('react.async_mode') : 0xeacf;\nvar REACT_CONCURRENT_MODE_TYPE = hasSymbol ? Symbol.for('react.concurrent_mode') : 0xeacf;\nvar REACT_FORWARD_REF_TYPE = hasSymbol ? Symbol.for('react.forward_ref') : 0xead0;\nvar REACT_SUSPENSE_TYPE = hasSymbol ? Symbol.for('react.suspense') : 0xead1;\nvar REACT_SUSPENSE_LIST_TYPE = hasSymbol ? Symbol.for('react.suspense_list') : 0xead8;\nvar REACT_MEMO_TYPE = hasSymbol ? Symbol.for('react.memo') : 0xead3;\nvar REACT_LAZY_TYPE = hasSymbol ? Symbol.for('react.lazy') : 0xead4;\nvar REACT_BLOCK_TYPE = hasSymbol ? Symbol.for('react.block') : 0xead9;\nvar REACT_FUNDAMENTAL_TYPE = hasSymbol ? Symbol.for('react.fundamental') : 0xead5;\nvar REACT_RESPONDER_TYPE = hasSymbol ? Symbol.for('react.responder') : 0xead6;\nvar REACT_SCOPE_TYPE = hasSymbol ? Symbol.for('react.scope') : 0xead7;\n\nfunction isValidElementType(type) {\n  return typeof type === 'string' || typeof type === 'function' || // Note: its typeof might be other than 'symbol' or 'number' if it's a polyfill.\n  type === REACT_FRAGMENT_TYPE || type === REACT_CONCURRENT_MODE_TYPE || type === REACT_PROFILER_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || typeof type === 'object' && type !== null && (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || type.$$typeof === REACT_FUNDAMENTAL_TYPE || type.$$typeof === REACT_RESPONDER_TYPE || type.$$typeof === REACT_SCOPE_TYPE || type.$$typeof === REACT_BLOCK_TYPE);\n}\n\nfunction typeOf(object) {\n  if (typeof object === 'object' && object !== null) {\n    var $$typeof = object.$$typeof;\n\n    switch ($$typeof) {\n      case REACT_ELEMENT_TYPE:\n        var type = object.type;\n\n        switch (type) {\n          case REACT_ASYNC_MODE_TYPE:\n          case REACT_CONCURRENT_MODE_TYPE:\n          case REACT_FRAGMENT_TYPE:\n          case REACT_PROFILER_TYPE:\n          case REACT_STRICT_MODE_TYPE:\n          case REACT_SUSPENSE_TYPE:\n            return type;\n\n          default:\n            var $$typeofType = type && type.$$typeof;\n\n            switch ($$typeofType) {\n              case REACT_CONTEXT_TYPE:\n              case REACT_FORWARD_REF_TYPE:\n              case REACT_LAZY_TYPE:\n              case REACT_MEMO_TYPE:\n              case REACT_PROVIDER_TYPE:\n                return $$typeofType;\n\n              default:\n                return $$typeof;\n            }\n\n        }\n\n      case REACT_PORTAL_TYPE:\n        return $$typeof;\n    }\n  }\n\n  return undefined;\n} // AsyncMode is deprecated along with isAsyncMode\n\nvar AsyncMode = REACT_ASYNC_MODE_TYPE;\nvar ConcurrentMode = REACT_CONCURRENT_MODE_TYPE;\nvar ContextConsumer = REACT_CONTEXT_TYPE;\nvar ContextProvider = REACT_PROVIDER_TYPE;\nvar Element = REACT_ELEMENT_TYPE;\nvar ForwardRef = REACT_FORWARD_REF_TYPE;\nvar Fragment = REACT_FRAGMENT_TYPE;\nvar Lazy = REACT_LAZY_TYPE;\nvar Memo = REACT_MEMO_TYPE;\nvar Portal = REACT_PORTAL_TYPE;\nvar Profiler = REACT_PROFILER_TYPE;\nvar StrictMode = REACT_STRICT_MODE_TYPE;\nvar Suspense = REACT_SUSPENSE_TYPE;\nvar hasWarnedAboutDeprecatedIsAsyncMode = false; // AsyncMode should be deprecated\n\nfunction isAsyncMode(object) {\n  {\n    if (!hasWarnedAboutDeprecatedIsAsyncMode) {\n      hasWarnedAboutDeprecatedIsAsyncMode = true; // Using console['warn'] to evade Babel and ESLint\n\n      console['warn']('The ReactIs.isAsyncMode() alias has been deprecated, ' + 'and will be removed in React 17+. Update your code to use ' + 'ReactIs.isConcurrentMode() instead. It has the exact same API.');\n    }\n  }\n\n  return isConcurrentMode(object) || typeOf(object) === REACT_ASYNC_MODE_TYPE;\n}\nfunction isConcurrentMode(object) {\n  return typeOf(object) === REACT_CONCURRENT_MODE_TYPE;\n}\nfunction isContextConsumer(object) {\n  return typeOf(object) === REACT_CONTEXT_TYPE;\n}\nfunction isContextProvider(object) {\n  return typeOf(object) === REACT_PROVIDER_TYPE;\n}\nfunction isElement(object) {\n  return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n}\nfunction isForwardRef(object) {\n  return typeOf(object) === REACT_FORWARD_REF_TYPE;\n}\nfunction isFragment(object) {\n  return typeOf(object) === REACT_FRAGMENT_TYPE;\n}\nfunction isLazy(object) {\n  return typeOf(object) === REACT_LAZY_TYPE;\n}\nfunction isMemo(object) {\n  return typeOf(object) === REACT_MEMO_TYPE;\n}\nfunction isPortal(object) {\n  return typeOf(object) === REACT_PORTAL_TYPE;\n}\nfunction isProfiler(object) {\n  return typeOf(object) === REACT_PROFILER_TYPE;\n}\nfunction isStrictMode(object) {\n  return typeOf(object) === REACT_STRICT_MODE_TYPE;\n}\nfunction isSuspense(object) {\n  return typeOf(object) === REACT_SUSPENSE_TYPE;\n}\n\nexports.AsyncMode = AsyncMode;\nexports.ConcurrentMode = ConcurrentMode;\nexports.ContextConsumer = ContextConsumer;\nexports.ContextProvider = ContextProvider;\nexports.Element = Element;\nexports.ForwardRef = ForwardRef;\nexports.Fragment = Fragment;\nexports.Lazy = Lazy;\nexports.Memo = Memo;\nexports.Portal = Portal;\nexports.Profiler = Profiler;\nexports.StrictMode = StrictMode;\nexports.Suspense = Suspense;\nexports.isAsyncMode = isAsyncMode;\nexports.isConcurrentMode = isConcurrentMode;\nexports.isContextConsumer = isContextConsumer;\nexports.isContextProvider = isContextProvider;\nexports.isElement = isElement;\nexports.isForwardRef = isForwardRef;\nexports.isFragment = isFragment;\nexports.isLazy = isLazy;\nexports.isMemo = isMemo;\nexports.isPortal = isPortal;\nexports.isProfiler = isProfiler;\nexports.isStrictMode = isStrictMode;\nexports.isSuspense = isSuspense;\nexports.isValidElementType = isValidElementType;\nexports.typeOf = typeOf;\n  })();\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-is.production.min.js');\n} else {\n  module.exports = require('./cjs/react-is.development.js');\n}\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","module.exports = Function.call.bind(Object.prototype.hasOwnProperty);\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n  var loggedTypeFailures = {};\n  var has = require('./lib/has');\n\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) { /**/ }\n  };\n}\n\n/**\n * Assert that the values match with the type specs.\n * Error messages are memorized and will only be shown once.\n *\n * @param {object} typeSpecs Map of name to a ReactPropType\n * @param {object} values Runtime values that need to be type-checked\n * @param {string} location e.g. \"prop\", \"context\", \"child context\"\n * @param {string} componentName Name of the component for error messages.\n * @param {?Function} getStack Returns the component stack.\n * @private\n */\nfunction checkPropTypes(typeSpecs, values, location, componentName, getStack) {\n  if (process.env.NODE_ENV !== 'production') {\n    for (var typeSpecName in typeSpecs) {\n      if (has(typeSpecs, typeSpecName)) {\n        var error;\n        // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          if (typeof typeSpecs[typeSpecName] !== 'function') {\n            var err = Error(\n              (componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' +\n              'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.' +\n              'This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.'\n            );\n            err.name = 'Invariant Violation';\n            throw err;\n          }\n          error = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, ReactPropTypesSecret);\n        } catch (ex) {\n          error = ex;\n        }\n        if (error && !(error instanceof Error)) {\n          printWarning(\n            (componentName || 'React class') + ': type specification of ' +\n            location + ' `' + typeSpecName + '` is invalid; the type checker ' +\n            'function must return `null` or an `Error` but returned a ' + typeof error + '. ' +\n            'You may have forgotten to pass an argument to the type checker ' +\n            'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' +\n            'shape all require an argument).'\n          );\n        }\n        if (error instanceof Error && !(error.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error.message] = true;\n\n          var stack = getStack ? getStack() : '';\n\n          printWarning(\n            'Failed ' + location + ' type: ' + error.message + (stack != null ? stack : '')\n          );\n        }\n      }\n    }\n  }\n}\n\n/**\n * Resets warning cache when testing.\n *\n * @private\n */\ncheckPropTypes.resetWarningCache = function() {\n  if (process.env.NODE_ENV !== 'production') {\n    loggedTypeFailures = {};\n  }\n}\n\nmodule.exports = checkPropTypes;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactIs = require('react-is');\nvar assign = require('object-assign');\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\nvar has = require('./lib/has');\nvar checkPropTypes = require('./checkPropTypes');\n\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n}\n\nfunction emptyFunctionThatReturnsNull() {\n  return null;\n}\n\nmodule.exports = function(isValidElement, throwOnDirectAccess) {\n  /* global Symbol */\n  var ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n  var FAUX_ITERATOR_SYMBOL = '@@iterator'; // Before Symbol spec.\n\n  /**\n   * Returns the iterator method function contained on the iterable object.\n   *\n   * Be sure to invoke the function with the iterable as context:\n   *\n   *     var iteratorFn = getIteratorFn(myIterable);\n   *     if (iteratorFn) {\n   *       var iterator = iteratorFn.call(myIterable);\n   *       ...\n   *     }\n   *\n   * @param {?object} maybeIterable\n   * @return {?function}\n   */\n  function getIteratorFn(maybeIterable) {\n    var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);\n    if (typeof iteratorFn === 'function') {\n      return iteratorFn;\n    }\n  }\n\n  /**\n   * Collection of methods that allow declaration and validation of props that are\n   * supplied to React components. Example usage:\n   *\n   *   var Props = require('ReactPropTypes');\n   *   var MyArticle = React.createClass({\n   *     propTypes: {\n   *       // An optional string prop named \"description\".\n   *       description: Props.string,\n   *\n   *       // A required enum prop named \"category\".\n   *       category: Props.oneOf(['News','Photos']).isRequired,\n   *\n   *       // A prop named \"dialog\" that requires an instance of Dialog.\n   *       dialog: Props.instanceOf(Dialog).isRequired\n   *     },\n   *     render: function() { ... }\n   *   });\n   *\n   * A more formal specification of how these methods are used:\n   *\n   *   type := array|bool|func|object|number|string|oneOf([...])|instanceOf(...)\n   *   decl := ReactPropTypes.{type}(.isRequired)?\n   *\n   * Each and every declaration produces a function with the same signature. This\n   * allows the creation of custom validation functions. For example:\n   *\n   *  var MyLink = React.createClass({\n   *    propTypes: {\n   *      // An optional string or URI prop named \"href\".\n   *      href: function(props, propName, componentName) {\n   *        var propValue = props[propName];\n   *        if (propValue != null && typeof propValue !== 'string' &&\n   *            !(propValue instanceof URI)) {\n   *          return new Error(\n   *            'Expected a string or an URI for ' + propName + ' in ' +\n   *            componentName\n   *          );\n   *        }\n   *      }\n   *    },\n   *    render: function() {...}\n   *  });\n   *\n   * @internal\n   */\n\n  var ANONYMOUS = '<<anonymous>>';\n\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithThrowingShims.js`.\n  var ReactPropTypes = {\n    array: createPrimitiveTypeChecker('array'),\n    bigint: createPrimitiveTypeChecker('bigint'),\n    bool: createPrimitiveTypeChecker('boolean'),\n    func: createPrimitiveTypeChecker('function'),\n    number: createPrimitiveTypeChecker('number'),\n    object: createPrimitiveTypeChecker('object'),\n    string: createPrimitiveTypeChecker('string'),\n    symbol: createPrimitiveTypeChecker('symbol'),\n\n    any: createAnyTypeChecker(),\n    arrayOf: createArrayOfTypeChecker,\n    element: createElementTypeChecker(),\n    elementType: createElementTypeTypeChecker(),\n    instanceOf: createInstanceTypeChecker,\n    node: createNodeChecker(),\n    objectOf: createObjectOfTypeChecker,\n    oneOf: createEnumTypeChecker,\n    oneOfType: createUnionTypeChecker,\n    shape: createShapeTypeChecker,\n    exact: createStrictShapeTypeChecker,\n  };\n\n  /**\n   * inlined Object.is polyfill to avoid requiring consumers ship their own\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n   */\n  /*eslint-disable no-self-compare*/\n  function is(x, y) {\n    // SameValue algorithm\n    if (x === y) {\n      // Steps 1-5, 7-10\n      // Steps 6.b-6.e: +0 != -0\n      return x !== 0 || 1 / x === 1 / y;\n    } else {\n      // Step 6.a: NaN == NaN\n      return x !== x && y !== y;\n    }\n  }\n  /*eslint-enable no-self-compare*/\n\n  /**\n   * We use an Error-like object for backward compatibility as people may call\n   * PropTypes directly and inspect their output. However, we don't use real\n   * Errors anymore. We don't inspect their stack anyway, and creating them\n   * is prohibitively expensive if they are created too often, such as what\n   * happens in oneOfType() for any type before the one that matched.\n   */\n  function PropTypeError(message, data) {\n    this.message = message;\n    this.data = data && typeof data === 'object' ? data: {};\n    this.stack = '';\n  }\n  // Make `instanceof Error` still work for returned errors.\n  PropTypeError.prototype = Error.prototype;\n\n  function createChainableTypeChecker(validate) {\n    if (process.env.NODE_ENV !== 'production') {\n      var manualPropTypeCallCache = {};\n      var manualPropTypeWarningCount = 0;\n    }\n    function checkType(isRequired, props, propName, componentName, location, propFullName, secret) {\n      componentName = componentName || ANONYMOUS;\n      propFullName = propFullName || propName;\n\n      if (secret !== ReactPropTypesSecret) {\n        if (throwOnDirectAccess) {\n          // New behavior only for users of `prop-types` package\n          var err = new Error(\n            'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n            'Use `PropTypes.checkPropTypes()` to call them. ' +\n            'Read more at http://fb.me/use-check-prop-types'\n          );\n          err.name = 'Invariant Violation';\n          throw err;\n        } else if (process.env.NODE_ENV !== 'production' && typeof console !== 'undefined') {\n          // Old behavior for people using React.PropTypes\n          var cacheKey = componentName + ':' + propName;\n          if (\n            !manualPropTypeCallCache[cacheKey] &&\n            // Avoid spamming the console because they are often not actionable except for lib authors\n            manualPropTypeWarningCount < 3\n          ) {\n            printWarning(\n              'You are manually calling a React.PropTypes validation ' +\n              'function for the `' + propFullName + '` prop on `' + componentName + '`. This is deprecated ' +\n              'and will throw in the standalone `prop-types` package. ' +\n              'You may be seeing this warning due to a third-party PropTypes ' +\n              'library. See https://fb.me/react-warning-dont-call-proptypes ' + 'for details.'\n            );\n            manualPropTypeCallCache[cacheKey] = true;\n            manualPropTypeWarningCount++;\n          }\n        }\n      }\n      if (props[propName] == null) {\n        if (isRequired) {\n          if (props[propName] === null) {\n            return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required ' + ('in `' + componentName + '`, but its value is `null`.'));\n          }\n          return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required in ' + ('`' + componentName + '`, but its value is `undefined`.'));\n        }\n        return null;\n      } else {\n        return validate(props, propName, componentName, location, propFullName);\n      }\n    }\n\n    var chainedCheckType = checkType.bind(null, false);\n    chainedCheckType.isRequired = checkType.bind(null, true);\n\n    return chainedCheckType;\n  }\n\n  function createPrimitiveTypeChecker(expectedType) {\n    function validate(props, propName, componentName, location, propFullName, secret) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== expectedType) {\n        // `propValue` being instance of, say, date/regexp, pass the 'object'\n        // check, but we can offer a more precise error message here rather than\n        // 'of type `object`'.\n        var preciseType = getPreciseType(propValue);\n\n        return new PropTypeError(\n          'Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + preciseType + '` supplied to `' + componentName + '`, expected ') + ('`' + expectedType + '`.'),\n          {expectedType: expectedType}\n        );\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createAnyTypeChecker() {\n    return createChainableTypeChecker(emptyFunctionThatReturnsNull);\n  }\n\n  function createArrayOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside arrayOf.');\n      }\n      var propValue = props[propName];\n      if (!Array.isArray(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an array.'));\n      }\n      for (var i = 0; i < propValue.length; i++) {\n        var error = typeChecker(propValue, i, componentName, location, propFullName + '[' + i + ']', ReactPropTypesSecret);\n        if (error instanceof Error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!isValidElement(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!ReactIs.isValidElementType(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement type.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createInstanceTypeChecker(expectedClass) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!(props[propName] instanceof expectedClass)) {\n        var expectedClassName = expectedClass.name || ANONYMOUS;\n        var actualClassName = getClassName(props[propName]);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + actualClassName + '` supplied to `' + componentName + '`, expected ') + ('instance of `' + expectedClassName + '`.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createEnumTypeChecker(expectedValues) {\n    if (!Array.isArray(expectedValues)) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (arguments.length > 1) {\n          printWarning(\n            'Invalid arguments supplied to oneOf, expected an array, got ' + arguments.length + ' arguments. ' +\n            'A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).'\n          );\n        } else {\n          printWarning('Invalid argument supplied to oneOf, expected an array.');\n        }\n      }\n      return emptyFunctionThatReturnsNull;\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      for (var i = 0; i < expectedValues.length; i++) {\n        if (is(propValue, expectedValues[i])) {\n          return null;\n        }\n      }\n\n      var valuesString = JSON.stringify(expectedValues, function replacer(key, value) {\n        var type = getPreciseType(value);\n        if (type === 'symbol') {\n          return String(value);\n        }\n        return value;\n      });\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of value `' + String(propValue) + '` ' + ('supplied to `' + componentName + '`, expected one of ' + valuesString + '.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createObjectOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside objectOf.');\n      }\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an object.'));\n      }\n      for (var key in propValue) {\n        if (has(propValue, key)) {\n          var error = typeChecker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n          if (error instanceof Error) {\n            return error;\n          }\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createUnionTypeChecker(arrayOfTypeCheckers) {\n    if (!Array.isArray(arrayOfTypeCheckers)) {\n      process.env.NODE_ENV !== 'production' ? printWarning('Invalid argument supplied to oneOfType, expected an instance of array.') : void 0;\n      return emptyFunctionThatReturnsNull;\n    }\n\n    for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n      var checker = arrayOfTypeCheckers[i];\n      if (typeof checker !== 'function') {\n        printWarning(\n          'Invalid argument supplied to oneOfType. Expected an array of check functions, but ' +\n          'received ' + getPostfixForTypeWarning(checker) + ' at index ' + i + '.'\n        );\n        return emptyFunctionThatReturnsNull;\n      }\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var expectedTypes = [];\n      for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n        var checker = arrayOfTypeCheckers[i];\n        var checkerResult = checker(props, propName, componentName, location, propFullName, ReactPropTypesSecret);\n        if (checkerResult == null) {\n          return null;\n        }\n        if (checkerResult.data && has(checkerResult.data, 'expectedType')) {\n          expectedTypes.push(checkerResult.data.expectedType);\n        }\n      }\n      var expectedTypesMessage = (expectedTypes.length > 0) ? ', expected one of type [' + expectedTypes.join(', ') + ']': '';\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`' + expectedTypesMessage + '.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createNodeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!isNode(props[propName])) {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a ReactNode.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function invalidValidatorError(componentName, location, propFullName, key, type) {\n    return new PropTypeError(\n      (componentName || 'React class') + ': ' + location + ' type `' + propFullName + '.' + key + '` is invalid; ' +\n      'it must be a function, usually from the `prop-types` package, but received `' + type + '`.'\n    );\n  }\n\n  function createShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      for (var key in shapeTypes) {\n        var checker = shapeTypes[key];\n        if (typeof checker !== 'function') {\n          return invalidValidatorError(componentName, location, propFullName, key, getPreciseType(checker));\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createStrictShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      // We need to check all keys in case some are required but missing from props.\n      var allKeys = assign({}, props[propName], shapeTypes);\n      for (var key in allKeys) {\n        var checker = shapeTypes[key];\n        if (has(shapeTypes, key) && typeof checker !== 'function') {\n          return invalidValidatorError(componentName, location, propFullName, key, getPreciseType(checker));\n        }\n        if (!checker) {\n          return new PropTypeError(\n            'Invalid ' + location + ' `' + propFullName + '` key `' + key + '` supplied to `' + componentName + '`.' +\n            '\\nBad object: ' + JSON.stringify(props[propName], null, '  ') +\n            '\\nValid keys: ' + JSON.stringify(Object.keys(shapeTypes), null, '  ')\n          );\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function isNode(propValue) {\n    switch (typeof propValue) {\n      case 'number':\n      case 'string':\n      case 'undefined':\n        return true;\n      case 'boolean':\n        return !propValue;\n      case 'object':\n        if (Array.isArray(propValue)) {\n          return propValue.every(isNode);\n        }\n        if (propValue === null || isValidElement(propValue)) {\n          return true;\n        }\n\n        var iteratorFn = getIteratorFn(propValue);\n        if (iteratorFn) {\n          var iterator = iteratorFn.call(propValue);\n          var step;\n          if (iteratorFn !== propValue.entries) {\n            while (!(step = iterator.next()).done) {\n              if (!isNode(step.value)) {\n                return false;\n              }\n            }\n          } else {\n            // Iterator will provide entry [k,v] tuples rather than values.\n            while (!(step = iterator.next()).done) {\n              var entry = step.value;\n              if (entry) {\n                if (!isNode(entry[1])) {\n                  return false;\n                }\n              }\n            }\n          }\n        } else {\n          return false;\n        }\n\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  function isSymbol(propType, propValue) {\n    // Native Symbol.\n    if (propType === 'symbol') {\n      return true;\n    }\n\n    // falsy value can't be a Symbol\n    if (!propValue) {\n      return false;\n    }\n\n    // 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'\n    if (propValue['@@toStringTag'] === 'Symbol') {\n      return true;\n    }\n\n    // Fallback for non-spec compliant Symbols which are polyfilled.\n    if (typeof Symbol === 'function' && propValue instanceof Symbol) {\n      return true;\n    }\n\n    return false;\n  }\n\n  // Equivalent of `typeof` but with special handling for array and regexp.\n  function getPropType(propValue) {\n    var propType = typeof propValue;\n    if (Array.isArray(propValue)) {\n      return 'array';\n    }\n    if (propValue instanceof RegExp) {\n      // Old webkits (at least until Android 4.0) return 'function' rather than\n      // 'object' for typeof a RegExp. We'll normalize this here so that /bla/\n      // passes PropTypes.object.\n      return 'object';\n    }\n    if (isSymbol(propType, propValue)) {\n      return 'symbol';\n    }\n    return propType;\n  }\n\n  // This handles more types than `getPropType`. Only used for error messages.\n  // See `createPrimitiveTypeChecker`.\n  function getPreciseType(propValue) {\n    if (typeof propValue === 'undefined' || propValue === null) {\n      return '' + propValue;\n    }\n    var propType = getPropType(propValue);\n    if (propType === 'object') {\n      if (propValue instanceof Date) {\n        return 'date';\n      } else if (propValue instanceof RegExp) {\n        return 'regexp';\n      }\n    }\n    return propType;\n  }\n\n  // Returns a string that is postfixed to a warning about an invalid type.\n  // For example, \"undefined\" or \"of type array\"\n  function getPostfixForTypeWarning(value) {\n    var type = getPreciseType(value);\n    switch (type) {\n      case 'array':\n      case 'object':\n        return 'an ' + type;\n      case 'boolean':\n      case 'date':\n      case 'regexp':\n        return 'a ' + type;\n      default:\n        return type;\n    }\n  }\n\n  // Returns class name of the object, if any.\n  function getClassName(propValue) {\n    if (!propValue.constructor || !propValue.constructor.name) {\n      return ANONYMOUS;\n    }\n    return propValue.constructor.name;\n  }\n\n  ReactPropTypes.checkPropTypes = checkPropTypes;\n  ReactPropTypes.resetWarningCache = checkPropTypes.resetWarningCache;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","// @ts-nocheck\nimport React, { ReactNode } from 'react'\nimport PropTypes from 'prop-types'\n\ninterface ICanvasErrorBoundary {\n  children: ReactNode\n  onError: () => void\n}\n\nexport class CanvasErrorBoundary extends React.Component<{}, ICanvasErrorBoundary> {\n  constructor(props) {\n    super(props)\n    this.state = { error: false }\n    this.props = props\n  }\n\n  static propTypes = {\n    onError: PropTypes.func,\n  }\n\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI.\n    return { error }\n  }\n\n  // componentDidCatch(error, errorInfo) {\n  //   // You can also log the error to an error reporting service\n  //   // logErrorToMyService(error, errorInfo)\n  // }\n\n  render() {\n    if (this.state.error) {\n      this.props.onError && this.props.onError(this.state.error)\n      return null\n    }\n\n    return this.props.children\n  }\n}\n","import React, { ReactNode } from 'react'\nimport { Canvas, Props } from '@react-three/fiber'\nimport { ResizeObserver } from '@juggle/resize-observer'\nimport { parse } from 'query-string'\n\nimport { useLayoutEffect } from '../hooks/useIsomorphicLayoutEffect'\nimport { useCanvasStore } from '../store'\nimport { ResizeManager } from './ResizeManager'\nimport { PerspectiveCamera } from './PerspectiveCamera'\nimport { OrthographicCamera } from './OrthographicCamera'\n\nimport { GlobalChildren } from './GlobalChildren'\nimport { GlobalRenderer } from './GlobalRenderer'\nimport { CanvasErrorBoundary } from './CanvasErrorBoundary'\n\nimport { config } from '../config'\n\ninterface IGlobalCanvas extends Omit<Props, 'children'> {\n  as?: any\n  children?: ReactNode | ((globalChildren: ReactNode) => ReactNode)\n  orthographic?: boolean\n  onError?: (props: any) => void\n  camera?: any\n  // state\n  debug?: boolean\n  scaleMultiplier?: number\n  globalRender?: boolean\n  globalPriority?: number\n  globalClearDepth?: boolean\n  loadingFallback?: any\n}\n\nconst GlobalCanvasImpl = ({\n  as = Canvas,\n  children,\n  gl,\n  style,\n  orthographic,\n  camera,\n  debug,\n  scaleMultiplier = config.DEFAULT_SCALE_MULTIPLIER,\n  globalRender = true,\n  globalPriority = config.PRIORITY_GLOBAL,\n  globalClearDepth = false,\n  ...props\n}: Omit<IGlobalCanvas, 'onError'>) => {\n  const globalRenderState = useCanvasStore((state) => state.globalRender)\n\n  // enable debug mode\n  useLayoutEffect(() => {\n    // Querystring overrides\n    const qs = parse(window.location.search)\n\n    // show debug statements\n    if (debug || typeof qs.debug !== 'undefined') {\n      useCanvasStore.setState({ debug: true })\n    }\n  }, [debug])\n\n  // update state\n  useLayoutEffect(() => {\n    useCanvasStore.setState({\n      scaleMultiplier,\n      globalRender,\n      globalPriority,\n      globalClearDepth,\n    })\n  }, [scaleMultiplier, globalPriority, globalRender, globalClearDepth])\n\n  const CanvasElement = as\n\n  return (\n    <CanvasElement\n      id=\"ScrollRig-canvas\"\n      // use our own default camera\n      camera={{\n        manual: true,\n      }}\n      // Some sane defaults\n      gl={{\n        // https://blog.tojicode.com/2013/12/failifmajorperformancecaveat-with-great.html\n        failIfMajorPerformanceCaveat: true, // skip webgl if slow device\n        ...gl,\n      }}\n      // polyfill old iOS safari\n      resize={{ scroll: false, debounce: 0, polyfill: ResizeObserver }}\n      // default styles\n      style={{\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        height: '100vh', // use 100vh to avoid resize on iOS when url bar goes away\n        ...style,\n      }}\n      // allow to override anything of the above\n      {...props}\n    >\n      {typeof children === 'function' ? children(<GlobalChildren />) : <GlobalChildren>{children}</GlobalChildren>}\n\n      {globalRenderState && <GlobalRenderer />}\n\n      {/* @ts-ignore */}\n      {!orthographic && <PerspectiveCamera manual makeDefault {...camera} />}\n      {/* @ts-ignore */}\n      {orthographic && <OrthographicCamera manual makeDefault {...camera} />}\n\n      <ResizeManager />\n    </CanvasElement>\n  )\n}\n\nexport const GlobalCanvas = ({ children, onError, ...props }: IGlobalCanvas) => {\n  useLayoutEffect(() => {\n    document.documentElement.classList.add('js-has-global-canvas')\n  }, [])\n\n  return (\n    // @ts-ignore\n    <CanvasErrorBoundary\n      onError={(err: any) => {\n        onError && onError(err)\n        useCanvasStore.setState({ isCanvasAvailable: false }) /* WebGL failed to init */\n        document.documentElement.classList.remove('js-has-global-canvas')\n        document.documentElement.classList.add('js-global-canvas-error')\n      }}\n    >\n      <GlobalCanvasImpl {...props}>{children}</GlobalCanvasImpl>\n      <noscript>\n        <style>\n          {`\n          .ScrollRig-visibilityHidden,\n          .ScrollRig-transparentColor {\n            visibility: unset;\n            color: unset;\n          }\n          `}\n        </style>\n      </noscript>\n    </CanvasErrorBoundary>\n  )\n}\n","import React from 'react'\nimport { Color } from 'three'\n\nexport const DebugMesh = ({ scale }: { scale: [x: number, y: number, z: number] }) => (\n  <mesh scale={scale}>\n    <planeGeometry />\n    <shaderMaterial\n      args={[\n        {\n          uniforms: {\n            color: { value: new Color('hotpink') },\n          },\n          vertexShader: `\n            void main() {\n              gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n            }\n          `,\n          fragmentShader: `\n            uniform vec3 color;\n            uniform float opacity;\n            void main() {\n              gl_FragColor.rgba = vec4(color, .5);\n            }\n          `,\n        },\n      ]}\n      transparent\n    />\n  </mesh>\n)\n","import { useState, useEffect, useMemo } from 'react'\nimport pkg from 'debounce'\n\nconst isBrowser = typeof window !== 'undefined'\nexport interface WindowSize {\n  width: number\n  height: number\n}\n\ntype ConfigProps = {\n  debounce?: number\n}\n\n/*\n * Triggers a resize only if the Canvas DOM element changed dimensions - not on window resize event\n *\n * This is to avoid costly re-renders when the URL bar is scrolled away on mobile\n *\n * Based on: https://usehooks.com/useWindowSize/\n */\n\nexport function useWindowSize({ debounce = 0 }: ConfigProps = {}) {\n  // Initialize state with undefined width/height so server and client renders match\n  // Learn more here: https://joshwcomeau.com/react/the-perils-of-rehydration/\n  const [windowSize, setWindowSize] = useState<WindowSize>({\n    width: isBrowser ? window.innerWidth : Infinity,\n    height: isBrowser ? window.innerHeight : Infinity,\n  })\n\n  useEffect(() => {\n    // check if we can find a canvas - if so, base size on canvas instead of window\n    // since 100vh !== window.innerHeight on mobile\n    const canvasEl = document.getElementById('ScrollRig-canvas')\n\n    // Handler to call on window resize\n    function handleResize() {\n      const width = canvasEl ? canvasEl.clientWidth : window.innerWidth\n      const height = canvasEl ? canvasEl.clientHeight : window.innerHeight\n\n      if (width !== windowSize.width || height !== windowSize.height) {\n        // Set window width/height to state\n        setWindowSize({\n          width,\n          height,\n        })\n      }\n    }\n\n    const debouncedResize = pkg.debounce(handleResize, debounce)\n\n    // Add event listener\n    let observer: ResizeObserver\n    if (canvasEl) {\n      observer = new ResizeObserver(debouncedResize)\n      observer.observe(canvasEl)\n    } else {\n      window.addEventListener('resize', debouncedResize)\n    }\n    // Call handler right away so state gets updated with initial window size\n    handleResize()\n    // Remove event listener on cleanup\n    return () => {\n      window.removeEventListener('resize', debouncedResize)\n      observer?.disconnect()\n    }\n  }, [windowSize, setWindowSize])\n\n  return windowSize\n}\n","// Linear mapping from range <a1, a2> to range <b1, b2>\nexport function mapLinear(x: number, a1: number, a2: number, b1: number, b2: number) {\n  return b1 + ((x - a1) * (b2 - b1)) / (a2 - a1)\n}\n","import { useCanvasStore } from '../store'\nimport { LenisScrollCallback } from './LenisScrollbar'\n\nexport interface Scroll {\n  y: number\n  x: number\n  limit: number\n  velocity: number\n  progress: number\n  direction: number\n  scrollDirection: string\n}\n\ninterface UseScrollbarProps {\n  enabled: boolean\n  scroll: Scroll\n  scrollTo: (target: any) => void\n  onScroll: (cb: LenisScrollCallback) => () => void\n}\n\n/**\n * Public interface for ScrollRig\n */\nexport const useScrollbar = () => {\n  const hasSmoothScrollbar = useCanvasStore((state) => state.hasSmoothScrollbar)\n  const scroll = useCanvasStore((state) => state.scroll)\n  const scrollTo = useCanvasStore((state) => state.scrollTo)\n  const onScroll = useCanvasStore((state) => state.onScroll)\n\n  return {\n    enabled: hasSmoothScrollbar,\n    scroll,\n    scrollTo,\n    onScroll,\n  } as UseScrollbarProps\n}\n","import { useRef, useCallback, useEffect, useMemo, useState, MutableRefObject } from 'react'\nimport { useInView } from 'react-intersection-observer'\nimport { useWindowSize } from './useWindowSize'\nimport vecn from 'vecn'\n\nimport { useLayoutEffect } from '../hooks/useIsomorphicLayoutEffect'\nimport { mapLinear } from '../utils/math'\nimport { useCanvasStore } from '../store'\nimport { useScrollRig } from './useScrollRig'\n\nimport { useScrollbar, Scroll } from '../scrollbar/useScrollbar'\n\nimport type { Rect, Bounds, TrackerOptions, Tracker, ScrollState, UpdateCallback } from './useTracker.d'\n\nfunction updateBounds(bounds: Bounds, rect: Rect, scroll: Scroll, size: any) {\n  bounds.top = rect.top - (scroll.y || 0)\n  bounds.bottom = rect.bottom - (scroll.y || 0)\n  bounds.left = rect.left - (scroll.x || 0)\n  bounds.right = rect.right - (scroll.x || 0)\n  bounds.width = rect.width\n  bounds.height = rect.height\n  // move coordinate system so 0,0 is at center of screen\n  bounds.x = bounds.left + rect.width * 0.5 - size.width * 0.5\n  bounds.y = bounds.top + rect.height * 0.5 - size.height * 0.5\n  bounds.positiveYUpBottom = size.height - bounds.bottom // inverse Y\n}\n\nfunction updatePosition(position: vec3, bounds: Bounds, scaleMultiplier: number) {\n  position.x = bounds.x * scaleMultiplier\n  position.y = -1 * bounds.y * scaleMultiplier\n}\n\n/**\n * Returns the current Scene position of the DOM element\n * based on initial getBoundingClientRect and scroll delta from start\n */\nfunction useTracker(track: MutableRefObject<HTMLElement>, options?: TrackerOptions): Tracker {\n  const size = useWindowSize()\n  const { debug } = useScrollRig()\n  const { scroll, onScroll } = useScrollbar()\n  const scaleMultiplier = useCanvasStore((state) => state.scaleMultiplier)\n  const pageReflow = useCanvasStore((state) => state.pageReflow)\n\n  // extend defaults with optional options\n  const { rootMargin, threshold, autoUpdate, wrapper } = useMemo(() => {\n    const target = { rootMargin: '0%', threshold: 0, autoUpdate: true } as TrackerOptions\n    const opts = options || {}\n    Object.keys(opts).map((key: string, index) => {\n      if (opts[key] !== undefined) target[key] = opts[key]\n    })\n    return target\n  }, [options])\n\n  // check if element is in viewport\n  const { ref, inView: inViewport } = useInView({ rootMargin, threshold })\n\n  // bind useInView ref to current tracking element\n  useLayoutEffect(() => {\n    ref(track.current)\n  }, [track])\n\n  // Using state so it's reactive\n  const [scale, setScale] = useState<vec3>(vecn.vec3(0, 0, 0))\n\n  // Using ref because\n  const scrollState: ScrollState = useRef({\n    inViewport: false,\n    progress: -1,\n    visibility: -1,\n    viewport: -1,\n  }).current\n\n  // DOM rect (initial position in pixels offset by scroll value on page load)\n  // Using ref so we can calculate bounds & position without a re-render\n  const rect = useRef({\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    width: 0,\n    height: 0,\n  }).current\n\n  // expose internal ref as a reactive state as well\n  const [reactiveRect, setReactiveRect] = useState<Rect>(rect)\n\n  // bounding rect in pixels - updated by scroll\n  const bounds = useRef({\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    width: 0,\n    height: 0,\n    x: 0,\n    y: 0,\n    positiveYUpBottom: 0,\n  }).current\n\n  // position in viewport units - updated by scroll\n  const position = useRef(vecn.vec3(0, 0, 0)).current\n\n  // Calculate bounding Rect as soon as it's available\n  useLayoutEffect(() => {\n    const _rect = track.current?.getBoundingClientRect()\n    if (!_rect) return\n    const initialY = wrapper ? (wrapper as HTMLElement).scrollTop : window.scrollY\n    const initialX = wrapper ? (wrapper as HTMLElement).scrollLeft : window.scrollX\n    rect.top = _rect.top + initialY\n    rect.bottom = _rect.bottom + initialY\n    rect.left = _rect.left + initialX\n    rect.right = _rect.right + initialX\n    rect.width = _rect.width\n    rect.height = _rect.height\n    setReactiveRect({ ...rect })\n    setScale(vecn.vec3(rect?.width * scaleMultiplier, rect?.height * scaleMultiplier, 1))\n    debug &&\n      console.log(\n        'useTracker.getBoundingClientRect:',\n        rect,\n        'intialScroll:',\n        { initialY, initialX },\n        'size:',\n        size,\n        'pageReflow:',\n        pageReflow\n      )\n  }, [track, size, pageReflow, scaleMultiplier, debug])\n\n  const update = useCallback(\n    ({ onlyUpdateInViewport = false, scroll: overrideScroll }: UpdateCallback = {}) => {\n      if (!track.current || (onlyUpdateInViewport && !scrollState.inViewport)) {\n        return\n      }\n\n      const _scroll = overrideScroll || scroll\n\n      updateBounds(bounds, rect, _scroll, size)\n      updatePosition(position, bounds, scaleMultiplier)\n\n      // scrollState setup based on scroll direction\n      const isHorizontal = _scroll.scrollDirection === 'horizontal'\n      const sizeProp = isHorizontal ? 'width' : 'height'\n      const startProp = isHorizontal ? 'left' : 'top'\n\n      // calculate progress of passing through viewport (0 = just entered, 1 = just exited)\n      const pxInside = size[sizeProp] - bounds[startProp]\n      scrollState.progress = mapLinear(pxInside, 0, size[sizeProp] + bounds[sizeProp], 0, 1) // percent of total visible distance\n      scrollState.visibility = mapLinear(pxInside, 0, bounds[sizeProp], 0, 1) // percent of item height in view\n      scrollState.viewport = mapLinear(pxInside, 0, size[sizeProp], 0, 1) // percent of window height scrolled since visible\n    },\n    [track, size, scaleMultiplier, scroll]\n  )\n\n  // update scrollState in viewport\n  useLayoutEffect(() => {\n    scrollState.inViewport = inViewport\n    // update once more in case it went out of view\n    update({ onlyUpdateInViewport: false })\n    debug && console.log('useTracker.inViewport:', inViewport, 'update()')\n  }, [inViewport])\n\n  // re-run if the callback updated\n  useLayoutEffect(() => {\n    update({ onlyUpdateInViewport: false })\n    debug && console.log('useTracker.update on resize/reflow')\n  }, [update, pageReflow])\n\n  // auto-update on scroll\n  useEffect(() => {\n    if (autoUpdate) return onScroll((_scroll) => update({ onlyUpdateInViewport: true }))\n  }, [autoUpdate, update, onScroll])\n\n  return {\n    rect: reactiveRect, // Dom rect - doesn't change on scroll - not - reactive\n    bounds, // scrolled bounding rect in pixels - not reactive\n    scale, // reactive scene scale - includes z-axis so it can be spread onto mesh directly\n    position, // scrolled element position in viewport units - not reactive\n    scrollState, // scroll progress stats - not reactive\n    inViewport, // reactive prop for when inside viewport\n    update, // optional manual update\n  }\n}\n\nexport { useTracker }\n","import React, { memo, useState, useCallback, MutableRefObject, ReactNode } from 'react'\nimport { Scene } from 'three'\nimport { useFrame, createPortal } from '@react-three/fiber'\n\nimport { useLayoutEffect } from '../hooks/useIsomorphicLayoutEffect'\nimport { config } from '../config'\nimport { useCanvasStore } from '../store'\nimport { useScrollRig } from '../hooks/useScrollRig'\nimport { DebugMesh } from './DebugMesh'\nimport { useTracker } from '../hooks/useTracker'\nimport type { ScrollState } from '../hooks/useTracker.d'\n\nexport interface ScrollSceneChildProps {\n  track: MutableRefObject<HTMLElement>\n  margin: number\n  priority: number\n  scale: vec3 | undefined\n  scrollState: ScrollState\n  inViewport: boolean\n}\n\ninterface ScrollScene {\n  track: MutableRefObject<HTMLElement>\n  children: (state: ScrollSceneChildProps) => ReactNode\n  margin?: number\n  inViewportMargin?: string\n  inViewportThreshold?: number\n  visible?: boolean\n  hideOffscreen?: boolean\n  scissor?: boolean\n  debug?: boolean\n  as?: string\n  priority?: number\n}\n\n/**\n * Generic THREE.js Scene that tracks the dimensions and position of a DOM element while scrolling\n * Scene is positioned and scaled exactly above DOM element\n *\n * @author david@14islands.com\n */\nconst ScrollSceneImpl = ({\n  track,\n  children,\n  margin = 0, // Margin outside scissor to avoid clipping vertex displacement (px)\n  inViewportMargin,\n  inViewportThreshold,\n  visible = true,\n  hideOffscreen = true,\n  scissor = false,\n  debug = false,\n  as = 'scene',\n  priority = config.PRIORITY_SCISSORS,\n  ...props\n}: ScrollScene) => {\n  const inlineSceneRef = useCallback((node: any) => {\n    if (node !== null) {\n      setScene(node)\n    }\n  }, [])\n\n  const [scene, setScene] = useState<Scene | null>(scissor ? new Scene() : null)\n  const { requestRender, renderScissor } = useScrollRig()\n  const globalRender = useCanvasStore((state) => state.globalRender)\n\n  const { bounds, scale, position, scrollState, inViewport } = useTracker(track, {\n    rootMargin: inViewportMargin,\n    threshold: inViewportThreshold,\n  })\n\n  // Hide scene when outside of viewport if `hideOffscreen` or set to `visible` prop\n  useLayoutEffect(() => {\n    if (scene) scene.visible = hideOffscreen ? inViewport && visible : visible\n  }, [scene, inViewport, hideOffscreen, visible])\n\n  // RENDER FRAME\n  useFrame(\n    ({ gl, camera }) => {\n      if (!scene) return\n\n      if (scene.visible) {\n        // move scene\n        scene.position.y = position.y\n        scene.position.x = position.x\n\n        if (scissor) {\n          renderScissor({\n            gl,\n            scene,\n            camera,\n            left: bounds.left - margin,\n            top: bounds.positiveYUpBottom - margin,\n            width: bounds.width + margin * 2,\n            height: bounds.height + margin * 2,\n          })\n        } else {\n          requestRender()\n        }\n      }\n    },\n    globalRender ? priority : undefined\n  )\n\n  const content = (\n    <>\n      {(!children || debug) && scale && <DebugMesh scale={scale} />}\n      {children &&\n        scene &&\n        scale &&\n        children({\n          // inherited props\n          track,\n          margin,\n          // new props\n          scale,\n          scrollState,\n          inViewport,\n          // useFrame render priority (in case children need to run after)\n          priority: priority,\n          // tunnel the rest\n          ...props,\n        })}\n    </>\n  )\n\n  // portal if scissor or inline nested scene\n  const InlineElement: any = as\n  // @ts-ignore\n  return scissor && scene ? createPortal(content, scene) : <InlineElement ref={inlineSceneRef}>{content}</InlineElement>\n}\n\nconst ScrollScene = memo(ScrollSceneImpl)\n\nexport { ScrollScene }\n","import React, { memo, useEffect, useState, useCallback, MutableRefObject, ReactNode } from 'react'\nimport { Scene } from 'three'\nimport { useFrame, createPortal, useThree } from '@react-three/fiber'\n\nimport { useLayoutEffect } from '../hooks/useIsomorphicLayoutEffect'\nimport { config } from '../config'\nimport { useScrollRig } from '../hooks/useScrollRig'\nimport { DebugMesh } from './DebugMesh'\nimport { useTracker } from '../hooks/useTracker'\nimport type { Tracker } from '../hooks/useTracker.d'\nimport { PerspectiveCamera } from './PerspectiveCamera'\nimport { OrthographicCamera } from './OrthographicCamera'\n\nimport type { ScrollSceneChildProps } from './ScrollScene'\n\ninterface ViewportScrollScene {\n  track: MutableRefObject<HTMLElement>\n  children: (state: ScrollSceneChildProps) => ReactNode\n  margin?: number\n  inViewportMargin?: string\n  inViewportThreshold?: number\n  visible?: boolean\n  hideOffscreen?: boolean\n  debug?: boolean\n  orthographic?: boolean\n  priority?: number\n  hud?: boolean // clear depth to render on top\n  camera?: any\n}\n\n/**\n * Generic THREE.js Scene that tracks the dimensions and position of a DOM element while scrolling\n * Scene is rendered into a GL viewport matching the DOM position for better performance\n *\n * Adapted to @react-three/fiber from https://threejsfundamentals.org/threejs/lessons/threejs-multiple-scenes.html\n * @author david@14islands.com\n */\nconst Viewport = ({\n  track,\n  children,\n  margin = 0, // Margin outside viewport to avoid clipping vertex displacement (px)\n  visible = true,\n  hideOffscreen = true,\n  debug = false,\n  orthographic = false,\n  priority = config.PRIORITY_VIEWPORTS,\n  inViewport,\n  bounds,\n  scale,\n  scrollState,\n  camera,\n  hud,\n  ...props\n}: ViewportScrollScene & Tracker) => {\n  const scene = useThree((s) => s.scene)\n  const get = useThree((state) => state.get)\n  const setEvents = useThree((state) => state.setEvents)\n\n  const { renderViewport } = useScrollRig()\n\n  // Hide scene when outside of viewport if `hideOffscreen` or set to `visible` prop\n  useLayoutEffect(() => {\n    scene.visible = hideOffscreen ? inViewport && visible : visible\n  }, [inViewport, hideOffscreen, visible])\n\n  // From: https://github.com/pmndrs/drei/blob/d22fe0f58fd596c7bfb60a7a543cf6c80da87624/src/web/View.tsx#L80\n  useEffect(() => {\n    // Connect the event layer to the tracking element\n    const old = get().events.connected\n    setEvents({ connected: track.current })\n    return () => setEvents({ connected: old })\n  }, [])\n\n  // RENDER FRAME\n  useFrame(({ gl, scene, camera }) => {\n    // Render scene to viewport using local camera and limit updates using scissor test\n    if (scene.visible) {\n      renderViewport({\n        gl,\n        scene,\n        camera,\n        left: bounds.left - margin,\n        top: bounds.positiveYUpBottom - margin,\n        width: bounds.width + margin * 2,\n        height: bounds.height + margin * 2,\n        clearDepth: !!hud,\n      })\n    }\n  }, priority)\n\n  return (\n    <>\n      {!orthographic && <PerspectiveCamera manual makeDefault {...camera} />}\n      {orthographic && <OrthographicCamera manual makeDefault {...camera} />}\n      {(!children || debug) && scale && <DebugMesh scale={scale} />}\n      {children &&\n        // scene &&\n        scale &&\n        children({\n          // inherited props\n          track,\n          margin,\n          // new props\n          scale,\n          scrollState,\n          inViewport,\n          // useFrame render priority (in case children need to run after)\n          priority,\n          // tunnel the rest\n          ...props,\n        })}\n    </>\n  )\n}\n\nfunction ViewportScrollSceneImpl({\n  track,\n  margin = 0, // Margin outside viewport to avoid clipping vertex displacement (px)\n  inViewportMargin,\n  inViewportThreshold,\n  priority,\n  ...props\n}: ViewportScrollScene) {\n  const [scene] = useState(() => new Scene())\n\n  const { bounds, ...trackerProps } = useTracker(track, {\n    rootMargin: inViewportMargin,\n    threshold: inViewportThreshold,\n  })\n\n  // From: https://github.com/pmndrs/drei/blob/d22fe0f58fd596c7bfb60a7a543cf6c80da87624/src/web/View.tsx#L80\n  const compute = useCallback(\n    (event: any, state: any) => {\n      // limit events to DOM element bounds\n      if (track.current && event.target === track.current) {\n        const { width, height, left, top } = bounds\n        const mWidth = width + margin * 2\n        const mHeight = height + margin * 2\n        const x = event.clientX - left + margin\n        const y = event.clientY - top + margin\n        state.pointer.set((x / mWidth) * 2 - 1, -(y / mHeight) * 2 + 1)\n        state.raycaster.setFromCamera(state.pointer, state.camera)\n      }\n    },\n    [bounds]\n  )\n\n  return (\n    bounds &&\n    createPortal(\n      <Viewport track={track} bounds={bounds} priority={priority} {...props} {...trackerProps} />,\n      scene,\n      // @ts-ignore\n      { events: { compute, priority }, size: { width: bounds.width, height: bounds.height } }\n    )\n  )\n}\n\nconst ViewportScrollScene = memo(ViewportScrollSceneImpl)\n\nexport { ViewportScrollScene }\n","import { useEffect, useMemo, useCallback, ReactNode } from 'react'\nimport { MathUtils } from 'three'\n\nimport { useCanvasStore } from '../store'\nimport { useLayoutEffect } from '../hooks/useIsomorphicLayoutEffect'\n\nimport { ScrollRigState } from '../hooks/useScrollRig'\n/**\n * Adds THREE.js object to the GlobalCanvas while the component is mounted\n * @param {object} object THREE.js object3d\n */\nfunction useCanvas(\n  object: ReactNode | ((props: ScrollRigState) => ReactNode),\n  deps: any = {},\n  { key, dispose = true }: { key?: string; dispose?: boolean } = {}\n) {\n  const updateCanvas = useCanvasStore((state) => state.updateCanvas)\n  const renderToCanvas = useCanvasStore((state) => state.renderToCanvas)\n  const removeFromCanvas = useCanvasStore((state) => state.removeFromCanvas)\n\n  // auto generate uuid v4 key\n  const uniqueKey = useMemo(() => key || MathUtils.generateUUID(), [])\n\n  // render to canvas if not mounted already\n  useLayoutEffect(() => {\n    renderToCanvas(uniqueKey, object, { inactive: false })\n  }, [uniqueKey])\n\n  // remove from canvas if no usage (after render so new users have time to register)\n  useEffect(() => {\n    return () => {\n      removeFromCanvas(uniqueKey, dispose)\n    }\n  }, [uniqueKey])\n\n  // return function that can set new props on the canvas component\n  const set = useCallback(\n    (props: any) => {\n      updateCanvas(uniqueKey, props)\n    },\n    [updateCanvas, uniqueKey]\n  )\n\n  // auto update props when deps change\n  useEffect(() => {\n    set(deps)\n  }, [...Object.values(deps)])\n\n  return set\n}\n\nexport { useCanvas }\n","import { forwardRef, ReactNode } from 'react'\nimport { useCanvas } from '../hooks/useCanvas'\n\nimport { ScrollRigState } from '../hooks/useScrollRig'\n\ninterface IUseCanvas {\n  children: ReactNode | ((props: ScrollRigState) => ReactNode)\n  id?: string // persistent layout id\n}\n\nconst UseCanvas = forwardRef(({ children, id, ...props }: IUseCanvas, ref) => {\n  // auto update canvas with all props\n  useCanvas(children, { ...props, ref }, { key: id })\n  return null\n})\n\nexport { UseCanvas }\n","import { useEffect, RefObject, useMemo } from 'react'\nimport { useThree, useLoader } from '@react-three/fiber'\nimport { Texture, CanvasTexture, ImageBitmapLoader, TextureLoader, DefaultLoadingManager } from 'three'\nimport { suspend } from 'suspend-react'\nimport supportsWebP from 'supports-webp'\nimport equal from 'fast-deep-equal'\n\nimport { useWindowSize } from './useWindowSize'\nimport { useCanvasStore } from '../store'\n\n/**\n *  Create Threejs Texture from DOM image tag\n *\n *  - Supports <picture> and `srcset` - uses `currentSrc` to get the responsive image source\n *\n *  - Supports lazy-loading image - suspends until first load event. Warning: the GPU upload can cause jank\n *\n *  - Relies on browser cache to avoid loading image twice. We let the <img> tag load the image and suspend until it's ready.\n *\n *  - NOTE: You must add the `crossOrigin` attribute\n *     <img src=\"\" alt=\"\" crossOrigin=\"anonymous\"/>\n */\n\nlet hasWebpSupport: boolean = false\n// this test is fast - \"should\" run before first image is requested\nsupportsWebP.then((supported) => {\n  hasWebpSupport = supported\n})\n\nfunction useTextureLoader() {\n  // Use an ImageBitmapLoader if imageBitmaps are supported. Moves much of the\n  // expensive work of uploading a texture to the GPU off the main thread.\n  // Copied from: github.com/mrdoob/three.js/blob/master/examples/jsm/loaders/GLTFLoader.js#L2424\n  const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent) === true\n  const isFirefox = navigator.userAgent.indexOf('Firefox') > -1\n  // @ts-ignore\n  const firefoxVersion = isFirefox ? navigator.userAgent.match(/Firefox\\/([0-9]+)\\./)[1] : -1\n  return typeof createImageBitmap === 'undefined' || isSafari || (isFirefox && firefoxVersion < 98)\n}\n\nfunction useImageAsTexture(\n  imgRef: RefObject<HTMLImageElement>,\n  { initTexture = true, premultiplyAlpha = 'default' } = {}\n) {\n  const gl = useThree((s) => s.gl)\n  const size = useWindowSize()\n  const debug = useCanvasStore((state) => state.debug)\n\n  // suspend until we have currentSrc for this `size`\n  const currentSrc = suspend(\n    () => {\n      DefaultLoadingManager.itemStart('waiting for DOM image')\n      return new Promise((resolve) => {\n        const el = imgRef.current\n\n        function returnResolve() {\n          resolve(el?.currentSrc)\n        }\n\n        // respond to all future load events (resizing might load another image)\n        el?.addEventListener('load', returnResolve, { once: true })\n\n        // detect if loaded from browser cache\n        if (el?.complete) {\n          el?.removeEventListener('load', returnResolve)\n          returnResolve()\n        }\n      })\n    },\n    [imgRef, size],\n    { equal } // use deep-equal since size ref seems to update on route change\n  ) as string\n\n  const LoaderProto = useTextureLoader() ? TextureLoader : ImageBitmapLoader\n\n  // @ts-ignore\n  const result: any = useLoader(LoaderProto, currentSrc, (loader) => {\n    if (loader instanceof ImageBitmapLoader) {\n      loader.setOptions({\n        colorSpaceConversion: 'none',\n        premultiplyAlpha, // \"none\" increases blocking time in lighthouse\n        imageOrientation: 'flipY',\n      })\n      // Add webp to Accept header if supported\n      // TODO: add check for AVIF\n      loader.setRequestHeader({\n        Accept: `${hasWebpSupport ? 'image/webp,' : ''}*/*`,\n      })\n    }\n  })\n\n  const texture = useMemo(() => {\n    if (result instanceof Texture) {\n      return result\n    }\n    if (result instanceof ImageBitmap) {\n      return new CanvasTexture(result)\n    }\n  }, [result]) as Texture\n\n  // https://github.com/mrdoob/three.js/issues/22696\n  // Upload the texture to the GPU immediately instead of waiting for the first render\n  useEffect(\n    function uploadTextureToGPU() {\n      initTexture && gl.initTexture(texture)\n      DefaultLoadingManager.itemEnd('waiting for DOM image')\n      debug && console.log('useImageAsTexture', 'initTexture()')\n    },\n    [gl, texture, initTexture]\n  )\n\n  return texture\n}\n\nexport { useImageAsTexture }\n","import React, { useRef, useEffect, forwardRef, useImperativeHandle, ReactElement } from 'react'\n\n// @ts-ignore\n// eslint-disable-next-line import/no-unresolved\nimport Lenis from '@studio-freight/lenis'\n\nexport type LenisScrollCallback = (props: {\n  scroll: number\n  limit: number\n  velocity: number\n  direction: number\n  progress: number\n}) => void\n\nexport type LenisScrollToTarget = number | HTMLElement | string\nexport type LenisScrollToConfig = {\n  offset: number\n  immediate: boolean\n  duration: number\n  easing: (t: number) => number\n}\ntype LenisScrollTo = (target: LenisScrollToTarget, props: LenisScrollToConfig) => void\n\ntype LenisScrollbarProps = {\n  children: (props: any) => ReactElement\n  duration?: number\n  easing?: (t: number) => number\n  smooth?: boolean\n  direction?: string\n  config?: any\n  smoothTouch?: boolean\n}\n\nexport interface ILenisScrollbar {\n  stop: () => void\n  start: () => void\n  on: (event: string, cb: LenisScrollCallback) => void\n  once: (event: string, cb: LenisScrollCallback) => void\n  off: (event: string, cb?: LenisScrollCallback) => void\n  notify: () => void\n  scrollTo: LenisScrollTo\n  raf: (time: number) => void\n}\n\nconst EASE_EXP_OUT = (t: number) => (t === 1 ? 1 : 1 - Math.pow(2, -10 * t)) // https://easings.net/\n\nexport function LenisScrollbar(\n  {\n    children,\n    duration = 1,\n    easing = EASE_EXP_OUT,\n    smooth = true,\n    direction = 'vertical',\n    config,\n    ...props\n  }: LenisScrollbarProps,\n  ref: any\n) {\n  const lenisImpl = useRef<ILenisScrollbar>()\n\n  // Expose lenis imperative API\n  useImperativeHandle(ref, () => ({\n    start: () => lenisImpl.current?.start(),\n    stop: () => lenisImpl.current?.stop(),\n    on: (event: string, cb: LenisScrollCallback) => lenisImpl.current?.on(event, cb),\n    once: (event: string, cb: LenisScrollCallback) => lenisImpl.current?.once(event, cb),\n    off: (event: string, cb?: LenisScrollCallback) => lenisImpl.current?.off(event, cb),\n    notify: () => lenisImpl.current?.notify(),\n    scrollTo: (target: LenisScrollToTarget, props: LenisScrollToConfig) => lenisImpl.current?.scrollTo(target, props),\n    raf: (time: number) => lenisImpl.current?.raf(time),\n    __lenis: lenisImpl.current,\n  }))\n\n  useEffect(\n    function initLenis() {\n      // @ts-ignore\n      const lenis = (lenisImpl.current = new Lenis({\n        duration,\n        easing,\n        smooth,\n        direction,\n        ...config,\n      }))\n\n      // cleanup on unmount\n      return () => {\n        lenis.destroy()\n      }\n    },\n    [duration, easing, smooth, direction]\n  )\n\n  // Support a render function as child\n  return children && children(props)\n}\n\nexport default forwardRef(LenisScrollbar)\n","import React, { useEffect, useRef, useCallback, ReactElement, useMemo, forwardRef, useImperativeHandle } from 'react'\nimport { addEffect, invalidate } from '@react-three/fiber'\nimport pkg from 'debounce'\n\nimport { useLayoutEffect } from '../hooks/useIsomorphicLayoutEffect'\nimport { useCanvasStore } from '../store'\n\nimport LenisScrollbar, {\n  ILenisScrollbar,\n  LenisScrollCallback,\n  LenisScrollToTarget,\n  LenisScrollToConfig,\n} from './LenisScrollbar'\n\ninterface ISmoothScrobbar {\n  children: (props: any) => ReactElement\n  scrollRestoration?: ScrollRestoration\n  enabled?: boolean\n  locked?: boolean\n  disablePointerOnScroll?: boolean\n  config?: object\n  horizontal?: boolean\n  scrollInContainer?: boolean\n  updateGlobalState?: boolean\n  onScroll?: LenisScrollCallback\n}\n\nconst SmoothScrollbarImpl = (\n  {\n    children,\n    enabled = true,\n    locked = false,\n    scrollRestoration = 'auto',\n    disablePointerOnScroll = true,\n    horizontal = false,\n    scrollInContainer = false,\n    updateGlobalState = true,\n    onScroll,\n    config,\n  }: ISmoothScrobbar,\n  ref: any\n) => {\n  const innerRef = useRef<HTMLElement>()\n  const lenis = useRef<ILenisScrollbar>()\n  const preventPointer = useRef(false)\n  const globalScrollState = useCanvasStore((state) => state.scroll)\n\n  // expose scrollTo imperatively\n  useImperativeHandle(ref, () => {\n    return {\n      scrollTo: (target: LenisScrollToTarget, props: LenisScrollToConfig) => lenis.current?.scrollTo(target, props),\n      __lenis: lenis.current,\n    }\n  })\n\n  // disable pointer events while scrolling to avoid slow event handlers\n  const preventPointerEvents = (prevent: boolean) => {\n    if (!disablePointerOnScroll) return\n    if (innerRef.current && preventPointer.current !== prevent) {\n      preventPointer.current = prevent\n      innerRef.current.style.pointerEvents = prevent ? 'none' : 'auto'\n    }\n  }\n\n  // reset pointer events when moving mouse\n  const onMouseMove = useCallback(() => {\n    preventPointerEvents(false)\n  }, [])\n\n  // function to bind to scroll event\n  // return function that will unbind same callback\n  const globalOnScroll = useCallback((cb: LenisScrollCallback) => {\n    lenis.current?.on('scroll', cb)\n    return () => lenis.current?.off('scroll', cb)\n  }, [])\n\n  // apply chosen scroll restoration\n  useLayoutEffect(() => {\n    if ('scrollRestoration' in window.history) {\n      window.history.scrollRestoration = scrollRestoration\n    }\n  }, [])\n\n  useEffect(() => {\n    // let r3f drive the frameloop\n    const removeEffect = addEffect((time: number) => lenis.current?.raf(time))\n\n    // update global scroll store\n    lenis.current?.on('scroll', ({ scroll, limit, velocity, direction, progress }) => {\n      const y = !horizontal ? scroll : 0\n      const x = horizontal ? scroll : 0\n\n      if (updateGlobalState) {\n        globalScrollState.y = y\n        globalScrollState.x = x\n        globalScrollState.limit = limit\n        globalScrollState.velocity = velocity\n        globalScrollState.direction = direction\n        globalScrollState.progress = progress\n      }\n\n      // disable pointer logic\n      const disablePointer = pkg.debounce(() => preventPointerEvents(true), 100, true)\n      if (Math.abs(velocity) > 1.4) {\n        disablePointer()\n      } else {\n        preventPointerEvents(false)\n      }\n\n      onScroll && onScroll({ scroll, limit, velocity, direction, progress })\n\n      invalidate()\n    })\n\n    // trigger initial scroll event to update global state\n    lenis.current?.notify()\n\n    // update global state\n    if (updateGlobalState) {\n      globalScrollState.scrollDirection = horizontal ? 'horizontal' : 'vertical'\n\n      // expose global scrollTo function\n      // @ts-ignore\n      useCanvasStore.setState({ scrollTo: lenis.current?.scrollTo })\n\n      // expose global onScroll function to subscribe to scroll events\n      // @ts-ignore\n      useCanvasStore.setState({ onScroll: globalOnScroll })\n\n      // Set current scroll position on load in case reloaded further down\n      useCanvasStore.getState().scroll.y = window.scrollY\n      useCanvasStore.getState().scroll.x = window.scrollX\n    }\n\n    // make sure R3F loop is invalidated when scrolling\n    const invalidateOnWheelEvent = () => invalidate()\n\n    window.addEventListener('pointermove', onMouseMove)\n    window.addEventListener('wheel', invalidateOnWheelEvent)\n    return () => {\n      lenis.current?.off('scroll')\n      removeEffect()\n      window.removeEventListener('pointermove', onMouseMove)\n      window.removeEventListener('wheel', invalidateOnWheelEvent)\n    }\n  }, [])\n\n  useEffect(() => {\n    // Mark as enabled in global state\n    if (updateGlobalState) {\n      document.documentElement.classList.toggle('js-smooth-scrollbar-enabled', enabled)\n      document.documentElement.classList.toggle('js-smooth-scrollbar-disabled', !enabled)\n      useCanvasStore.setState({ hasSmoothScrollbar: enabled })\n    }\n  }, [enabled])\n\n  useEffect(() => {\n    locked ? lenis.current?.stop() : lenis.current?.start()\n  }, [locked])\n\n  // Set up scroll containers - allows scrolling without resizing window on iOS/mobile\n  const { wrapper, content } = useMemo(() => {\n    if (typeof document === 'undefined') return {}\n    const html = document.documentElement\n    const wrapper = document.body\n    const content = document.body.firstElementChild\n\n    html.classList.toggle('ScrollRig-scrollHtml', scrollInContainer)\n    wrapper.classList.toggle('ScrollRig-scrollWrapper', scrollInContainer)\n\n    return {\n      wrapper,\n      content,\n    }\n  }, [scrollInContainer])\n\n  return (\n    <LenisScrollbar\n      ref={lenis}\n      direction={horizontal ? 'horizontal' : 'vertical'}\n      config={\n        scrollInContainer\n          ? {\n              smoothTouch: true,\n              wrapper,\n              content,\n              ...config,\n            }\n          : { ...config }\n      }\n    >\n      {/* Use function child so we can spread props\n        - for instance disable pointer events while scrolling */}\n      {(bind: any) => children({ ...bind, ref: innerRef })}\n    </LenisScrollbar>\n  )\n}\n\nexport const SmoothScrollbar = forwardRef(SmoothScrollbarImpl)\n","import './styles/index.css'\n\n// Components\nexport { GlobalCanvas } from './components/GlobalCanvas'\nexport { ScrollScene } from './components/ScrollScene'\nexport { ViewportScrollScene } from './components/ViewportScrollScene'\nexport { UseCanvas } from './components/UseCanvas'\n\n// Hooks\nexport { useScrollRig } from './hooks/useScrollRig'\nexport { useCanvas } from './hooks/useCanvas'\nexport { useScrollbar } from './scrollbar/useScrollbar'\nexport { useTracker } from './hooks/useTracker'\n\n// Utils hooks\nexport { useImageAsTexture } from './hooks/useImageAsTexture'\n\n// Scrollbar\nexport { SmoothScrollbar } from './scrollbar/SmoothScrollbar'\n\n// CSS class names for hiding stuff\n// Matching css styles can be imported from @14islands/r3f-scrollr-rig/css\nexport const styles = {\n  hidden: 'ScrollRig-visibilityHidden',\n  hiddenWhenSmooth: 'ScrollRig-visibilityHidden ScrollRig-hiddenIfSmooth',\n  transparentColor: 'ScrollRig-transparentColor',\n  transparentColorWhenSmooth: 'ScrollRig-transparentColor ScrollRig-hiddenIfSmooth',\n}\n\n// Private-ish\n// ----------------------------------\nexport { useCanvasStore } from './store'\n\n// Types\nexport type { ScrollState } from './hooks/useTracker.d'\n"],"names":["useLayoutEffect","window","vanillaUseLayoutEffect","useEffect","config","PRIORITY_PRELOAD","PRIORITY_SCISSORS","PRIORITY_VIEWPORTS","PRIORITY_GLOBAL","DEFAULT_SCALE_MULTIPLIER","preloadQueue","useCanvasStore","create","set","debug","scaleMultiplier","globalRender","globalPriority","globalClearDepth","globalRenderQueue","clearGlobalRenderQueue","isCanvasAvailable","hasSmoothScrollbar","canvasChildren","renderToCanvas","key","mesh","props","_ref","_extends2","Object","getOwnPropertyDescriptor","instances","inactive","_extends","updateCanvas","newProps","_ref2","_extends3","_canvasChildren$key","removeFromCanvas","dispose","_ref3","_canvasChildren$key2","map","_toPropertyKey","pageReflow","requestReflow","state","scroll","y","x","limit","velocity","progress","direction","scrollDirection","undefined","scrollTo","target","onScroll","ResizeManager","document","fonts","ready","then","callback","timeout","requestIdleCallback","_ref$timeout","setTimeout","PerspectiveCamera","forwardRef","ref","_ref$makeDefault","makeDefault","useThree","camera","size","viewport","cameraRef","useRef","useMemo","width","height","aspect","fov","distance","position","_props$position","Math","max","tan","PI","atan","_useMemo","current","updateProjectionMatrix","updateMatrixWorld","getCurrentViewport","oldCam","React","createElement","mergeRefs","onUpdate","self","near","far","_excluded","OrthographicCamera","lookAt","left","right","top","bottom","setAllCulled","obj","overrideCulled","wasFrustumCulled","frustumCulled","wasVisible","visible","children","forEach","child","viewportSize","Vector2","requestRender","layers","getState","concat","renderScissor","gl","scene","layer","_ref$layer","_ref$autoClear","autoClear","clearDepth","_ref$clearDepth","setScissor","setScissorTest","render","renderViewport","_ref2$layer","scissor","_ref2$scissor","_ref2$autoClear","_ref2$clearDepth","getSize","setViewport","preloadScene","push","globalScene","globalCamera","invalidate","useScrollRig","_scrollRig","reflow","reflowCompleted","scrollRig","keys","length","console","log","Fragment","cloneElement","GlobalRenderer","s","frameloop","checkShaderErrors","useFrame","clear","disableAll","enable","b","Symbol","for","c","d","e","f","g","h","k","l","m","n","p","q","r","t","v","w","z","a","u","$$typeof","type","A","process","env","NODE_ENV","hasSymbol","REACT_ELEMENT_TYPE","REACT_PORTAL_TYPE","REACT_FRAGMENT_TYPE","REACT_STRICT_MODE_TYPE","REACT_PROFILER_TYPE","REACT_PROVIDER_TYPE","REACT_CONTEXT_TYPE","REACT_ASYNC_MODE_TYPE","REACT_CONCURRENT_MODE_TYPE","REACT_FORWARD_REF_TYPE","REACT_SUSPENSE_TYPE","REACT_SUSPENSE_LIST_TYPE","REACT_MEMO_TYPE","REACT_LAZY_TYPE","REACT_BLOCK_TYPE","REACT_FUNDAMENTAL_TYPE","REACT_RESPONDER_TYPE","REACT_SCOPE_TYPE","typeOf","object","$$typeofType","ConcurrentMode","ContextConsumer","ContextProvider","Element","ForwardRef","Lazy","Memo","Portal","Profiler","StrictMode","Suspense","hasWarnedAboutDeprecatedIsAsyncMode","isConcurrentMode","exports","AsyncMode","isAsyncMode","isContextConsumer","isContextProvider","isElement","isForwardRef","isFragment","isLazy","isMemo","isPortal","isProfiler","isStrictMode","isSuspense","isValidElementType","module","require$$0","require$$1","getOwnPropertySymbols","hasOwnProperty","prototype","propIsEnumerable","propertyIsEnumerable","toObject","val","TypeError","objectAssign","assign","test1","String","getOwnPropertyNames","test2","i","fromCharCode","order2","join","test3","split","letter","err","shouldUseNative","source","from","symbols","to","arguments","call","has","Function","bind","printWarning","ReactPropTypesSecret","loggedTypeFailures","text","message","error","Error","checkPropTypes","typeSpecs","values","location","componentName","getStack","typeSpecName","name","ex","stack","resetWarningCache","emptyFunctionThatReturnsNull","emptyFunction","emptyFunctionWithReset","isValidElement","throwOnDirectAccess","ITERATOR_SYMBOL","iterator","ANONYMOUS","ReactPropTypes","array","createPrimitiveTypeChecker","bigint","bool","func","number","string","symbol","any","createChainableTypeChecker","arrayOf","typeChecker","propName","propFullName","PropTypeError","propValue","Array","isArray","getPropType","element","elementType","ReactIs","instanceOf","expectedClass","constructor","node","isNode","objectOf","propType","oneOf","expectedValues","validate","is","valuesString","JSON","stringify","value","getPreciseType","oneOfType","arrayOfTypeCheckers","checker","getPostfixForTypeWarning","expectedTypes","checkerResult","data","expectedType","shape","shapeTypes","invalidValidatorError","exact","allKeys","this","checkType","isRequired","secret","chainedCheckType","every","iteratorFn","maybeIterable","getIteratorFn","step","entries","next","done","entry","RegExp","isSymbol","Date","PropTypes","shim","getShim","require$$2","CanvasErrorBoundary","_this","getDerivedStateFromError","onError","Component","propTypes","_excluded2","GlobalCanvasImpl","as","Canvas","style","orthographic","_ref$globalRender","_ref$globalClearDepth","_objectWithoutPropertiesLoose","globalRenderState","qs","parse","search","setState","id","manual","failIfMajorPerformanceCaveat","resize","debounce","polyfill","ResizeObserver","GlobalChildren","DebugMesh","scale","args","uniforms","color","Color","vertexShader","fragmentShader","transparent","isBrowser","useWindowSize","_temp","_ref$debounce","_useState","useState","innerWidth","Infinity","innerHeight","windowSize","setWindowSize","canvasEl","getElementById","handleResize","clientWidth","clientHeight","observer","pkg","debouncedResize","observe","addEventListener","removeEventListener","_observer","disconnect","mapLinear","a1","a2","b1","b2","useScrollbar","enabled","useTracker","track","options","_useScrollbar","rootMargin","threshold","autoUpdate","opts","index","wrapper","_useInView","useInView","inViewport","inView","vecn","vec3","setScale","scrollState","visibility","rect","reactiveRect","_useState2","setReactiveRect","bounds","positiveYUpBottom","_track$current","_rect","getBoundingClientRect","initialY","scrollTop","scrollY","initialX","scrollLeft","scrollX","update","useCallback","onlyUpdateInViewport","_ref$onlyUpdateInView","_scroll","updateBounds","updatePosition","isHorizontal","sizeProp","pxInside","ScrollScene","memo","_ref$margin","margin","inViewportMargin","inViewportThreshold","_ref$visible","hideOffscreen","_ref$hideOffscreen","_ref$scissor","_ref$debug","_ref$as","_ref$priority","priority","inlineSceneRef","setScene","Scene","_useScrollRig","_useTracker","content","InlineElement","createPortal","_excluded3","Viewport","_ref$orthographic","hud","get","setEvents","events","connected","old","ViewportScrollScene","_ref3$margin","trackerProps","compute","event","pointer","clientX","clientY","raycaster","setFromCamera","useCanvas","deps","_ref$dispose","MathUtils","generateUUID","uniqueKey","UseCanvas","hasWebpSupport","supportsWebP","supported","EASE_EXP_OUT","pow","duration","_ref$duration","easing","_ref$easing","smooth","_ref$smooth","_ref$direction","lenisImpl","useImperativeHandle","start","_lenisImpl$current","stop","_lenisImpl$current2","on","cb","_lenisImpl$current3","once","_lenisImpl$current4","off","_lenisImpl$current5","notify","_lenisImpl$current6","_lenisImpl$current7","raf","time","_lenisImpl$current8","__lenis","lenis","Lenis","destroy","_ref$enabled","locked","_ref$locked","_ref$scrollRestoratio","scrollRestoration","disablePointerOnScroll","_ref$disablePointerOn","horizontal","_ref$horizontal","scrollInContainer","_ref$scrollInContaine","_ref$updateGlobalStat","updateGlobalState","innerRef","globalScrollState","_lenis$current","preventPointerEvents","prevent","preventPointer","pointerEvents","onMouseMove","globalOnScroll","_lenis$current2","_lenis$current3","history","_lenis$current7","removeEffect","addEffect","_lenis$current4","_lenis$current5","disablePointer","abs","_lenis$current6","invalidateOnWheelEvent","_lenis$current8","documentElement","classList","toggle","_lenis$current9","_lenis$current10","html","body","firstElementChild","LenisScrollbar","smoothTouch","add","remove","hidden","hiddenWhenSmooth","transparentColor","transparentColorWhenSmooth","imgRef","isSafari","isFirefox","firefoxVersion","initTexture","_ref$initTexture","_ref$premultiplyAlpha","premultiplyAlpha","suspend","DefaultLoadingManager","itemStart","Promise","resolve","el","returnResolve","currentSrc","complete","equal","LoaderProto","test","navigator","userAgent","indexOf","match","createImageBitmap","TextureLoader","ImageBitmapLoader","result","useLoader","loader","setOptions","colorSpaceConversion","imageOrientation","setRequestHeader","Accept","Texture","ImageBitmap","CanvasTexture","texture","itemEnd"],"mappings":"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"}